{
  if (original == null)   return null;
  StringBuffer text=new StringBuffer(original.length());
  for (int i=0; i < original.length(); i++) {
    if (original.charAt(i) == '\r') {
      text.append('\n');
      if (i + 1 < original.length() && original.charAt(i + 1) == '\n') {
        i++;
      }
    }
 else {
      text.append(original.charAt(i));
    }
  }
  return text.toString();
}
