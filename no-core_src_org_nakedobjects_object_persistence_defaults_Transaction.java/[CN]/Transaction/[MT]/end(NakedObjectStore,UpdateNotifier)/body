{
  LOG.debug("end transaction" + this);
  PersistenceCommand[] commands=new PersistenceCommand[transactionCommands.size()];
  transactionCommands.copyInto(commands);
  objectStore.runTransaction(commands);
  objectStore.endTransaction();
  NakedObject object;
  for (Enumeration e=toNotify.elements(); e.hasMoreElements(); ) {
    object=(NakedObject)e.nextElement();
    LOG.debug("broadcastObjectUpdate " + object);
    notifier.broadcastObjectChanged(object);
  }
  toNotify.removeAllElements();
}
