{
  BasicConfigurator.configure();
  LogManager.getRootLogger().setLevel(Level.OFF);
  mockAuthenticationManager=mockery.mock(AuthenticationManager.class);
  mockEncoder=mockery.mock(ObjectEncoderDecoder.class);
  server=new ServerFacadeImpl(mockAuthenticationManager);
  server.setEncoder(mockEncoder);
  server.init();
  system=new TestProxySystem();
  system.init();
  adapter=system.createPersistentTestObject();
  oid=adapter.getOid();
  targetData=new DummyIdentityData(oid,TestProxyAdapter.class.getName(),new TestProxyVersion(1));
  parameterData=new ReferenceData[]{};
  final TestProxySpecification proxySpecification=(TestProxySpecification)adapter.getSpecification();
  mockAction=mockery.mock(ObjectAction.class);
  proxySpecification.setupAction(mockAction);
  mockery.checking(new Expectations(){
{
      one(mockAction).getId();
      will(returnValue("action"));
      one(mockAction).execute(with(equalTo(adapter)),with(equalTo(new ObjectAdapter[0])));
      will(returnValue(adapter));
    }
  }
);
}
