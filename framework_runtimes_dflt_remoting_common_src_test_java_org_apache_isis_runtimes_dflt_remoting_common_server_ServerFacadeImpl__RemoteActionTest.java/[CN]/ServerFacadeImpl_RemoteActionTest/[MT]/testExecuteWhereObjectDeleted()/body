{
  final ExecuteServerActionResponse results=null;
  mockery.checking(new Expectations(){
{
      final ReferenceData deletedObjectIdentityData=new DummyReferenceData(adapter.getOid(),"",adapter.getVersion());
      one(mockEncoder).encodeIdentityData(adapter);
      will(returnValue(deletedObjectIdentityData));
      one(mockEncoder).encodeServerActionResult(with(equalTo(adapter)),with(equalTo(new ObjectData[0])),with(equalTo(new ReferenceData[]{deletedObjectIdentityData})),with(nullValue(ObjectData.class)),with(equalTo(new ObjectData[0])),with(equalTo(new String[0])),with(equalTo(new String[0])));
      will(returnValue(null));
    }
  }
);
  IsisContext.getTransactionManager().startTransaction();
  IsisContext.getUpdateNotifier().addDisposedObject(adapter);
  final ExecuteServerActionRequest request=new ExecuteServerActionRequest(new TestProxySession(),ActionType.USER,"action()",targetData,parameterData);
  final ExecuteServerActionResponse result=server.executeServerAction(request);
  IsisContext.getTransactionManager().endTransaction();
  assertEquals(results,result);
}
