{
  final Collection<ObjectSpecification> objectSpecs=getSpecificationLoaderSpi().allSpecifications();
  for (  final ObjectSpecification objSpec : objectSpecs) {
    final JdoPersistenceCapableFacet jpcf=objSpec.getFacet(JdoPersistenceCapableFacet.class);
    if (jpcf == null) {
      continue;
    }
    final IdentityType identityType=jpcf.getIdentityType();
    if (identityType != IdentityType.DATASTORE && identityType != IdentityType.UNSPECIFIED) {
      validationFailures.add("DataNucleus object store: {0} must be annotated with @PersistenceCapable, with an identityType of either DATASTORE or UNSPECIFIED (has an identityType of {1})",objSpec.getFullIdentifier(),identityType);
    }
  }
}
