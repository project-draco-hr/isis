{
  super.draw(canvas);
  Color color=null;
  final ViewState state=getState();
  final boolean hasFocus=getViewManager().hasFocus(getView());
  if (state.canDrop()) {
    color=Toolkit.getColor(ColorsAndFonts.COLOR_VALID);
  }
 else   if (state.cantDrop()) {
    color=Toolkit.getColor(ColorsAndFonts.COLOR_INVALID);
  }
 else   if (hasFocus) {
    color=Toolkit.getColor(ColorsAndFonts.COLOR_IDENTIFIED);
  }
 else   if (state.isObjectIdentified()) {
    color=Toolkit.getColor(ColorsAndFonts.COLOR_SECONDARY2);
  }
  final Size s=getSize();
  if (getContent().isPersistable() && getContent().isTransient()) {
    final int x=s.getWidth() - 13;
    final int y=0;
    final Image icon=ImageFactory.getInstance().loadIcon("transient",8,null);
    if (icon == null) {
      canvas.drawText("*",x,y + Toolkit.getText(ColorsAndFonts.TEXT_NORMAL).getAscent(),Toolkit.getColor(ColorsAndFonts.COLOR_BLACK),Toolkit.getText(ColorsAndFonts.TEXT_NORMAL));
    }
 else {
      canvas.drawImage(icon,x,y,12,12);
    }
  }
  if (color != null) {
    if (hasFocus) {
      final int xExtent=s.getWidth() - left;
      for (int i=0; i < left; i++) {
        canvas.drawRectangle(i,i,xExtent - 2 * i,s.getHeight() - 2 * i,color);
      }
    }
 else {
      final int xExtent=s.getWidth();
      for (int i=0; i < left; i++) {
        canvas.drawRectangle(i,i,xExtent - 2 * i,s.getHeight() - 2 * i,color);
      }
      canvas.drawLine(xExtent - BORDER,top,xExtent - BORDER,top + s.getHeight(),color);
      canvas.drawSolidRectangle(xExtent - BORDER + 1,top,BORDER - 2,s.getHeight() - 2 * top,Toolkit.getColor(ColorsAndFonts.COLOR_SECONDARY3));
    }
  }
}
