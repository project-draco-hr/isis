{
  DomainServicesResource servicesResource=client.getServicesResource();
  Response servicesResp=servicesResource.services();
  RestfulResponse<ServicesRepresentation> servicesJsonResp=RestfulResponse.of(servicesResp,ServicesRepresentation.class);
  assertThat(servicesJsonResp.getStatus().getFamily(),is(Family.SUCCESSFUL));
  ServicesRepresentation servicesRepr=servicesJsonResp.getEntity();
  assertThat(servicesRepr,is(not(nullValue())));
  assertThat(servicesRepr.isMap(),is(true));
  assertThat(servicesRepr.getRepresentationType(),is(not(notNullValue())));
  assertThat(servicesRepr.getString("title"),is("ApplibValues"));
  JsonRepresentation serviceValues=servicesRepr.xpath("/value/e[rel='service']");
  assertThat(serviceValues,is(not(nullValue())));
  assertThat(serviceValues.arraySize(),is(greaterThan(0)));
  Link serviceLink=serviceValues.elementAt(0).asLink();
  assertThat(serviceLink.getRel(),is("service"));
  assertThat(serviceLink.getHref(),matches("http://localhost:\\d+/services/.*$"));
}
