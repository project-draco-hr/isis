{
  super.setUp();
  mockServicesInjector=context.mock(ServicesInjector.class);
  mockTranslationService=context.mock(TranslationService.class);
  mockDeploymentCategoryProvider=context.mock(DeploymentCategoryProvider.class);
  mockAuthenticationSessionProvider=context.mock(AuthenticationSessionProvider.class);
  stubConfigurationServiceInternal=new IsisConfigurationDefault(null);
  final AuthenticationSession mockAuthenticationSession=context.mock(AuthenticationSession.class);
  context.checking(new Expectations(){
{
      allowing(mockDeploymentCategoryProvider).getDeploymentCategory();
      will(returnValue(DeploymentCategory.PRODUCTION));
      allowing(mockAuthenticationSessionProvider).getAuthenticationSession();
      will(returnValue(mockAuthenticationSession));
      allowing(mockServicesInjector).lookupService(TranslationService.class);
      will(returnValue(mockTranslationService));
      allowing(mockServicesInjector).lookupService(AuthenticationSessionProvider.class);
      will(returnValue(mockAuthenticationSessionProvider));
      allowing(mockServicesInjector).lookupService(ConfigurationServiceInternal.class);
      will(returnValue(stubConfigurationServiceInternal));
      allowing(mockServicesInjector).lookupService(DeploymentCategoryProvider.class);
      will(returnValue(mockDeploymentCategoryProvider));
      allowing(mockDeploymentCategoryProvider).getDeploymentCategory();
      will(returnValue(DeploymentCategory.PRODUCTION));
    }
  }
);
}
