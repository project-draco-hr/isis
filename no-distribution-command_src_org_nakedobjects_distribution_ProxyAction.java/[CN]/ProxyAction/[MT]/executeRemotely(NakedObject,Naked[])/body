{
  Data[] parameterObjectData=parameterValues(parameters);
  LOG.debug(debug("execute remotely",getIdentifier(),target,parameters));
  ReferenceData targetReference=encoder.createActionTarget(target);
  ServerActionResultData result;
  try {
    String name=getIdentifier().getClassName() + "#" + getIdentifier().getName();
    result=connection.executeServerAction(NakedObjects.getCurrentSession(),getType().getName(),name,targetReference,parameterObjectData);
  }
 catch (  NakedObjectRuntimeException e) {
    LOG.error("remote exception: " + e.getMessage(),e);
    throw e;
  }
  ObjectDecoder.madePersistent(target,result.getPersistedTarget());
  for (int i=0; i < parameters.length; i++) {
    if (getParameterTypes()[i].isObject()) {
      ObjectDecoder.madePersistent((NakedObject)parameters[i],result.getPersistedParameters()[i]);
    }
  }
  Data returned=result.getReturn();
  Naked returnedObject;
  returnedObject=returned instanceof NullData ? null : ObjectDecoder.restore(returned);
  ObjectData[] updates=result.getUpdates();
  for (int i=0; i < updates.length; i++) {
    LOG.debug("update " + DistributionLogger.dump(updates[i]));
    ObjectDecoder.restore(updates[i]);
  }
  return returnedObject;
}
