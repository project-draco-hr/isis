{
  if (LOG.isDebugEnabled()) {
    LOG.debug("creating " + this);
  }
  this.configuration=configuration;
  this.specificationLoader=specificationLoader;
  this.authenticationSession=authenticationSession;
  this.fixturesInstalledFlag=fixturesInstalledFlag;
  this.servicesInjector=servicesInjector;
  this.jdoPersistenceManagerFactory=jdoPersistenceManagerFactory;
  final AdapterManager adapterManager=this;
  this.persistenceQueryFactory=new PersistenceQueryFactory(adapterManager,specificationLoader);
  this.transactionManager=new IsisTransactionManager(this,servicesInjector);
  setState(State.NOT_INITIALIZED);
  final boolean concurrencyCheckingGloballyDisabled=configuration.getBoolean("isis.persistor.disableConcurrencyChecking",false);
  this.concurrencyCheckingGloballyEnabled=!concurrencyCheckingGloballyDisabled;
}
