{
  if (getState() == State.CLOSED) {
    return;
  }
  try {
    final IsisTransaction currentTransaction=transactionManager.getTransaction();
    if (currentTransaction != null && !currentTransaction.getState().isComplete()) {
      if (currentTransaction.getState().canCommit()) {
        transactionManager.endTransaction();
      }
 else       if (currentTransaction.getState().canAbort()) {
        transactionManager.abortTransaction();
      }
    }
  }
 catch (  final Throwable ex) {
    LOG.error("close: failed to end transaction; continuing to avoid memory leakage");
  }
  try {
    persistenceManager.close();
  }
 catch (  final Throwable ex) {
    LOG.error("close: failed to close JDO persistenceManager; continuing to avoid memory leakage");
  }
  try {
    adapterManager.close();
  }
 catch (  final Throwable ex) {
    LOG.error("close: adapterManager#close() failed; continuing to avoid memory leakage");
  }
  setState(State.CLOSED);
}
