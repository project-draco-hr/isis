{
  if (LOG.isDebugEnabled()) {
    LOG.debug("findInstances using (applib) Query: " + query);
  }
  final PersistenceQuery persistenceQuery=createPersistenceQueryFor(query,cardinality);
  if (LOG.isDebugEnabled()) {
    LOG.debug("findInstances using (core runtime) PersistenceQuery: " + persistenceQuery);
  }
  final PersistenceQueryProcessor<? extends PersistenceQuery> processor=lookupProcessorFor(persistenceQuery);
  final List<ObjectAdapter> instances=getTransactionManager().executeWithinTransaction(new TransactionalClosureWithReturn<List<ObjectAdapter>>(){
    @Override public List<ObjectAdapter> execute(){
      return processPersistenceQuery(processor,persistenceQuery);
    }
  }
);
  final ObjectSpecification specification=persistenceQuery.getSpecification();
  final FreeStandingList results=new FreeStandingList(specification,instances);
  return getAdapterManager().adapterFor(results);
}
