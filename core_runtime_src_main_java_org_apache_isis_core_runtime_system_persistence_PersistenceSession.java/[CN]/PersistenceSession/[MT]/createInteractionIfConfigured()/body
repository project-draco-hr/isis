{
  final ReifiableActionContext ic=getServiceOrNull(ReifiableActionContext.class);
  if (ic == null) {
    return;
  }
  final ReifiableActionService interactionFactory=getServiceOrNull(ReifiableActionService.class);
  final ReifiableAction interaction=interactionFactory != null ? interactionFactory.create() : new ReifiableActionDefault();
  ic.setReifiableAction(interaction);
  if (interaction.getTimestamp() == null) {
    interaction.setTimestamp(Clock.getTimeAsJavaSqlTimestamp());
  }
  if (interaction.getUser() == null) {
    interaction.setUser(getAuthenticationSession().getUserName());
  }
}
