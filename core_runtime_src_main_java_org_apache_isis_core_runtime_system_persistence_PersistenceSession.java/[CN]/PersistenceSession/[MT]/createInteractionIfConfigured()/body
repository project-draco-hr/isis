{
  final InteractionContext ic=getServiceOrNull(InteractionContext.class);
  if (ic == null) {
    return;
  }
  final InteractionService interactionFactory=getServiceOrNull(InteractionService.class);
  final Interaction interaction=interactionFactory != null ? interactionFactory.create() : new InteractionDefault();
  ic.setInteraction(interaction);
  if (interaction.getTimestamp() == null) {
    interaction.setTimestamp(Clock.getTimeAsJavaSqlTimestamp());
  }
  if (interaction.getUser() == null) {
    interaction.setUser(getAuthenticationSession().getUserName());
  }
}
