{
  final InteractionContext ic=getServiceOrNull(InteractionContext.class);
  if (ic == null) {
    return;
  }
  final InteractionFactory interactionFactory=getServiceOrNull(InteractionFactory.class);
  final Interaction interaction=interactionFactory != null ? interactionFactory.create() : new InteractionDefault();
  ic.setInteraction(interaction);
  if (interaction.getStartedAt() == null) {
    interaction.setStartedAt(Clock.getTimeAsJavaSqlTimestamp());
  }
  if (interaction.getUser() == null) {
    interaction.setUser(getAuthenticationSession().getUserName());
  }
}
