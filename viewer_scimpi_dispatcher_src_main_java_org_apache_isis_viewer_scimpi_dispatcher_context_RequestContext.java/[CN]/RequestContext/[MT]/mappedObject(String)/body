{
  if (id != null && id.equals("")) {
    return null;
  }
  if (id == null) {
    id=RESULT;
  }
  String[] idParts=id.split("@");
  if (idParts.length == 2) {
    ObjectAdapter mappedObject=objectMapping.mappedObject(id);
    if (mappedObject instanceof ObjectAdapter) {
      IsisContext.getPersistenceSession().resolveImmediately((ObjectAdapter)mappedObject);
    }
    return mappedObject;
  }
 else {
    ObjectAdapter parentObject=objectMapping.mappedObject(idParts[0] + "@" + idParts[1]);
    if (parentObject instanceof ObjectAdapter) {
      IsisContext.getPersistenceSession().resolveImmediately((ObjectAdapter)parentObject);
    }
    AggregatedOid aggregatedOid=new AggregatedOid(parentObject.getOid(),idParts[2]);
    ObjectAdapter aggregatedAdapter=null;
    outer:     for (    ObjectAssociation association : parentObject.getSpecification().getAssociations()) {
      if (association.getSpecification().isAggregated()) {
        if (association.isOneToManyAssociation()) {
          ObjectAdapter coll=association.get(parentObject);
          CollectionFacet facet=coll.getSpecification().getFacet(CollectionFacet.class);
          for (          ObjectAdapter element : facet.iterable(coll)) {
            if (element.getOid().equals(aggregatedOid)) {
              aggregatedAdapter=element;
              break outer;
            }
          }
        }
 else {
          if (association.get(parentObject).getOid().equals(aggregatedOid)) {
            aggregatedAdapter=association.get(parentObject);
            break;
          }
        }
      }
    }
    return aggregatedAdapter;
  }
}
