{
  if (id != null && id.equals("")) {
    return null;
  }
  if (id == null) {
    id=RESULT;
  }
  String[] idParts=id.split("@");
  if (idParts.length == 2) {
    ObjectAdapter mappedObject=objectMapping.mappedObject(id);
    if (mappedObject instanceof ObjectAdapter) {
      IsisContext.getPersistenceSession().resolveImmediately((ObjectAdapter)mappedObject);
    }
    return mappedObject;
  }
 else {
    ObjectAdapter parentObject=objectMapping.mappedObject(idParts[0] + "@" + idParts[1]);
    if (parentObject instanceof ObjectAdapter) {
      IsisContext.getPersistenceSession().resolveImmediately((ObjectAdapter)parentObject);
    }
    ObjectAssociation association=parentObject.getSpecification().getAssociation(idParts[2]);
    ObjectAdapter aggregatedAdapter=association.get(parentObject);
    if (idParts.length == 4) {
      CollectionFacet collectionFacet=aggregatedAdapter.getSpecification().getFacet(CollectionFacet.class);
      List<ObjectAdapter> collection=new ArrayList<ObjectAdapter>(collectionFacet.collection(aggregatedAdapter));
      aggregatedAdapter=collection.get(Integer.valueOf(idParts[3]));
    }
    return aggregatedAdapter;
  }
}
