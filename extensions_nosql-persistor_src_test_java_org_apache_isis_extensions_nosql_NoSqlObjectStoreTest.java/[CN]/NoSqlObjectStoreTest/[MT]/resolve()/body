{
  specification=IsisContext.getSpecificationLoader().loadSpecification(ExamplePojo.class);
  context.checking(new Expectations(){
{
      one(keyCreator).key(SerialOid.createPersistent(3));
      will(returnValue("3"));
      one(db).getInstance("3",specification.getFullName());
    }
  }
);
  object=IsisContext.getPersistenceSession().recreateAdapter(SerialOid.createPersistent(3),specification);
  assertEquals(ResolveState.GHOST,object.getResolveState());
  store.resolveImmediately(object);
  assertEquals(ResolveState.RESOLVED,object.getResolveState());
}
