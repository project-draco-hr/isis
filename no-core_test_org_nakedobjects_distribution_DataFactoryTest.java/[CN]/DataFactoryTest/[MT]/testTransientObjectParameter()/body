{
  rootObject.setupResolveState(ResolveState.TRANSIENT);
  referencedObjectField.setupResolveState(ResolveState.TRANSIENT);
  ObjectData rootData=(ObjectData)factory.createDataForParameter(rootObject);
  assertEquals(ResolveState.SERIALIZING_TRANSIENT,rootObject.getResolveState());
  assertEquals(null,rootData.getOid());
  assertEquals(rootSpecification.getFullName(),rootData.getType());
  assertEquals(11,rootData.getVersion());
  assertEquals(3,rootData.getFieldContent().length);
  ObjectData referencedFieldData=(ObjectData)rootData.getFieldContent()[0];
  assertEquals(1,referencedFieldData.getFieldContent().length);
  assertEquals(12,referencedFieldData.getVersion());
  assertEquals(referencedSpecification.getFullName(),referencedFieldData.getType());
  ObjectData referencedFieldData2=(ObjectData)referencedFieldData.getFieldContent()[0];
  assertEquals(null,referencedFieldData2.getFieldContent());
  assertEquals(13,referencedFieldData2.getVersion());
  assertEquals(referencedSpecification.getFullName(),referencedFieldData.getType());
  ValueData valueData=(ValueData)rootData.getFieldContent()[1];
  assertEquals(valueSpecification.getFullName(),valueData.getType());
  assertEquals(value,valueData.getValue());
  ObjectData emptyFieldData=(ObjectData)rootData.getFieldContent()[2];
  assertNull(emptyFieldData);
}
