{
  final ObjectSpecification specification=object.getSpecification();
  ObjectAdapter[] retrievedInstance=store.getInstances(new PersistenceQueryFindByTitle(specification,"changed"));
  assertEquals(0,retrievedInstance.length);
  ((TestProxyAdapter)object).setupTitleString("changed title");
  final PersistenceCommand command=store.createSaveObjectCommand(object);
  assertEquals(object,command.onObject());
  store.execute(Collections.<PersistenceCommand>singletonList(command));
  resetIdentityMap();
  retrievedInstance=store.getInstances(new PersistenceQueryFindByTitle(specification,"changed"));
  assertEquals(1,retrievedInstance.length);
  assertNotSame(object,retrievedInstance[0]);
}
