{
  int i;
  if (instream == null)   return -1;
  if ((offset + len) > buf.length || offset < 0)   throw new ArrayIndexOutOfBoundsException();
  for (i=0; i < len; i++) {
    if (start >= finish) {
      start=0;
      finish=instream.read(buffer,0,buffer.length);
      if (finish <= 0) {
        if (finish <= 0)         this.close();
        break;
      }
    }
    buf[offset + i]=(char)(0x0ff & buffer[start++]);
  }
  if (i == 0 && finish <= 0)   return -1;
  return i;
}
