{
  String id=request.getOptionalProperty(OBJECT);
  String fieldName=request.getRequiredProperty(FIELD);
  String className=request.getOptionalProperty(CLASS);
  className=className == null ? "" : " class=\"" + className + "\"";
  ObjectAdapter object=request.getContext().getMappedObjectOrVariable(id,ELEMENT);
  ObjectAssociation field=object.getSpecification().getAssociation(fieldName);
  if (field == null) {
    throw new ScimpiException("No field " + fieldName + " in "+ object.getSpecification().getFullIdentifier());
  }
  if (field.isVisible(IsisContext.getAuthenticationSession(),object).isVetoed()) {
    throw new ForbiddenException("Field " + fieldName + " in "+ object+ " is not visible");
  }
  request.appendHtml("<td" + className + ">");
  ObjectAdapter fieldReference=field.get(object);
  String source=fieldReference == null ? "" : request.getContext().mapObject(fieldReference,Scope.REQUEST);
  String name=request.getOptionalProperty(RESULT_NAME,fieldName);
  request.getContext().addVariable(name,source,Scope.REQUEST);
  request.pushNewBuffer();
  request.processUtilCloseTag();
  String buffer=request.popBuffer();
  if (buffer.trim().length() == 0) {
    request.appendHtml(fieldReference == null ? "" : fieldReference.titleString());
  }
 else {
    request.appendHtml(buffer);
  }
  request.appendHtml("</td>");
}
