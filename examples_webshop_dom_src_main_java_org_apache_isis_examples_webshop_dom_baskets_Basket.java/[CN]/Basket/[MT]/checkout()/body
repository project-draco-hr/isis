{
  final Order order=orders.createOrder(getOwner());
  for (  BasketLineItem bli : getLineItems()) {
    OrderLineItem oli=newTransientInstance(OrderLineItem.class);
    oli.setOrder(order);
    order.getLineItems().add(oli);
    oli.setProduct(bli.getProduct());
    oli.setQuantity(bli.getQuantity());
    oli.setPrice(bli.getProduct().getPrice());
    persist(oli);
  }
  for (  BasketLineItem bli : getLineItems()) {
    bli.setBasket(null);
  }
  getLineItems().clear();
  return order;
}
