{
  ObjectAdapter object=inObject;
  final Oid oid=object.getOid();
  if (oidType == null) {
    oidType=oid.getClass();
  }
  String encodedOid;
  if (oid instanceof AggregatedOid) {
    final AggregatedOid aoid=(AggregatedOid)oid;
    final Oid parentOid=aoid.getParentOid();
    object=IsisContext.getPersistenceSession().getAdapterManager().getAdapterFor(parentOid);
    final String aggregatedId=aoid.getId();
    encodedOid=Long.toString(((SerialOid)parentOid).getSerialNo(),16) + "@" + aggregatedId;
  }
 else   if (oid instanceof SerialOid) {
    encodedOid=Long.toString(((SerialOid)oid).getSerialNo(),16);
  }
 else {
    encodedOid=IsisContext.getPersistenceSession().getOidGenerator().getOidStringifier().enString(oid);
  }
  final boolean isTransient=object.isTransient();
  final String transferableId=(isTransient ? "T" : "P") + object.getSpecification().getFullIdentifier() + "@"+ encodedOid;
  LOG.debug("encoded " + oid + " as "+ transferableId+ " ~ "+ encodedOid);
  if (inObject.isTransient()) {
    final TransientObjectMapping mapping=new TransientObjectMapping(inObject);
    if (scope == Scope.REQUEST) {
      requestTransients.put(transferableId,mapping);
    }
 else     if (scope == Scope.INTERACTION || scope == Scope.SESSION) {
      sessionTransients.put(transferableId,mapping);
    }
 else {
      throw new ScimpiException("Can't hold globally transient object");
    }
  }
  return transferableId;
}
