{
  DeserializerFactoryConfig deserializerFactoryConfig=new DeserializerFactoryConfig();
  JsonRepresentationDeserializerFactory deserializerFactory=new JsonRepresentationDeserializerFactory(deserializerFactoryConfig);
  final DefaultDeserializationContext deserializerProvider=new DefaultDeserializationContext.Impl(deserializerFactory);
  final ObjectMapper objectMapper=new ObjectMapper(null,null,deserializerProvider);
  final SimpleModule jsonModule=new SimpleModule("json",new Version(1,0,0,null,"org.apache","isis"));
  jsonModule.addSerializer(JsonRepresentation.class,new JsonRepresentationSerializer());
  objectMapper.registerModule(jsonModule);
  if (prettyPrinting == PrettyPrinting.ENABLE) {
    objectMapper.configure(SerializationFeature.INDENT_OUTPUT,true);
  }
  objectMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES,false);
  return objectMapper;
}
