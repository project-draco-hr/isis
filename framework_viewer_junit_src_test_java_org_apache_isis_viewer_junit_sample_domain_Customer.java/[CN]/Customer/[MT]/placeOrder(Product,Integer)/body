{
  final Order order=getContainer().newTransientInstance(Order.class);
  order.modifyCustomer(this);
  order.modifyProduct(p);
  order.setOrderDate(new Date(Clock.getTime()));
  order.setQuantity(quantity);
  addToOrders(order);
  modifyLastOrder(order);
  order.makePersistent();
}
