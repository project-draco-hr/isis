{
  try {
    getSession().bind();
    setTitle(title);
    themeDiv=new WebMarkupContainer(ID_THEME);
    add(themeDiv);
    if (applicationName != null) {
      themeDiv.add(new CssClassAppender(asCssStyle(applicationName)));
    }
    addApplicationActions(themeDiv);
    this.childComponentIds=Collections.unmodifiableList(Arrays.asList(childComponentIds));
    this.pageParameters=pageParameters;
    addApplicationName(themeDiv);
    addUserName(themeDiv);
    addLogoutLink(themeDiv);
    addAboutLink(themeDiv);
    addBreadcrumbs();
    addThemePicker();
    add(new HeaderResponseContainer("footerJS","footerJS"));
  }
 catch (  RuntimeException ex) {
    LOG.error("Failed to construct page, going back to sign in page",ex);
    final List<ExceptionRecognizer> exceptionRecognizers=getServicesInjector().lookupServices(ExceptionRecognizer.class);
    final String recognizedMessageIfAny=new ExceptionRecognizerComposite(exceptionRecognizers).recognize(ex);
    final ExceptionModel exceptionModel=ExceptionModel.create(recognizedMessageIfAny,ex);
    getSession().invalidate();
    getSession().clear();
    EXCEPTION.set(exceptionModel);
    throw new RestartResponseAtInterceptPageException(getSignInPage());
  }
}
