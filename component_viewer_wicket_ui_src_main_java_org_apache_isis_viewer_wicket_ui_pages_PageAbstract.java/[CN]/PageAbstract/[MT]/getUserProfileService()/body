{
  final UserProfileService userProfileService=lookupService(UserProfileService.class);
  return new UserProfileService(){
    @Override public String userProfileName(){
      if (PageAbstract.this instanceof ErrorPage) {
        return getAuthenticationSession().getUserName();
      }
      try {
        final String userProfileName=userProfileService != null ? userProfileService.userProfileName() : null;
        return userProfileName != null ? userProfileName : getAuthenticationSession().getUserName();
      }
 catch (      final Exception e) {
        return getAuthenticationSession().getUserName();
      }
    }
  }
;
}
