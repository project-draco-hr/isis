{
  final UserProfileService userProfileService=lookupService(UserProfileService.class);
  return new UserProfileService(){
    @Override public String userProfileName(){
      final String userProfileName=userProfileService != null ? userProfileService.userProfileName() : null;
      return userProfileName != null ? userProfileName : getAuthenticationSession().getUserName();
    }
  }
;
}
