{
  final AuthenticationSession session=getAuthenticationSessionProvider().getAuthenticationSession();
  final String username=overrideUser.get() != null ? overrideUser.get() : session.getUserName();
  final List<String> roles=overrideRoles.get() != null ? overrideRoles.get() : session.getRoles();
  final List<RoleMemento> roleMementos=asRoleMementos(roles);
  final UserMemento user=new UserMemento(username,roleMementos);
  return user;
}
