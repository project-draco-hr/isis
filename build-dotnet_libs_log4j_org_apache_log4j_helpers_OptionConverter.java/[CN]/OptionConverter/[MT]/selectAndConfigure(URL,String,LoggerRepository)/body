{
  Configurator configurator=null;
  String filename=url.getFile();
  if (clazz == null && filename != null && filename.endsWith(".xml")) {
    clazz="org.apache.log4j.xml.DOMConfigurator";
  }
  if (clazz != null) {
    LogLog.debug("Preferred configurator class: " + clazz);
    configurator=(Configurator)instantiateByClassName(clazz,Configurator.class,null);
    if (configurator == null) {
      LogLog.error("Could not instantiate configurator [" + clazz + "].");
      return;
    }
  }
 else {
    configurator=new PropertyConfigurator();
  }
  configurator.doConfigure(url,hierarchy);
}
