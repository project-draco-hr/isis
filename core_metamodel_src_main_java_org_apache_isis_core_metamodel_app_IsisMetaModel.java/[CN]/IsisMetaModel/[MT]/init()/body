{
  ensureNotInitialized();
  final List<LayoutMetadataReader> layoutMetadataReaders=Lists.<LayoutMetadataReader>newArrayList(new LayoutMetadataReaderFromJson());
  reflector=new ObjectReflectorDefault(configuration,programmingModel,facetDecorators,metaModelValidator,layoutMetadataReaders);
  final ServicesInjectorDefault servicesInjector=new ServicesInjectorDefault(services);
  reflector.setServiceInjector(servicesInjector);
  runtimeContext.injectInto(reflector);
  reflector.injectInto(runtimeContext);
  reflector.initialize();
  validationFailures=reflector.validate();
  runtimeContext.init();
  for (  final Object service : services) {
    final ObjectSpecification serviceSpec=reflector.loadSpecification(service.getClass());
    serviceSpec.markAsService();
  }
  state=State.INITIALIZED;
}
