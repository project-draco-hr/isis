{
  final String configLocation=servletContext.getInitParameter(WebAppConstants.CONFIG_DIR_PARAM);
  final ResourceStreamSourceForWebInf rssWebInf=new ResourceStreamSourceForWebInf(servletContext);
  final ResourceStreamSourceContextLoaderClassPath rssContextLoaderClassPath=ResourceStreamSourceContextLoaderClassPath.create();
  final ResourceStreamSourceCurrentClassClassPath rssCurrentClassPath=new ResourceStreamSourceCurrentClassClassPath();
  final ResourceStreamSourceComposite compositeSource=new ResourceStreamSourceComposite(rssWebInf,rssContextLoaderClassPath,rssCurrentClassPath);
  if (configLocation != null) {
    LOG.info("Config override location: " + configLocation);
    compositeSource.addResourceStreamSource(ResourceStreamSourceFileSystem.create(configLocation));
  }
 else {
    LOG.info("Config override location: No override location configured!");
  }
  final IsisConfigurationBuilder configurationBuilder=new IsisConfigurationBuilderResourceStreams(compositeSource);
  primeConfigurationBuilder(configurationBuilder,servletContext);
  configurationBuilder.addDefaultConfigurationResources();
  IsisWebAppBootstrapperUtil.addConfigurationResourcesForViewers(configurationBuilder,servletContext);
  return configurationBuilder;
}
