{
  XStream xstream=new XStream();
  String requestData=xstream.toXML(request);
  String responseData=connection.request(requestData);
  Object fromXML=xstream.fromXML(responseData);
  if (fromXML instanceof NakedObjectRuntimeException) {
    throw (NakedObjectRuntimeException)fromXML;
  }
 else   if (fromXML instanceof Exception) {
    throw new NakedObjectsRemoteException("Exception occured on server",(Throwable)fromXML);
  }
 else {
    return (Response)fromXML;
  }
}
