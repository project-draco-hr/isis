{
  Thread t=new Thread("background task"){
    public void run(){
      view.getState().setActive();
      view.getViewManager().setBusy(view);
      repaint(view);
      try {
        task.execute();
      }
 catch (      Throwable e) {
        if (!(e instanceof NakedObjectApplicationException)) {
          String message="Error while running background task " + task.getName();
          LOG.error(message,e);
        }
        Naked error=NakedObjects.getObjectLoader().createAdapterForTransient(e);
        view.getWorkspace().addOpenViewFor(error,new Location(20,20));
      }
      view.getState().setInactive();
      view.getViewManager().clearBusy(view);
      repaint(view);
    }
  }
;
  t.start();
}
