{
  requestContext.setStatus(500);
  requestContext.setContentType("text/html");
  PrintWriter writer=requestContext.getWriter();
  DebugView errorView=new DebugView(writer,error);
  errorView.header();
  errorView.startTable();
  try {
    errorView.exception(exception);
    requestContext.append(errorView);
  }
 catch (  RuntimeException e) {
    errorView.exception(e);
  }
  errorView.divider("Processing");
  errorView.appendDebugTrace(requestContext.getDebugTrace());
  errorView.endTable();
  errorView.footer();
  writer.close();
  requestContext.clearTransientVariables();
}
