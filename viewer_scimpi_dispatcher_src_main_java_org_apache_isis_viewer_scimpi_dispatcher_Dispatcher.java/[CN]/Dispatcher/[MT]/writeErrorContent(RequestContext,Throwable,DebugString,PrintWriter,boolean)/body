{
  DebugBuilder errorView=new DebugTee(error,new DebugWriter(writer,includeHeader));
  try {
    errorView.appendException(exception);
    requestContext.append(errorView);
  }
 catch (  RuntimeException e) {
    errorView.appendln("NOTE - an exception occurred while dumping an exception!");
    errorView.appendException(e);
  }
  errorView.appendTitle("Processing");
  errorView.appendln("<pre>" + requestContext.getDebugTrace() + "</pre>");
  errorView.close();
  writer.close();
}
