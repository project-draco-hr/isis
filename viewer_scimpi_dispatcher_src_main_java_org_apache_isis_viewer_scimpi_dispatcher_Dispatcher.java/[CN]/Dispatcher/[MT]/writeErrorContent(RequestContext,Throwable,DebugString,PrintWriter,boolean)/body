{
  DebugView errorView=new DebugView(writer,error);
  if (includeHeader) {
    errorView.header();
  }
  errorView.startTable();
  errorView.divider("User");
  errorView.appendRow("Session",requestContext.getSession());
  errorView.appendRow("Name",requestContext.getSession().getUserName());
  errorView.appendRow("Roles",requestContext.getSession().getRoles());
  try {
    errorView.exception(exception);
    requestContext.append(errorView);
  }
 catch (  RuntimeException e) {
    errorView.exception(e);
  }
  errorView.divider("Processing");
  errorView.appendDebugTrace(requestContext.getDebugTrace());
  errorView.endTable();
  if (includeHeader) {
    errorView.footer();
  }
  writer.close();
}
