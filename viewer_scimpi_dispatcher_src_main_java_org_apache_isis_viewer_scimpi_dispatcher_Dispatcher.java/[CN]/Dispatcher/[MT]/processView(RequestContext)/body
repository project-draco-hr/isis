{
  String file=context.getRequestedFile();
  if (file == null) {
    LOG.warn("No view specified to process");
    return;
  }
  if (file.endsWith(COMMAND_ROOT)) {
    return;
  }
  file=determineFile(context,file);
  String fullPath=context.requestedFilePath(file);
  LOG.debug("processing file " + fullPath);
  context.setResourcePath(fullPath);
  context.setContentType("text/html");
  context.addVariable("title","Untitled Page",Scope.REQUEST);
  Stack<Snippet> tags=loadPageTemplate(context,fullPath);
  Request request=new Request(file,context,tags,processors);
  request.appendDebug("processing " + fullPath);
  try {
    request.processNextTag();
    noteIfMessagesHaveNotBeenDisplay(context);
    IsisContext.getUpdateNotifier().clear();
  }
 catch (  RuntimeException e) {
    IsisContext.getMessageBroker().getMessages();
    IsisContext.getMessageBroker().getWarnings();
    IsisContext.getUpdateNotifier().clear();
    throw e;
  }
  String page=request.popBuffer();
  context.getWriter().write(page);
  if (context.getDebug() == Debug.PAGE) {
    DebugView view=new DebugView(context.getWriter(),new DebugString());
    view.startTable();
    context.append(view);
    view.endTable();
  }
}
