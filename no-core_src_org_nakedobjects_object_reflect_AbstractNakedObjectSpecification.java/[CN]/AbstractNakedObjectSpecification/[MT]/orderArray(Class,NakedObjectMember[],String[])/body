{
  if (order == null) {
    return original;
  }
 else {
    for (int i=0; i < order.length; i++) {
      order[i]=NameConvertor.simpleName(order[i]);
    }
    NakedObjectMember[] ordered=(NakedObjectMember[])Array.newInstance(memberType,original.length);
    int orderedIndex=0;
    ordering:     for (int orderIndex=0; orderIndex < order.length; orderIndex++) {
      for (int memberIndex=0; memberIndex < original.length; memberIndex++) {
        NakedObjectMember member=original[memberIndex];
        if (member == null) {
          continue;
        }
        if (member.getId().equalsIgnoreCase(order[orderIndex])) {
          ordered[orderedIndex++]=original[memberIndex];
          original[memberIndex]=null;
          continue ordering;
        }
      }
      if (!order[orderIndex].trim().equals("")) {
        LOG.warn("invalid ordering element '" + order[orderIndex] + "' in "+ getClassName());
      }
    }
    NakedObjectMember[] results=(NakedObjectMember[])Array.newInstance(memberType,original.length);
    int index=0;
    for (int i=0; i < ordered.length; i++) {
      NakedObjectMember member=ordered[i];
      if (member != null) {
        results[index++]=member;
      }
    }
    for (int i=0; i < original.length; i++) {
      NakedObjectMember member=original[i];
      if (member != null) {
        results[index++]=member;
      }
    }
    return results;
  }
}
