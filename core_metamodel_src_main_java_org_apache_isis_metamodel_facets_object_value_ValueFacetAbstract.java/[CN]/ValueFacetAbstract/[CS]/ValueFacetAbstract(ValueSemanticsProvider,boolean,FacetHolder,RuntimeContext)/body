{
  super(type(),holder);
  this.semanticsProvider=semanticsProvider;
  this.runtimeContext=runtimeContext;
  if (!isValid() && !addFacetsIfInvalid) {
    return;
  }
  facetHolder.addFacet((Facet)this);
  final boolean immutable=semanticsProvider != null ? semanticsProvider.isImmutable() : true;
  if (immutable) {
    facetHolder.addFacet(new ImmutableFacetViaValueSemantics(holder));
  }
  final boolean equalByContent=semanticsProvider != null ? semanticsProvider.isEqualByContent() : true;
  if (equalByContent) {
    facetHolder.addFacet(new EqualByContentFacetViaValueSemantics(holder));
  }
  if (semanticsProvider != null) {
    final EncoderDecoder encoderDecoder=semanticsProvider.getEncoderDecoder();
    if (encoderDecoder != null) {
      facetHolder.addFacet(new EncodableFacetUsingEncoderDecoder(encoderDecoder,holder,getRuntimeContext()));
    }
    final Parser parser=semanticsProvider.getParser();
    if (parser != null) {
      facetHolder.addFacet(new ParseableFacetUsingParser(parser,holder,getRuntimeContext()));
      facetHolder.addFacet(new TitleFacetUsingParser(parser,holder,getRuntimeContext()));
      facetHolder.addFacet(new TypicalLengthFacetUsingParser(parser,holder,getRuntimeContext()));
    }
    final DefaultsProvider defaultsProvider=semanticsProvider.getDefaultsProvider();
    if (defaultsProvider != null) {
      facetHolder.addFacet(new DefaultedFacetUsingDefaultsProvider(defaultsProvider,holder,getRuntimeContext()));
    }
  }
}
