{
  final String configLocation=servletContext.getInitParameter(WebAppConstants.CONFIG_DIR_PARAM);
  final ResourceStreamSourceComposite compositeSource=new ResourceStreamSourceComposite(new ResourceStreamSourceForWebInf(servletContext),ResourceStreamSourceContextLoaderClassPath.create(),new ResourceStreamSourceCurrentClassClassPath());
  if (configLocation != null) {
    LOG.info("Config override location: " + configLocation);
    compositeSource.addResourceStreamSource(ResourceStreamSourceFileSystem.create(configLocation));
  }
 else {
    LOG.info("Config override location: No override location configured!");
  }
  final IsisConfigurationBuilder configurationBuilder=new IsisConfigurationBuilderResourceStreams(compositeSource);
  primeConfigurationBuilder(configurationBuilder,servletContext);
  configurationBuilder.addDefaultConfigurationResources();
  return configurationBuilder;
}
