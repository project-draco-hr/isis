{
  if (deploymentType != null) {
    return;
  }
  determiningDeploymentType=true;
  try {
    final IsisConfigurationBuilder isisConfigurationBuilder=createConfigBuilder();
    final IsisConfiguration configuration=isisConfigurationBuilder.getConfiguration();
    String deploymentTypeFromConfig=configuration.getString("isis.deploymentType");
    deploymentType=determineDeploymentType(deploymentTypeFromConfig);
  }
  finally {
    determiningDeploymentType=false;
  }
}
