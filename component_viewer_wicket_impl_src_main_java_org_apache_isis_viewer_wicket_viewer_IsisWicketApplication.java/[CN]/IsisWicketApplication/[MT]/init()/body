{
  try {
    super.init();
    final String webInfDir=getServletContext().getRealPath("/WEB-INF");
    loggingConfigurer.configureLogging(webInfDir,new String[0]);
    getRequestCycleSettings().setRenderStrategy(RenderStrategy.REDIRECT_TO_RENDER);
    getRequestCycleListeners().add(new WebRequestCycleForIsis());
    getResourceSettings().setParentFolderPlaceholder("$up$");
    determineDeploymentTypeIfRequired();
    final IsisConfigurationBuilder isisConfigurationBuilder=createConfigBuilder();
    final IsisInjectModule isisModule=newIsisModule(deploymentType,isisConfigurationBuilder);
    final Injector injector=Guice.createInjector(isisModule,newIsisWicketModule());
    injector.injectMembers(this);
    final IsisConfiguration configuration=isisConfigurationBuilder.getConfiguration();
    this.getMarkupSettings().setStripWicketTags(determineStripWicketTags(deploymentType,configuration));
    this.bookmarkedPagesModel=new BookmarkedPagesModel();
    initWicketComponentInjection(injector);
    buildCssBundle();
    setHeaderResponseDecorator(new IHeaderResponseDecorator(){
      @Override public IHeaderResponse decorate(      IHeaderResponse response){
        return new JavaScriptFilteredIntoFooterHeaderResponse(response,"footerJS");
      }
    }
);
    mountPage("/entity/${objectOid}",PageType.ENTITY);
    mountPage("/action/${objectOid}/${actionOwningSpec}/${actionId}/${actionType}/#{actionArgs}",PageType.ACTION_PROMPT);
  }
 catch (  RuntimeException ex) {
    LOG.error("Failed to initialize",ex);
    throw ex;
  }
}
