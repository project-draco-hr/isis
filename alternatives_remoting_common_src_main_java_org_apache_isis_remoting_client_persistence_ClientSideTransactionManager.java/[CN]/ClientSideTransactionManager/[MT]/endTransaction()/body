{
  ensureTransactionInProgress();
  if (LOG.isDebugEnabled()) {
    LOG.debug("endTransaction");
  }
  if (getTransaction().isEmpty()) {
    if (LOG.isDebugEnabled()) {
      LOG.debug("  no transaction commands to process");
    }
  }
 else {
    endNonEmptyTransaction();
  }
  getTransaction().commit();
}
