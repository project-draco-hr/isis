{
  final EntityModel model=getModel();
  final ObjectAdapter objectAdapter=model.getObject();
  final CssClassFacet facet=objectAdapter.getSpecification().getFacet(CssClassFacet.class);
  if (facet != null) {
    final String cssClass=facet.cssClass(objectAdapter);
    CssClassAppender.appendCssClassTo(this,cssClass);
  }
  final LayoutXmlFacet layoutXmlFacet=model.getTypeOfSpecification().getFacet(LayoutXmlFacet.class);
  final DomainObject domainObject=layoutXmlFacet.getLayoutMetadata();
  addOrReplace(ComponentType.ENTITY_SUMMARY,model);
  final List<TabGroup> tabGroups=domainObject.getTabGroups();
  final ListView<TabGroup> tabGroupsList=new ListView<TabGroup>(ID_TAB_GROUPS,tabGroups){
    @Override protected void populateItem(    final ListItem<TabGroup> item){
      final List<ITab> tabs=Lists.newArrayList();
      final TabGroup tabGroup=item.getModelObject();
      final List<Tab> tabList=tabGroup.getTabs();
      for (      final Tab tab : tabList) {
        tabs.add(new AbstractTab(Model.of(tab.getName())){
          private static final long serialVersionUID=1L;
          @Override public Panel getPanel(          String panelId){
            return new EntityTabPanel(panelId,model,tab);
          }
        }
);
      }
      item.add(new AjaxBootstrapTabbedPanel(ID_TAB_GROUP,tabs));
    }
  }
;
  add(tabGroupsList);
}
