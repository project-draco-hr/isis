{
  while (!done) {
    try {
      Socket newClient=serverSocket.accept();
      PrintWriter pw=new PrintWriter(newClient.getOutputStream());
      if (connections.size() < MAX_CONNECTIONS) {
        connections.addElement(newClient);
        writers.addElement(pw);
        pw.print("TelnetAppender v1.0 (" + connections.size() + " active connections)\r\n\r\n");
        pw.flush();
      }
 else {
        pw.print("Too many connections.\r\n");
        pw.flush();
        newClient.close();
      }
    }
 catch (    Exception e) {
      LogLog.error("Encountered error while in SocketHandler loop.",e);
    }
  }
}
