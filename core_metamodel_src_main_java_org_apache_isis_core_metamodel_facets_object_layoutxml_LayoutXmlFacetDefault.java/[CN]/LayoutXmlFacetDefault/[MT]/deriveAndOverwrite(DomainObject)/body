{
synchronized (metadata) {
    doDeriveAndOverwrite(metadata);
    derived=true;
  }
  return metadata;
}
