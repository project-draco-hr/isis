{
synchronized (metadata) {
    doDeriveAndSync(metadata);
    derivedAndSynced=true;
  }
  return metadata;
}
