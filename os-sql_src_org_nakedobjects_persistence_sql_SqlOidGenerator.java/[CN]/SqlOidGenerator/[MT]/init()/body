{
  DatabaseConnector db=connectionPool.acquire();
  try {
    db.begin();
    if (!db.hasTable("no_serial_id")) {
      db.update("create table \"no_serial_id\" (\"number\" INTEGER)");
      db.update("insert into \"no_serial_id\" values (1)");
    }
    Results rs=db.select("select \"number\" from \"no_serial_id\"");
    rs.next();
    number=rs.getLong("number");
    rs.close();
    db.commit();
  }
 catch (  ObjectPerstsistenceException e) {
    db.rollback();
    throw new NakedObjectRuntimeException(e);
  }
 finally {
    connectionPool.release(db);
  }
}
