{
  JsonRepresentation entity;
  try {
    entity=getEntity();
  }
 catch (  Exception e) {
    Step previousStep=previousStep();
    previousStep.error="exception: " + e.getMessage();
    previousStep.exception=e;
    return;
  }
  if (entity == null) {
    return;
  }
  JsonRepresentation matching;
  try {
    matching=entity.xpath(linkXpath);
  }
 catch (  Exception e) {
    addStep(linkXpath,null,null,null,"exception: " + e.getMessage(),e);
    return;
  }
  if (matching == null) {
    addStep(linkXpath,null,null,null,"no such link '" + linkXpath + "'",null);
    return;
  }
  Link link=matching.asLink();
  if (link.getHref() == null) {
    addStep(linkXpath,link,null,null,"key does not identify a link '" + linkXpath + "'",null);
    return;
  }
  Response response;
  try {
    response=restfulClient.follow(link);
  }
 catch (  Exception e) {
    addStep(linkXpath,link,null,null,"failed to follow link: " + e.getMessage(),e);
    return;
  }
  addStep(linkXpath,link,null,JsonResponse.of(response,JsonRepresentation.class),null,null);
}
