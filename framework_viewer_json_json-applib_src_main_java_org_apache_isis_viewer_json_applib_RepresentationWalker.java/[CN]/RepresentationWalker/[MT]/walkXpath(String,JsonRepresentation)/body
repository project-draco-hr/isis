{
  JsonRepresentation entity=getEntityElseMarkStepInError();
  if (entity == null) {
    return;
  }
  Link link=null;
  try {
    JsonRepresentation matching=entity.xpath(linkXpath);
    if (matching == null) {
      addStep(linkXpath,null,null,null,"no such link '" + linkXpath + "'",null);
      return;
    }
    link=matching.asLink();
    if (link.getHref() == null) {
      addStep(linkXpath,link,null,null,"key does not identify a link '" + linkXpath + "'",null);
      return;
    }
    Response response;
    if (invokeBody != null) {
      response=restfulClient.follow(link,invokeBody);
    }
 else {
      response=restfulClient.follow(link);
    }
    addStep(linkXpath,link,null,JsonResponse.of(response,JsonRepresentation.class),null,null);
  }
 catch (  RuntimeException e) {
    addStep(linkXpath,null,null,null,"exception: " + e.getMessage(),e);
    return;
  }
catch (  Exception e) {
    addStep(linkXpath,link,null,null,"failed to follow link: " + e.getMessage(),e);
    return;
  }
}
