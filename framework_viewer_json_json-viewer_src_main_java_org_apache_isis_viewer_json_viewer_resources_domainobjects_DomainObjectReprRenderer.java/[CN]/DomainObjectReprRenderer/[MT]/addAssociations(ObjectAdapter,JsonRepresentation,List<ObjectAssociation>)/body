{
  for (  ObjectAssociation assoc : associations) {
    final LinkFollower follow=getLinkFollower().follow("members");
    Consent visibility=assoc.isVisible(getSession(),objectAdapter);
    if (!visibility.isAllowed()) {
      continue;
    }
    if (assoc instanceof OneToOneAssociation) {
      OneToOneAssociation property=(OneToOneAssociation)assoc;
      RendererFactory factory=RendererFactoryRegistry.instance.find(RepresentationType.OBJECT_PROPERTY);
      final ObjectPropertyReprRenderer renderer=(ObjectPropertyReprRenderer)factory.newRenderer(getResourceContext(),null,JsonRepresentation.newMap());
      renderer.with(new ObjectAndProperty(objectAdapter,property)).usingLinkToBuilder(linkToBuilder).withDetailsLink();
      members.arrayAdd(renderer.render());
    }
    if (assoc instanceof OneToManyAssociation) {
      OneToManyAssociation collection=(OneToManyAssociation)assoc;
      RendererFactory factory=RendererFactoryRegistry.instance.find(RepresentationType.OBJECT_COLLECTION);
      final ObjectCollectionReprRenderer renderer=(ObjectCollectionReprRenderer)factory.newRenderer(getResourceContext(),null,JsonRepresentation.newMap());
      renderer.with(new ObjectAndCollection(objectAdapter,collection)).usingLinkToBuilder(linkToBuilder).withDetailsLink();
      members.arrayAdd(renderer.render());
    }
  }
}
