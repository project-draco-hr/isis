{
  Configuration configuration=new Configuration(new ConfigurationPropertiesLoader(CLIENT_CONFIG,true));
  nakedObjects.setConfiguration(configuration);
  PipedClient client=new PipedClient();
  client.setConnection(connection);
  Date.setClock(new SystemClock());
  JavaBusinessObjectContainer container=new JavaBusinessObjectContainer();
  JavaObjectFactory objectFactory=new JavaObjectFactory();
  objectFactory.setContainer(container);
  container.setObjectFactory(objectFactory);
  JavaObjectDataFactory objectDataFactory=new JavaObjectDataFactory();
  ProxyObjectManager proxyObjectManager=new ProxyObjectManager();
  proxyObjectManager.setObjectFactory(objectFactory);
  proxyObjectManager.setConnection(client);
  proxyObjectManager.setObjectDataFactory(objectDataFactory);
  NakedObjectManager objectManager=new ObjectManagerLogger(proxyObjectManager,"manager");
  nakedObjects.setObjectManager(objectManager);
  new NakedObjectSpecificationLoaderImpl();
  ProxyReflectionFactory reflectionFactory=new ProxyReflectionFactory();
  reflectionFactory.setConnection(client);
  reflectionFactory.setObjectDataFactory(objectDataFactory);
  JavaReflectorFactory reflectorFactory=new JavaReflectorFactory();
  PojoAdapterFactoryImpl pojoAdapterFactory=new PojoAdapterFactoryImpl();
  pojoAdapterFactory.setPojoAdapterHash(new PojoAdapterHashImpl());
  pojoAdapterFactory.setReflectorFactory(reflectorFactory);
  nakedObjects.setPojoAdapterFactory(pojoAdapterFactory);
  nakedObjects.setReflectionFactory(reflectionFactory);
  NakedObjectSpecificationLoaderImpl specificationLoader=new NakedObjectSpecificationLoaderImpl();
  nakedObjects.setReflectorFactory(reflectorFactory);
  nakedObjects.setSpecificationLoader(specificationLoader);
  reflectorFactory.setObjectFactory(objectFactory);
  ViewUpdateNotifier updateNotifier=new ViewUpdateNotifier();
  proxyObjectManager.setUpdateNotifier(updateNotifier);
  client.setUpdateNotifier(updateNotifier);
  SkylarkViewer skylark=new SkylarkViewer();
  skylark.setUpdateNotifier(updateNotifier);
  skylark.setShutdownListener(new ObjectViewingMechanismListener(){
    public void viewerClosing(){
      System.exit(0);
    }
  }
);
  skylark.setApplication(new Context());
  skylark.setExploration(true);
  skylark.init();
}
