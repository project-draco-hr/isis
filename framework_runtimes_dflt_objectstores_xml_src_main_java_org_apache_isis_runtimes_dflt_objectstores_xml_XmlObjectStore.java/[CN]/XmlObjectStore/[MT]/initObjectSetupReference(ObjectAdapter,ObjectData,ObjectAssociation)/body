{
  final RootOidDefault referenceOid=(RootOidDefault)data.get(field.getId());
  if (LOG.isDebugEnabled()) {
    LOG.debug("setting up field " + field + " with "+ referenceOid);
  }
  if (referenceOid == null) {
    return;
  }
  final Data fieldData=dataManager.loadData(referenceOid);
  if (fieldData == null) {
    ObjectSpecification spec=field.getSpecification();
    final Object recreatedPojo=spec.createObject();
    final ObjectAdapter adapter=getAdapterManager().mapRecreatedPojo(referenceOid,recreatedPojo);
    if (!adapter.isDestroyed()) {
      adapter.changeState(ResolveState.DESTROYED);
    }
    ((OneToOneAssociation)field).initAssociation(object,adapter);
    LOG.warn("No data found for " + referenceOid + " so field '"+ field.getName()+ "' not set in object '"+ object.titleString()+ "'");
  }
 else {
    ObjectSpecification spec=specFor(fieldData);
    final Object recreatedPojo=spec.createObject();
    final ObjectAdapter reference=getAdapterManager().mapRecreatedPojo(referenceOid,recreatedPojo);
    ((OneToOneAssociation)field).initAssociation(object,reference);
  }
}
