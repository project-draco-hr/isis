{
  String xpathExpression=String.format(xpathTemplate,args);
  try {
    final StringReader xmlStream=new StringReader(toXml());
    final SAXBuilder saxBuilder=new SAXBuilder();
    org.jdom.Document jdomDoc=saxBuilder.build(xmlStream);
    String prefix=jsonNode.isArray() ? "a" : "o";
    XPath xpath=XPath.newInstance("/" + prefix + xpathExpression);
    @SuppressWarnings("unchecked") List<Element> matchingElements=xpath.selectNodes(jdomDoc);
    org.jdom.Document doc=new org.jdom.Document(new org.jdom.Element(prefix));
    for (    Element el : matchingElements) {
      el.detach();
      doc.getRootElement().addContent(el);
    }
    JsonRepresentation matchedRepresentation=asJsonRepresentation(doc);
    if (matchedRepresentation == null) {
      return null;
    }
    return matchedRepresentation;
  }
 catch (  JDOMException e) {
    throw new RuntimeException(e);
  }
catch (  IOException e) {
    throw new RuntimeException(e);
  }
}
