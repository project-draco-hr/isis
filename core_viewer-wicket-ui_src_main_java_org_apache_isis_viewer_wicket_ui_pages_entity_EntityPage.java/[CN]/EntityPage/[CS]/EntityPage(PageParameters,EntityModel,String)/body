{
  super(pageParameters,titleString,ComponentType.ENTITY);
  this.model=entityModel;
  final ObjectAdapter objectAdapter;
  try {
    objectAdapter=entityModel.getObject();
  }
 catch (  final RuntimeException ex) {
    removeAnyBookmark(model);
    removeAnyBreadcrumb(model);
    throw new ObjectMember.AuthorizationException(ex);
  }
  if (!ObjectAdapter.Util.isVisible(objectAdapter,InteractionInitiatedBy.USER)) {
    throw new ObjectMember.AuthorizationException();
  }
  final ObjectLayoutMetadataFacet facet=entityModel.getTypeOfSpecification().getFacet(ObjectLayoutMetadataFacet.class);
  if (facet != null) {
    final FCPage metadata=facet.getMetadata();
    if (metadata == null && !getDeploymentType().isProduction()) {
      getSpecificationLoader().invalidateCacheFor(objectAdapter.getObject());
    }
  }
  if (titleString == null) {
    final String titleStr=objectAdapter.titleString(null);
    setTitle(titleStr);
  }
  WebMarkupContainer entityPageContainer=new WebMarkupContainer("entityPageContainer");
  entityPageContainer.add(new CssClassAppender(new AbstractReadOnlyModel<String>(){
    @Override public String getObject(){
      ObjectAdapter adapter=entityModel.getObject();
      return adapter.getObject().getClass().getSimpleName();
    }
  }
));
  themeDiv.addOrReplace(entityPageContainer);
  addChildComponents(entityPageContainer,model);
  bookmarkPage(model);
  addBreadcrumb(entityModel);
  addBookmarkedPages(entityPageContainer);
  send(this,Broadcast.BREADTH,new IsisUiHintEvent(entityModel,null));
}
