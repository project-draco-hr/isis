{
  converterFactory=ConverterFactory.getInstance();
  final IsisConfiguration config=IsisContext.getConfiguration();
  listType=config.getString(HibernateConstants.PROPERTY_PREFIX + "list","bag");
  collections=config.getString(HibernateConstants.PROPERTY_PREFIX + "collections","many");
  defaultAssociationFieldAccess=config.getBoolean(HibernateConstants.PROPERTY_PREFIX + "associationFieldAccess",false);
  defaultValueFieldAccess=config.getBoolean(HibernateConstants.PROPERTY_PREFIX + "valueFieldAccess",false);
  versionProperty=config.getString(HibernateConstants.PROPERTY_PREFIX + "version");
  modifiedByProperty=config.getString(HibernateConstants.PROPERTY_PREFIX + "modified_by");
  modifiedOnProperty=config.getString(HibernateConstants.PROPERTY_PREFIX + "modified_on");
  versionAccess=config.getString(HibernateConstants.PROPERTY_PREFIX + "version.access");
  modifiedByAccess=config.getString(HibernateConstants.PROPERTY_PREFIX + "modified_by.access");
  modifiedOnAccess=config.getString(HibernateConstants.PROPERTY_PREFIX + "modified_on.access");
  fieldPrefix=config.getString(HibernateConstants.PROPERTY_PREFIX + "fieldPrefix","");
  columnNames=config.getProperties(COLUMN_PROPERTY_PREFIX);
  reservedNameSuffixes[colType]=config.getString(RESERVED_COL_SUFFIX,reservedNameSuffixes[colType]);
  reservedNameSuffixes[tabType]=config.getString(RESERVED_TAB_SUFFIX,reservedNameSuffixes[tabType]);
  exportDirectory=config.getString(HibernateConstants.PROPERTY_PREFIX + "hbm-export",new File(".").getAbsolutePath() + FILE_SEPERATOR + HibernateUtil.MAPPING_DIR);
  MappingHelper.loadRequiredClasses();
  persistentClasses=PersistentSpecifications.buildPersistentSpecifications(null);
  String name=Date.class.getName();
  int pos=name.lastIndexOf('.') + 1;
  applibPrefix=name.substring(0,pos);
  name=DateType.class.getName();
  pos=name.lastIndexOf('.') + 1;
  applibReplacementPrefix=name.substring(0,pos);
  LOG.debug("mapping tree:" + persistentClasses.debugString());
}
