{
  String type;
  if (returnType.equals(List.class)) {
    type=listType;
  }
 else   if (returnType.equals(Set.class) || returnType.equals(SortedSet.class)) {
    type="set";
  }
 else   if (returnType.equals(Map.class) || returnType.equals(SortedMap.class)) {
    type="map";
  }
 else   if (returnType.isArray()) {
    type=listType;
  }
 else   if (returnType.equals(Vector.class)) {
    type=listType;
  }
 else {
    throw new IsisException("Unsupported collection type " + returnType.getName());
  }
  return type;
}
