{
  if (user != null) {
    NakedObjectSpecification cls=NakedObjectSpecification.getNakedClass(User.class.getName());
    InstanceCollection coll=objectManager.findInstances(cls,user);
    if (coll.size() == 0) {
      throw new NakedObjectRuntimeException("No user " + user);
    }
    User user=(User)coll.elements().nextElement();
    Session.getSession().getContext().setUser(user);
  }
}
