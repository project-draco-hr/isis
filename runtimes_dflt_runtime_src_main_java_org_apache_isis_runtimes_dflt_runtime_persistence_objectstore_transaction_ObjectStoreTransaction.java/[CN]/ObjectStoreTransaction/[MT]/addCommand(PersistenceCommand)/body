{
  if (command == null) {
    return;
  }
  final ObjectAdapter onObject=command.onObject();
  if (command instanceof SaveObjectCommand) {
    if (alreadyHasCreate(onObject) || alreadyHasSave(onObject)) {
      if (LOG.isDebugEnabled()) {
        LOG.debug("ignored command as object already created/saved" + command);
      }
      return;
    }
    if (alreadyHasDestroy(onObject)) {
      if (LOG.isInfoEnabled()) {
        LOG.info("ignored command " + command + " as object no longer exists");
      }
      return;
    }
  }
  if (command instanceof DestroyObjectCommand) {
    if (alreadyHasCreate(onObject)) {
      removeCreate(onObject);
      if (LOG.isInfoEnabled()) {
        LOG.info("ignored both create and destroy command " + command);
      }
      return;
    }
    if (alreadyHasSave(onObject)) {
      removeSave(onObject);
      if (LOG.isInfoEnabled()) {
        LOG.info("removed prior save command " + command);
      }
    }
    if (alreadyHasDestroy(onObject)) {
      if (LOG.isInfoEnabled()) {
        LOG.info("ignored command " + command + " as command already recorded");
      }
      return;
    }
  }
  if (LOG.isDebugEnabled()) {
    LOG.debug("add command " + command);
  }
  commands.add(command);
}
