{
  super(deploymentType,installerLookup);
  this.testClass=testClass;
  setAuthenticationInstaller(getInstallerLookup().injectDependenciesInto(new NoopAuthenticationManagerInstaller()));
  setAuthorizationInstaller(getInstallerLookup().injectDependenciesInto(new NoopAuthorizationManagerInstaller()));
  setPersistenceMechanismInstaller(getInstallerLookup().injectDependenciesInto(new InMemoryPersistenceMechanismInstallerWithinJunit()));
  setUserProfileStoreInstaller(getInstallerLookup().injectDependenciesInto(new InMemoryUserProfileStoreInstaller()));
  final FixtureInstallerAnnotatedClass fixtureInstaller=new FixtureInstallerAnnotatedClass();
  try {
    fixtureInstaller.addFixturesAnnotatedOn(this.testClass.getJavaClass());
  }
 catch (  final InstantiationException e) {
    throw new IsisException(e);
  }
catch (  final IllegalAccessException e) {
    throw new IsisException(e);
  }
  setFixtureInstaller(fixtureInstaller);
  final ServicesInstallerAnnotatedClass servicesInstaller=new ServicesInstallerAnnotatedClass();
  try {
    servicesInstaller.addServicesAnnotatedOn(this.testClass.getJavaClass());
  }
 catch (  final InstantiationException e) {
    throw new IsisException(e);
  }
catch (  final IllegalAccessException e) {
    throw new IsisException(e);
  }
  setServicesInstaller(servicesInstaller);
}
