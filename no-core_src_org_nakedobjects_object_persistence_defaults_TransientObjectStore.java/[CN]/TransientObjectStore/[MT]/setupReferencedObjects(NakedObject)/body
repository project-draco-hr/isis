{
  NakedObjectField[] fields=object.getFields();
  for (int i=0; i < fields.length; i++) {
    NakedObjectField field=fields[i];
    if (field.isCollection()) {
      NakedCollection col=(NakedCollection)object.getField(field);
      for (Enumeration e=col.elements(); e.hasMoreElements(); ) {
        NakedObject element=(NakedObject)e.nextElement();
        setupReference(element);
      }
    }
 else     if (field.isObject()) {
      NakedObject fieldContent=(NakedObject)object.getField(field);
      setupReference(fieldContent);
    }
  }
}
