{
  final StringBuffer testInputField=new StringBuffer();
  testInputField.append("<select class=\"value\" name=\"" + fieldId + "\">");
  if (!required) {
    testInputField.append("<option");
    if (selectedIndex < 0) {
      testInputField.append(" selected");
    }
    testInputField.append(" value=\"");
    testInputField.append("null");
    testInputField.append("\" >[not set]</option>");
  }
  for (int i=0; i < instances.length; i++) {
    testInputField.append("<option");
    if (i == selectedIndex) {
      testInputField.append(" selected");
    }
    testInputField.append(" value=\"");
    testInputField.append(ids[i]);
    testInputField.append("\" >");
    testInputField.append(instances[i]);
    testInputField.append("</option>");
  }
  testInputField.append("</select>");
  addField(fieldLabel,testInputField.toString(),description,false,required,errorMessage);
}
