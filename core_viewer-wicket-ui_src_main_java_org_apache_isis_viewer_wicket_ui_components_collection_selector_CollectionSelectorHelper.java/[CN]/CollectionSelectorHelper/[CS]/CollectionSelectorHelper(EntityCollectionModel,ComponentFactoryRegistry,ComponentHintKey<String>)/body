{
  this.model=model;
  this.componentFactories=locateComponentFactories(componentFactoryRegistry);
  this.selectedItemSessionAttribute=selectedItemSessionAttribute != null ? selectedItemSessionAttribute : ComponentHintKey.<String>noop();
  final EntityModel entityModel=model.getEntityModel();
  if (entityModel != null) {
    entityModel.putSessionAttribute(this.selectedItemSessionAttribute);
  }
}
