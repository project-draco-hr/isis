{
  final RequestContext context=request.getContext();
  final String objectId=request.getOptionalProperty(OBJECT);
  final ObjectAdapter object=MethodsUtils.findObject(context,objectId);
  final String methodName=request.getRequiredProperty(METHOD);
  final ObjectAction action=MethodsUtils.findAction(object,methodName);
  final String variableName=request.getOptionalProperty(RESULT_NAME);
  final String scopeName=request.getOptionalProperty(SCOPE);
  final ActionContent parameterBlock=new ActionContent(action);
  request.setBlockContent(parameterBlock);
  request.processUtilCloseTag();
  final ObjectAdapter[] parameters=parameterBlock.getParameters(request);
  if (!MethodsUtils.isVisibleAndUsable(object,action)) {
    throw new ForbiddenException(action,ForbiddenException.VISIBLE_AND_USABLE);
  }
  if (action.isContributed()) {
    final List<ObjectActionParameter> parameterSpecs=action.getParameters();
    for (int i=0; i < parameters.length; i++) {
      if (parameters[i] == null && object.getSpecification().isOfType(parameterSpecs.get(i).getSpecification())) {
        parameters[i]=object;
        break;
      }
    }
  }
  final Scope scope=RequestContext.scope(scopeName,Scope.REQUEST);
  MethodsUtils.runMethod(context,action,object,parameters,variableName,scope);
  request.popBlockContent();
}
