{
  Thread transactionId=getTransactionId();
  for (  FileContent item : list) {
    if (!locks.acquireWrite(item.id,transactionId)) {
      return item.type + " being changed by another user, please try again\n" + item.data;
    }
    if (Util.shouldFileExist(item.command)) {
      DataReader dataReader=new DataReader(item.type,item.id);
      String version=dataReader.getVersion();
      if (!version.equals(item.currentVersion)) {
        dataReader.close();
        return "mismatch between FileContent version (" + item.currentVersion + ") and DataReader version ("+ version+ ")";
      }
      dataReader.close();
    }
  }
  return null;
}
