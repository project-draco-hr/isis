{
  LOG.info("persist " + collection);
  if (collection.getResolveState() == ResolveState.TRANSIENT) {
    collection.changeState(ResolveState.RESOLVED);
  }
  final CollectionFacet facet=CollectionFacetUtils.getCollectionFacetFromSpec(collection);
  for (  ObjectAdapter element : facet.iterable(collection)) {
    makePersistent(element,toPersistObjectSet);
  }
}
