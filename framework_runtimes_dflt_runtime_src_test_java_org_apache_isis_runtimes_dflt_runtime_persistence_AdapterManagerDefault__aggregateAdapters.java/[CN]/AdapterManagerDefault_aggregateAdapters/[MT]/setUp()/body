{
  Logger.getRootLogger().setLevel(Level.OFF);
  context.ignoring(mockRuntimeContext);
  isisMetaModel=IsisMetaModel.builder(mockRuntimeContext,new ProgrammingModelFacetsJava5()).withServices(new CustomerRepository()).build();
  isisMetaModel.init();
  adapterManager=new AdapterManagerDefault();
  adapterFactory=new PojoAdapterFactory(){
    @Override protected Localization getLocalization(){
      return mockLocalization;
    }
    @Override protected SpecificationLoader getSpecificationLoader(){
      return isisMetaModel.getSpecificationLoader();
    }
    @Override protected ObjectAdapterLookup getObjectAdapterLookup(){
      return adapterManager;
    }
  }
;
  adapterManager.setPojoAdapterMap(new PojoAdapterHashMap());
  adapterManager.setOidAdapterMap(new OidAdapterHashMap());
  adapterManager.setAdapterFactory(adapterFactory);
  adapterManager.setDependencyInjector(isisMetaModel.getDependencyInjector());
  adapterManager.setSpecificationLoader(isisMetaModel.getSpecificationLoader());
  adapterManager.setOidGenerator(mockOidGenerator);
  rootObject=new Customer();
  aggregatedObject=new Name();
  persistentParentAdapter=adapterManager.recreateAdapter(RootOidDefault.create("CUS","1"),rootObject);
}
