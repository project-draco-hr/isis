{
  final ObjectSpecification specification=specMemento.getSpecification();
  final EncodableFacet encodableFacet=specification.getFacet(EncodableFacet.class);
  final boolean isEncodable=encodableFacet != null;
  if (isEncodable) {
    encodableValue=encodableFacet.toEncodedString(adapter);
    type=Type.ENCODEABLE;
  }
 else {
    final Oid oid=adapter.getOid();
    if (oid.isTransient()) {
      transientMemento=new Memento(adapter);
      type=Type.TRANSIENT;
    }
 else {
      persistentOid=oid;
      type=Type.PERSISTENT;
    }
  }
}
