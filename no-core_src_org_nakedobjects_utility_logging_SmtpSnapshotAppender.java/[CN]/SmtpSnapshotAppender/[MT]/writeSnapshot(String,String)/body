{
  try {
    Assert.assertNotNull("server",server);
    Assert.assertNotNull("recipient",recipient);
    Socket s=new Socket(server,port);
    BufferedReader in=new BufferedReader(new InputStreamReader(s.getInputStream(),"8859_1"));
    BufferedWriter out=new BufferedWriter(new OutputStreamWriter(s.getOutputStream(),"8859_1"));
    send(in,out,"HELO " + senderDomain);
    send(in,out,"MAIL FROM: <no-reply@nakedobjects.org>");
    send(in,out,"RCPT TO: " + recipient);
    send(in,out,"DATA");
    send(out,"Subject: " + message);
    send(out,"From: Autosend");
    send(out,"\r\n");
    send(out,details);
    send(out,"\r\n.\r\n");
    send(in,out,"QUIT");
    s.close();
  }
 catch (  Exception e) {
    LOG.info("failed to send email with log",e);
  }
}
