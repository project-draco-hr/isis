{
  if (object != null) {
    if (tagName.equals("value")) {
      fieldName=attrs.getValue("field");
      data.setLength(0);
    }
 else     if (tagName.equals("association")) {
      String fieldName=attrs.getValue("field");
      long id=Long.valueOf(attrs.getValue("ref"),16).longValue();
      object.set(fieldName,new SerialOid(id));
    }
 else     if (tagName.equals("element")) {
      long id=Long.valueOf(attrs.getValue("ref"),16).longValue();
      object.addElement(fieldName,new SerialOid(id));
    }
 else     if (tagName.equals("multiple-association")) {
      fieldName=attrs.getValue("field");
      SerialOid internalCollection=null;
      object.initCollection(internalCollection,fieldName);
    }
  }
 else   if (collection != null) {
    if (tagName.equals("element")) {
      long id=Long.valueOf(attrs.getValue("ref"),16).longValue();
      collection.addElement(new SerialOid(id));
    }
  }
 else {
    if (tagName.equals("naked-object")) {
      String type=attrs.getValue("type");
      long id=Long.valueOf(attrs.getValue("id"),16).longValue();
      object=new ObjectData(NakedObjects.getSpecificationLoader().loadSpecification(type),new SerialOid(id));
    }
 else     if (tagName.equals("collection")) {
      String type=attrs.getValue("type");
      long id=Long.valueOf(attrs.getValue("id"),16).longValue();
      collection=new CollectionData(NakedObjects.getSpecificationLoader().loadSpecification(type),new SerialOid(id));
    }
 else {
      throw new SAXException("Invalid data");
    }
  }
}
