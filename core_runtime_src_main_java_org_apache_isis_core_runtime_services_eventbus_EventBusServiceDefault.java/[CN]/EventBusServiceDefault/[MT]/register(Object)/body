{
  if (domainService instanceof RequestScopedService) {
  }
 else {
    if (Annotations.getAnnotation(domainService.getClass(),RequestScoped.class) != null) {
      throw new IllegalArgumentException("Request-scoped services must register their proxy, not themselves");
    }
    if (!allowLateRegistration && hasPosted()) {
      throw new IllegalStateException("Events have already been posted; too late to register any further (singleton) subscribers");
    }
  }
  super.register(domainService);
}
