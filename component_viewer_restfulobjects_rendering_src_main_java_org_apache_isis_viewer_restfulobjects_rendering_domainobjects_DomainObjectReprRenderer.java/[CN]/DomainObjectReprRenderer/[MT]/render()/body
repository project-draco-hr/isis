{
  if (!mode.representsArguments()) {
    if (objectAdapter.representsPersistent()) {
      if (includesSelf) {
        addLinkToSelf();
      }
      getExtensions().mapPut("oid",getOidStr());
    }
  }
  if (!mode.representsArguments()) {
    final String title=objectAdapter.titleString();
    representation.mapPut("title",title);
  }
  if (!mode.representsArguments()) {
    final boolean isService=objectAdapter.getSpecification().isService();
    if (isService) {
      representation.mapPut("serviceId",ServiceUtil.id(objectAdapter.getObject()));
    }
  }
  withMembers(objectAdapter);
  if (mode.includesDescribedBy()) {
    addLinkToDescribedBy();
  }
  if (!mode.representsArguments()) {
    addPersistLinkIfTransientAndPersistable();
    addUpdatePropertiesLinkIfPersistentAndNotService();
    final boolean isService=objectAdapter.getSpecification().isService();
    getExtensions().mapPut("isService",isService);
    getExtensions().mapPut("isPersistent",objectAdapter.representsPersistent());
  }
  return representation;
}
