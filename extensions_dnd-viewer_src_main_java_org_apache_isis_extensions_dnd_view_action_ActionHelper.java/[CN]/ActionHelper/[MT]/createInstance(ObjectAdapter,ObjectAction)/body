{
  final int numberParameters=action.getParameterCount();
  final ObjectAdapter[] parameters=new ObjectAdapter[numberParameters];
  final ObjectActionParameter[] parameterSpecs=action.getParameters();
  ObjectAdapter[] defaultValues;
  ObjectAdapter[][] options;
  defaultValues=new ObjectAdapter[parameterSpecs.length];
  options=new ObjectAdapter[parameterSpecs.length][];
  for (int i=0; i < parameterSpecs.length; i++) {
    defaultValues[i]=parameterSpecs[i].getDefault(target);
    options[i]=parameterSpecs[i].getChoices(target);
  }
  if (!hasValues(defaultValues) && !hasValues(options)) {
    defaultValues=action.getDefaults(target);
    options=action.getChoices(target);
  }
  for (int i=0; i < parameterSpecs.length; i++) {
    if (defaultValues[i] != null) {
      parameters[i]=defaultValues[i];
    }
 else {
      parameters[i]=null;
    }
  }
  return new ActionHelper(target,action,parameters,defaultValues,options);
}
