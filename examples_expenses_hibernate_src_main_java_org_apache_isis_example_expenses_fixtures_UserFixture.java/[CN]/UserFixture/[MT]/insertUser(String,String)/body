{
  try {
    final int nextId=getNextId("user");
    HibernateUtil.startTransaction();
    final SQLQuery sq=HibernateUtil.getCurrentSession().createSQLQuery(SQL[INSERT_USER]);
    sq.setInteger(0,nextId);
    sq.setString(1,username);
    sq.setString(2,databaseAuthenticator.generateHash(password));
    sq.setBoolean(3,false);
    sq.executeUpdate();
    HibernateUtil.commitTransaction();
  }
 catch (  final Exception e) {
    HibernateUtil.rollbackTransaction();
  }
}
