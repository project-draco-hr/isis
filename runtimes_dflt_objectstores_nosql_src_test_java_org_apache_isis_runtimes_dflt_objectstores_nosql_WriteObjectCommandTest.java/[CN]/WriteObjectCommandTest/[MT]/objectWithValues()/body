{
  context.checking(new Expectations(){
{
      one(commandContext).createStateWriter(specification.getFullIdentifier());
      will(returnValue(writer));
      one(keyCreator).key(SerialOid.createPersistent(3));
      will(returnValue("3"));
      one(writer).writeId("3");
      one(writer).writeType(specification.getFullIdentifier());
      one(writer).writeField("name","Fred Smith");
      one(writer).writeField("size","108");
      one(writer).writeField("nullable",null);
      one(writer).writeVersion(null,"2");
      one(writer).writeUser("username");
      one(writer).writeTime("1057");
      one(commandContext).insert(writer);
    }
  }
);
  new WriteObjectCommand(false,keyCreator,versionCreator,object1).execute(commandContext);
  context.assertIsSatisfied();
}
