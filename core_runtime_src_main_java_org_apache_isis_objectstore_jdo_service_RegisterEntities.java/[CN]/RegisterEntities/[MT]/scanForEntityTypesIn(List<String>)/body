{
  final Set<String> entityTypes=Sets.newLinkedHashSet();
  for (  final String packageName : domPackages) {
    Reflections reflections=new Reflections(packageName);
    final Set<Class<?>> entityTypesInPackage=reflections.getTypesAnnotatedWith(PersistenceCapable.class);
    if (!entitiesIn(entityTypesInPackage)) {
      throw new IllegalArgumentException(String.format("Bad configuration.\n\nCould not locate any @PersistenceCapable entities in package '%s'\n" + "Check value of '%s' key in isis.properties etc.\n",packageName,PACKAGE_PREFIX_KEY));
    }
    for (    Class<?> entityType : entityTypesInPackage) {
      if (ignore(entityType)) {
        continue;
      }
      entityTypes.add(entityType.getCanonicalName());
    }
  }
  return entityTypes;
}
