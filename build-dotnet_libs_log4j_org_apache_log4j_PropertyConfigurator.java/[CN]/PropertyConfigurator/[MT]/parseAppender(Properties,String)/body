{
  Appender appender=registryGet(appenderName);
  if ((appender != null)) {
    LogLog.debug("Appender \"" + appenderName + "\" was already parsed.");
    return appender;
  }
  String prefix=APPENDER_PREFIX + appenderName;
  String layoutPrefix=prefix + ".layout";
  appender=(Appender)OptionConverter.instantiateByKey(props,prefix,org.apache.log4j.Appender.class,null);
  if (appender == null) {
    LogLog.error("Could not instantiate appender named \"" + appenderName + "\".");
    return null;
  }
  appender.setName(appenderName);
  if (appender instanceof OptionHandler) {
    if (appender.requiresLayout()) {
      Layout layout=(Layout)OptionConverter.instantiateByKey(props,layoutPrefix,Layout.class,null);
      if (layout != null) {
        appender.setLayout(layout);
        LogLog.debug("Parsing layout options for \"" + appenderName + "\".");
        PropertySetter.setProperties(layout,props,layoutPrefix + ".");
        LogLog.debug("End of parsing for \"" + appenderName + "\".");
      }
    }
    PropertySetter.setProperties(appender,props,prefix + ".");
    LogLog.debug("Parsed \"" + appenderName + "\" options.");
  }
  registryPut(appender);
  return appender;
}
