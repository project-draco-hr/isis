{
  final Sequence tran=context.sequence("tran");
  context.checking(new Expectations(){
{
      oneOf(mockObjectStore).startTransaction();
      inSequence(tran);
      oneOf(mockObjectStore).createDestroyObjectCommand(persistentAdapter);
      inSequence(tran);
      will(returnValue(destroyObjectCommand));
      oneOf(mockObjectStore).execute(with(IsisMatchers.listContaining((PersistenceCommand)destroyObjectCommand)));
      inSequence(tran);
      oneOf(mockObjectStore).execute(with(equalTo(Collections.<PersistenceCommand>emptyList())));
      inSequence(tran);
      oneOf(mockObjectStore).endTransaction();
      inSequence(tran);
    }
  }
);
  transactionManager.startTransaction();
  persistenceSession.destroyObject(persistentAdapter);
  transactionManager.endTransaction();
}
