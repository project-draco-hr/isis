{
  List<List<String>> links=asListOfLists("a[x=y z=w].b.c");
  final LinkFollower linkFollower=LinkFollower.create(links);
  assertThat(linkFollower.follow("x").isFollowing(),is(false));
  final LinkFollower followA=linkFollower.follow("a");
  assertThat(followA.isFollowing(),is(true));
  final Map<String,String> criteria=followA.criteria();
  assertThat(criteria.size(),is(2));
  assertThat(criteria.get("x"),is("y"));
  assertThat(criteria.get("z"),is("w"));
  assertThat(followA.matches(JsonRepresentation.newMap("x","y")),is(true));
  assertThat(followA.matches(JsonRepresentation.newMap("x","y","foo","bar")),is(true));
  assertThat(followA.matches(JsonRepresentation.newMap("x","y","z","w")),is(true));
  assertThat(followA.matches(JsonRepresentation.newMap("x","bad")),is(false));
  assertThat(followA.matches(JsonRepresentation.newMap("x","y","z","bad")),is(false));
}
