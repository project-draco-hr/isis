{
  Method m=null;
  try {
    m=Thread.class.getMethod("getContextClassLoader",null);
  }
 catch (  NoSuchMethodException e) {
    return NewInstance.class.getClassLoader();
  }
  try {
    return (ClassLoader)m.invoke(Thread.currentThread(),null);
  }
 catch (  IllegalAccessException e) {
    throw new UnknownError(e.getMessage());
  }
catch (  InvocationTargetException e) {
    throw new UnknownError(e.getMessage());
  }
}
