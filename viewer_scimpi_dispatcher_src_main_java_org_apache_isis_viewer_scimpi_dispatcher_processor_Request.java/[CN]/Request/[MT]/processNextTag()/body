{
  while (index < snippets.size() - 1) {
    index++;
    Snippet snippet=snippets.get(index);
    if (snippet instanceof HtmlSnippet) {
      append(snippet);
    }
 else {
      SwfTag tag=(SwfTag)snippet;
      String name=tag.getName();
      ElementProcessor processor=processors.getFor(name);
      if (context.isDebug()) {
        context.getWriter().println("<!-- " + "process " + tag + " -->");
      }
      process(tag,processor);
    }
  }
}
