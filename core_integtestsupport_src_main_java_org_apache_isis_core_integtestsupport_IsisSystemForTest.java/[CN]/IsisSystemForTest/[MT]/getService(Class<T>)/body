{
  if (serviceClass == DomainObjectContainer.class) {
    return (T)getContainer();
  }
  List<ObjectAdapter> servicesAdapters=getPersistenceSession().getServices();
  for (  ObjectAdapter serviceAdapter : servicesAdapters) {
    Object servicePojo=serviceAdapter.getObject();
    if (serviceClass.isAssignableFrom(servicePojo.getClass())) {
      return (T)servicePojo;
    }
  }
  throw new RuntimeException("Could not find a service of type: " + serviceClass.getName());
}
