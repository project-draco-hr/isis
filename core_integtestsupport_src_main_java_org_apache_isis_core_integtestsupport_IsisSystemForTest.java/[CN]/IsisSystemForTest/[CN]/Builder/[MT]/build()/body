{
  final IsisSystemForTest isisSystemForTest=new IsisSystemForTest(appManifestIfAny,configuration,authenticationRequest,listeners);
  if (level != null) {
    isisSystemForTest.setLevel(level);
  }
  Runtime.getRuntime().addShutdownHook(new Thread(){
    @Override public synchronized void run(){
      try {
        isisSystemForTest.tearDownSystem();
      }
 catch (      Exception e) {
        e.printStackTrace();
      }
      try {
        isisSystemForTest.shutdown();
      }
 catch (      Exception e) {
        e.printStackTrace();
      }
      try {
        IsisContext.shutdown();
      }
 catch (      Exception e) {
        e.printStackTrace();
      }
    }
  }
);
  return isisSystemForTest;
}
