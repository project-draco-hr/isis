{
  try {
    if (transaction != null) {
      abortTransaction();
    }
    objectsToBeSaved.shutdown();
    if (objectsToRefreshViewsFor != null) {
      objectsToRefreshViewsFor.shutdown();
    }
    oidGenerator.shutdown();
    oidGenerator=null;
    objectStore.shutdown();
    objectStore=null;
    nakedClasses.clear();
  }
 catch (  ObjectStoreException e) {
    throw new NakedObjectRuntimeException(e);
  }
  super.shutdown();
}
