{
  SkylarkViewer skylark=new SkylarkViewer();
  ViewUpdateNotifier updateNotifier=new ViewUpdateNotifier();
  skylark.setUpdateNotifier(updateNotifier);
  skylark.setShutdownListener(new ObjectViewingMechanismListener(){
    public void viewerClosing(){
      shutdown();
      System.exit(0);
    }
  }
);
  String classList=configuration.getString("nakedobjects.classes");
  if (classList == null) {
    throw new StartupException("No classes specified");
  }
  DefaultApplicationContext context=new DefaultApplicationContext();
  StringTokenizer classes=new StringTokenizer(classList,",");
  while (classes.hasMoreTokens()) {
    context.addClass(classes.nextToken().trim());
  }
  skylark.setApplication(context);
  skylark.setExploration(true);
  skylark.init();
}
