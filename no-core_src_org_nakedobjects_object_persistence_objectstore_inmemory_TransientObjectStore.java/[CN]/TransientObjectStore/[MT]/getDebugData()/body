{
  DebugString debug=new DebugString();
  debug.appendTitle("Business Objects");
  Enumeration e=instances.keys();
  while (e.hasMoreElements()) {
    NakedObjectSpecification spec=(NakedObjectSpecification)e.nextElement();
    debug.appendln(0,spec.getFullName());
    TransientObjectStoreInstances instances=instancesFor(spec);
    Vector v=new Vector();
    instances.instances(v);
    Enumeration f=v.elements();
    if (!f.hasMoreElements()) {
      debug.appendln(8,"no instances");
    }
    while (f.hasMoreElements()) {
      debug.appendln(8,objects.get(f.nextElement()).toString());
    }
  }
  debug.appendln();
  debug.appendTitle("Object graphs");
  Vector dump=new Vector();
  e=instances.keys();
  while (e.hasMoreElements()) {
    NakedObjectSpecification spec=(NakedObjectSpecification)e.nextElement();
    TransientObjectStoreInstances instances=instancesFor(spec);
    Vector v=new Vector();
    instances.instances(v);
    Enumeration f=v.elements();
    while (f.hasMoreElements()) {
      debug.append(spec.getFullName());
      debug.append(": ");
      Oid oid=(Oid)f.nextElement();
      NakedObject object=(NakedObject)objects.get(oid);
      debug.appendln(Dump.graph(object,dump));
    }
  }
  return debug.toString();
}
