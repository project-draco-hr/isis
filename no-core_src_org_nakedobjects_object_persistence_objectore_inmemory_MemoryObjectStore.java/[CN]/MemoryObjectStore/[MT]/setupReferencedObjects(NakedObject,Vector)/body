{
  if (true)   return;
  if (object == null || all.contains(object)) {
    return;
  }
  all.addElement(object);
  NakedObjects.getObjectLoader().start(object,ResolveState.RESOLVING);
  NakedObjectField[] fields=object.getFields();
  for (int i=0; i < fields.length; i++) {
    NakedObjectField field=fields[i];
    if (field.isCollection()) {
      NakedCollection col=(NakedCollection)object.getField(field);
      for (Enumeration e=col.elements(); e.hasMoreElements(); ) {
        NakedObject element=(NakedObject)e.nextElement();
        setupReferencedObjects(element,all);
      }
    }
 else     if (field.isObject()) {
      NakedObject fieldContent=(NakedObject)object.getField(field);
      setupReferencedObjects(fieldContent,all);
    }
  }
  NakedObjects.getObjectLoader().end(object);
}
