{
  if (parsing) {
    throw new SAXException("Parser is already in use");
  }
  parsing=true;
  if (parser == null) {
    if (validation) {
      parser=new ValidatingParser();
    }
 else {
      parser=new Parser2();
    }
  }
  parser.setNamespaceFeatures(namespaces,prefixes);
  parser.setContentHandler(contentHandler);
  parser.setDTDHandler(dtdHandler);
  parser.setErrorHandler(errorHandler);
  parser.setEntityResolver(entityResolver);
  parser.setLexicalHandler(lexicalHandler);
  parser.setDeclHandler(declHandler);
  try {
    parser.parse(input);
  }
  finally {
    parsing=false;
  }
}
