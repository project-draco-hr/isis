{
  Locale.setDefault(Locale.UK);
  context.checking(new Expectations(){
{
      allowing(mockConfiguration).getString(with(any(String.class)),with(any(String.class)));
      will(returnArgument(1));
      allowing(mockConfiguration).getBoolean(with(any(String.class)),with(any(Boolean.class)));
      will(returnArgument(1));
      allowing(mockConfiguration).getString("isis.locale");
      will(returnValue(null));
      allowing(mockServicesInjector).lookupService(AuthenticationSessionProvider.class);
      will(returnValue(mockAuthenticationSessionProvider));
      allowing(mockServicesInjector).injectServicesInto(with(any(Object.class)));
      never(mockAuthenticationSessionProvider);
      never(mockAdapterManager);
    }
  }
);
}
