{
  Assert.assertNotNull("Class to instantiate must be specified",cls);
  try {
    if (requiredType == null || requiredType.isAssignableFrom(cls)) {
      final Class<T> tClass=ObjectExtensions.asT(cls);
      return tClass.newInstance();
    }
 else {
      throw new InstanceCreationClassException(String.format("Class '%s' is not of type '%s'",cls.getName(),requiredType));
    }
  }
 catch (  final NoClassDefFoundError e) {
    throw new InstanceCreationClassException(String.format("Class '%s'found , but is missing a dependent class: %s",cls,e.getMessage()),e);
  }
catch (  final InstantiationException e) {
    throw new InstanceCreationException(String.format("Could not instantiate an object of class '%s'; %s",cls.getName(),e.getMessage()));
  }
catch (  final IllegalAccessException e) {
    throw new InstanceCreationException(String.format("Could not access the class '%s'; %s",cls.getName(),e.getMessage()));
  }
}
