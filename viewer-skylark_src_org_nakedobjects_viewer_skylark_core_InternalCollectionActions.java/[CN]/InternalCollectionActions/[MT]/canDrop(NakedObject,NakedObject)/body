{
  InternalCollection collection=(InternalCollection)getAssociation().get(parent);
  if (!object.getSpecification().isOfType(collection.getElementSpecification())) {
    return new Veto("Only objects of type " + collection.getElementSpecification().getSingularName() + " are allowed in this collection");
  }
  if (parent.getOid() != null && object.getOid() == null) {
    return new Veto("Can't set field in persistent object with reference to non-persistent object");
  }
  if (object instanceof Aggregated) {
    Aggregated aggregated=((Aggregated)object);
    if (aggregated.isAggregated() && aggregated.parent() != parent) {
      return new Veto("Object is already associated with another object: " + aggregated.parent());
    }
  }
  About about=getAssociation().getAbout(ClientSession.getSession(),parent,object,true);
  return about.canUse();
}
