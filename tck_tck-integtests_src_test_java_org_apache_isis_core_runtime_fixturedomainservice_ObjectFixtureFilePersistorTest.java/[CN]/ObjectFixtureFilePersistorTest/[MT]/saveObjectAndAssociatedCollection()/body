{
  final Set<Object> objects=Sets.newLinkedHashSet();
  iswf.fixtures.prnt1.getHomogeneousCollection().add(iswf.fixtures.smpl1);
  iswf.fixtures.prnt1.getHomogeneousCollection().add(iswf.fixtures.smpl2);
  objects.add(iswf.fixtures.prnt1);
  objects.add(iswf.fixtures.smpl1);
  objects.add(iswf.fixtures.smpl2);
  final StringWriter out=new StringWriter();
  persistor.save(objects,out);
  final String actual=canonicalize(out);
  final String expected1a=ParentEntity.class.getName() + "#2\n";
  final String expected1b="heterogeneousCollection: \n  homogeneousCollection: " + SimpleEntity.class.getName() + "#3 "+ SimpleEntity.class.getName()+ "#4 "+ "\n";
  final String expected2=SimpleEntity.class.getName() + "#3\n  date: 08-Mar-2010 01:00 UTC\n  name: Fred Smith\n";
  final String expected3=SimpleEntity.class.getName() + "#4\n  date: 09-Apr-2011 02:10 UTC\n  name: Joe Bloggs\n";
  assertThat(actual.replaceAll("\n","###"),IsisMatchers.contains(expected1a.replaceAll("\n","###")));
  assertThat(actual.replaceAll("\n","###"),IsisMatchers.contains(expected1b.replaceAll("\n","###")));
  assertThat(actual,IsisMatchers.contains(expected2));
  assertThat(actual,IsisMatchers.contains(expected3));
}
