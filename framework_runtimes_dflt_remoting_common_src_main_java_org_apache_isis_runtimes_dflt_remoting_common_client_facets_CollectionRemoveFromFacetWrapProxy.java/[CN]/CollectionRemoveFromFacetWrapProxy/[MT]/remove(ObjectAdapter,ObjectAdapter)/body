{
  if (inObject.isPersistent()) {
    LOG.debug("clear association remotely " + inObject + "/"+ associate);
    try {
      final IdentityData targetReference=encoder.encodeIdentityData(inObject);
      final IdentityData associateReference=encoder.encodeIdentityData(associate);
      final ClearAssociationRequest request=new ClearAssociationRequest(getAuthenticationSession(),name,targetReference,associateReference);
      final ClearAssociationResponse response=serverFacade.clearAssociation(request);
      final ObjectData[] updates=response.getUpdates();
      encoder.decode(updates);
    }
 catch (    final ConcurrencyException e) {
      throw ProxyUtil.concurrencyException(e);
    }
catch (    final IsisException e) {
      LOG.error("remote exception: " + e.getMessage(),e);
      throw e;
    }
  }
 else {
    LOG.debug("clear association locally " + inObject + "/"+ associate);
    underlyingFacet.remove(inObject,associate);
  }
}
