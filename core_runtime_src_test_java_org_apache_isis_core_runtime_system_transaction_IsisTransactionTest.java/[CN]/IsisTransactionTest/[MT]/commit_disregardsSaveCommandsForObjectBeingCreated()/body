{
  command=createCreateCommand(transientAdapter1,"command 1");
  command2=createSaveCommandThatAborts(transientAdapter1,"command 2");
  context.checking(new Expectations(){
{
      oneOf(mockObjectStore).execute(with(IsisMatchers.listContainingAll(command)));
      oneOf(mockObjectStore).execute(with(equalTo(Collections.<PersistenceCommand>emptyList())));
      oneOf(mockObjectStore).execute(with(equalTo(Collections.<PersistenceCommand>emptyList())));
    }
  }
);
  transaction.addCommand(command);
  transaction.addCommand(command2);
  transaction.commit();
}
