{
  final ProxyFactory proxyFactory=new ProxyFactory();
  proxyFactory.setSuperclass(cls);
  proxyFactory.setInterfaces(ArrayExtensions.combine(cls.getInterfaces(),new Class<?>[]{JavassistEnhanced.class}));
  proxyFactory.setFilter(new MethodFilter(){
    @Override public boolean isHandled(    final Method m){
      return !m.getName().equals("finalize");
    }
  }
);
  final Class<T> proxySubclass=proxyFactory.createClass();
  try {
    final T newInstance=proxySubclass.newInstance();
    final ProxyObject proxyObject=(ProxyObject)newInstance;
    proxyObject.setHandler(methodHandler);
    return newInstance;
  }
 catch (  final InstantiationException e) {
    throw new IsisException(e);
  }
catch (  final IllegalAccessException e) {
    throw new IsisException(e);
  }
}
