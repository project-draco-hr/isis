{
  if (this.collectionAddToFacet == null) {
    return;
  }
  if (!interactionHelper.hasEventBusService()) {
    collectionAddToFacet.add(targetAdapter,referencedObjectAdapter);
    return;
  }
  try {
    final Object referencedObject=ObjectAdapter.Util.unwrap(referencedObjectAdapter);
    final Object collection=getterFacet.getProperty(targetAdapter);
    if (collection instanceof Set) {
      Set<?> set=(Set<?>)collection;
      if (set.contains(referencedObject)) {
        return;
      }
    }
    final CollectionDomainEvent<?,?> existingEvent=collectionDomainEventFacet.currentInteraction.get();
    final CollectionDomainEvent<?,?> event=interactionHelper.postEventForCollection(value(),existingEvent,AbstractDomainEvent.Phase.EXECUTING,getIdentified(),targetAdapter,CollectionDomainEvent.Of.ADD_TO,referencedObject);
    collectionAddToFacet.add(targetAdapter,referencedObjectAdapter);
    interactionHelper.postEventForCollection(value(),verify(event),AbstractDomainEvent.Phase.EXECUTED,getIdentified(),targetAdapter,CollectionDomainEvent.Of.ADD_TO,referencedObject);
  }
  finally {
    collectionDomainEventFacet.currentInteraction.set(null);
  }
}
