{
  LOG.debug(".ctor(" + log("rootObj",rootObject) + andlog("schema",schema)+ andlog("addOids","" + true)+ ")");
  this.addOids=addOids;
  this.nofMeta=new NofMetaModel();
  this.xsMeta=new XsMetaModel();
  this.schema=schema;
  final DocumentBuilderFactory dbf=DocumentBuilderFactory.newInstance();
  dbf.setNamespaceAware(true);
  DocumentBuilder db;
  try {
    db=dbf.newDocumentBuilder();
    this.xmlDocument=db.newDocument();
    this.xsdDocument=db.newDocument();
    xsdElement=xsMeta.createXsSchemaElement(xsdDocument);
    this.rootPlace=appendXml(rootObject);
  }
 catch (  final ParserConfigurationException e) {
    LOG.error("unable to build snapshot",e);
    throw new IsisException(e);
  }
  for (  String path : getPathsFor(rootObject.getObject())) {
    include(path);
  }
}
