{
  Vector validMethods=new Vector();
  for (int i=0; i < methods.length; i++) {
    if (methods[i] == null) {
      continue;
    }
    Method method=methods[i];
    if (Modifier.isStatic(method.getModifiers()) != forClass) {
      continue;
    }
    boolean goodPrefix=method.getName().startsWith(prefix);
    boolean goodCount=method.getParameterTypes().length == paramCount;
    Class type=method.getReturnType();
    boolean goodReturn=(returnType == null) || (canBeVoid && (type == void.class)) || returnType.isAssignableFrom(type);
    if (goodPrefix && goodCount && goodReturn) {
      validMethods.addElement(method);
      methods[i]=null;
    }
  }
  return validMethods;
}
