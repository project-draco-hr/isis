{
  Location at=click.getLocation();
  boolean forView=rootView.viewAreaType(new Location(click.getLocation())) == ViewAreaType.VIEW;
  forView=(click.isCtrl() && !click.isShift()) ^ forView;
  boolean includeExploration=click.isShift() || explorationMode;
  boolean includeDebug=click.isShift() && click.isCtrl();
  popup.init(over,rootView,at,forView,includeExploration,includeDebug);
  setOverlayView(popup);
  makeFocus(popup);
}
