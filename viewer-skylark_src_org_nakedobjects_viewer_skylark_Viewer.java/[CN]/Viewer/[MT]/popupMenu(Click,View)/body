{
  ViewAreaType type=click.getViewAreaType();
  Location at=absoluteLocation(click.getView());
  at.translate(click.getLocation());
  boolean forView=type == ViewAreaType.VIEW;
  forView=(click.isCtrl() && !click.isShift()) ^ forView;
  boolean includeExploration=click.isShift() || explorationMode;
  boolean includeDebug=click.isShift() && click.isCtrl();
  popup.init(over,rootView,at,forView,includeExploration,includeDebug);
  setOverlayView(popup);
  makeFocus(popup);
}
