{
  final AuthenticationSession session=context.getSession();
  if (session == null) {
    throw new NotLoggedInException();
  }
  final String levelName=(String)context.getVariable("level");
  final Level level=Level.toLevel(levelName);
  boolean changeLogged=false;
  if (Level.INFO.isGreaterOrEqual(LogManager.getRootLogger().getLevel())) {
    LOG.info("log level changed to " + level);
    changeLogged=true;
  }
  LogManager.getRootLogger().setLevel(level);
  if (!changeLogged) {
    LOG.info("log level changed to " + level);
  }
  final String view=(String)context.getVariable("view");
  context.setRequestPath(view);
}
