{
  this.transactionManager=transactionManager;
  this.messageBroker=messageBroker;
  this.servicesInjector=servicesInjector;
  this.publishingServiceInternal=lookupService(PublishingServiceInternal.class);
  this.auditingServiceInternal=lookupService(AuditingServiceInternal.class);
  this.changedObjectsServiceInternal=lookupService(ChangedObjectsServiceInternal.class);
  this.metricsService=lookupService(MetricsService.class);
  this.queryResultsCache=lookupService(QueryResultsCache.class);
  this.transactionId=transactionId;
  this.state=State.IN_PROGRESS;
  if (LOG.isDebugEnabled()) {
    LOG.debug("new transaction " + this);
  }
}
