{
  if (command == null) {
    throw new IllegalStateException("CommandContext service is required to support Publishing.");
  }
  final Command.SequenceName sequenceName=Command.SequenceName.PUBLISHED_EVENT;
  final int nextEventSequence=command.next(sequenceName.abbr());
  final UUID transactionId=command.getTransactionId();
  return new EventMetadata(transactionId,nextEventSequence,eventType,currentUser,timestampEpoch,title,targetClass,targetAction,target,memberIdentifier,parameterNames,parameterTypes,returnType);
}
