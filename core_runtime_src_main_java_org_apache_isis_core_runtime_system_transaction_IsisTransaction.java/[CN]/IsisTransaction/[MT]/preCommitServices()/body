{
  doAudit(getChangedObjectProperties());
  final String currentUser=getTransactionManager().getAuthenticationSession().getUserName();
  final Timestamp endTimestamp=Clock.getTimeAsJavaSqlTimestamp();
  publishActionIfRequired(currentUser,endTimestamp);
  doFlush();
  publishedChangedObjectsIfRequired(currentUser,endTimestamp);
  doFlush();
  closeServices();
  doFlush();
}
