{
  JavaBusinessObjectContainer container=new JavaBusinessObjectContainer();
  JavaObjectFactory objectFactory=new JavaObjectFactory();
  objectFactory.setContainer(container);
  TransientObjectStore objectStore=new TransientObjectStore();
  OidGenerator oidGenerator=new TimeBasedOidGenerator();
  LocalObjectManager objectManager=new LocalObjectManager();
  objectManager.setObjectStore(objectStore);
  objectManager.setOidGenerator(oidGenerator);
  nakedObjects.setObjectManager(objectManager);
  StaticNakedObjectSpecificationLoader specificationLoader=new StaticNakedObjectSpecificationLoader();
  nakedObjects.setSpecificationLoader(specificationLoader);
  LocalReflectionFactory reflectionFactory=new LocalReflectionFactory();
  JavaReflectorFactory reflectorFactory=new JavaReflectorFactory();
  ObjectLoaderImpl objectLoader=new ObjectLoaderImpl();
  nakedObjects.setObjectLoader(objectLoader);
  objectLoader.setObjectFactory(objectFactory);
  objectLoader.setPojoAdapterHash(new PojoAdapterHashImpl());
  objectLoader.setReflectorFactory(reflectorFactory);
  nakedObjects.setReflectionFactory(reflectionFactory);
  nakedObjects.setReflectorFactory(reflectorFactory);
  reflectorFactory.setObjectFactory(objectFactory);
  try {
    objectManager.init();
  }
 catch (  StartupException e) {
    throw new NakedObjectRuntimeException(e);
  }
}
