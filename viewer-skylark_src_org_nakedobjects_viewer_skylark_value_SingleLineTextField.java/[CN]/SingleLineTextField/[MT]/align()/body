{
  String line=textContent.getText(0);
  if (line != null) {
    int maxWidth=getMaxWidth();
    int leftLimit=offset + LIMIT;
    int rightLimit=offset + maxWidth - LIMIT;
    if (cursor.getCharacter() > line.length()) {
      cursor.end();
    }
    int cursorPosition=style.stringWidth(line.substring(0,cursor.getCharacter()));
    if (cursorPosition > rightLimit) {
      offset=offset + (cursorPosition - rightLimit);
      offset=Math.min(style.stringWidth(line),offset);
    }
 else     if (cursorPosition < leftLimit) {
      offset=offset - (leftLimit - cursorPosition);
      offset=Math.max(0,offset);
    }
  }
}
