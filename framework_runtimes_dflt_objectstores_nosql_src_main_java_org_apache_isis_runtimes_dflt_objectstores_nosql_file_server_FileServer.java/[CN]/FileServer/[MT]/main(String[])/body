{
  final Options options=new Options();
  options.addOption("h","help",false,"Show this help");
  options.addOption("m","mode",true,"mode: normal | secondary | recovery | archive");
  final CommandLineParser parser=new BasicParser();
  final CommandLine cmd=parser.parse(options,args);
  if (cmd.hasOption('h')) {
    printHelp(options);
    return;
  }
  final String mode=cmd.getOptionValue("m");
  if ("recovery".equals(mode)) {
    final FileServer fileServer=new FileServer();
    fileServer.startRecovery(cmd.getArgList());
  }
 else   if ("archive".equals(mode)) {
    final FileServer fileServer=new FileServer();
    fileServer.startArchive(cmd.getArgList());
  }
 else   if ("secondary".equals(mode)) {
    final FileServer fileServer=new FileServer();
    fileServer.startSecondary();
  }
 else   if (mode == null || "normal".equals(mode)) {
    final FileServer fileServer=new FileServer();
    fileServer.startNormal();
  }
 else {
    printHelp(options);
  }
}
