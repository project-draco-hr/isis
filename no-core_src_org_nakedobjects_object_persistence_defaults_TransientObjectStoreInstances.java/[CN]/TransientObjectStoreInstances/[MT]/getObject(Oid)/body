{
  if (loaded.isLoaded(oid)) {
    return loaded.getLoadedObject(oid);
  }
 else {
    Object pojo=objectInstances.get(oid);
    NakedObject object=NakedObjects.getPojoAdapterFactory().createNOAdapter(pojo);
    if (object.getOid() == null) {
      object.setOid(oid);
      object.setResolved();
    }
 else     if (!object.getOid().equals(oid)) {
      throw new NakedObjectRuntimeException("Requested object with OID " + oid + ", but got object (with different oid): "+ object);
    }
    loaded.loaded(object);
    return object;
  }
}
