{
  final TypeOf annotation=getAnnotation(method,TypeOf.class);
  final Class<?> methodReturnType=method.getReturnType();
  if (!collectionTypeRegistry.isCollectionType(methodReturnType) && !collectionTypeRegistry.isArrayType(methodReturnType)) {
    return false;
  }
  final Class<?> returnType=method.getReturnType();
  if (returnType.isArray()) {
    final Class<?> componentType=returnType.getComponentType();
    FacetUtil.addFacet(new TypeOfFacetInferredFromArray(componentType,holder,getSpecificationLoader()));
    return false;
  }
  if (annotation != null) {
    return FacetUtil.addFacet(new TypeOfFacetViaAnnotation(annotation.value(),holder,getSpecificationLoader()));
  }
  final Type type=method.getGenericReturnType();
  if (!(type instanceof ParameterizedType)) {
    return false;
  }
  final ParameterizedType parameterizedType=(ParameterizedType)type;
  final Type[] actualTypeArguments=parameterizedType.getActualTypeArguments();
  if (actualTypeArguments.length == 0) {
    return false;
  }
  final Object actualTypeArgument=actualTypeArguments[0];
  if (actualTypeArgument instanceof Class) {
    final Class<?> actualType=(Class<?>)actualTypeArgument;
    return FacetUtil.addFacet(new TypeOfFacetInferredFromGenerics(actualType,holder,getSpecificationLoader()));
  }
  if (actualTypeArgument instanceof TypeVariable) {
    return false;
  }
  return false;
}
