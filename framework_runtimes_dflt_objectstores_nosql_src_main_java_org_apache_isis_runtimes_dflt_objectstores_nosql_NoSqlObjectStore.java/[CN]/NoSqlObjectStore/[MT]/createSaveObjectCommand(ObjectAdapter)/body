{
  final ObjectAdapter rootAdapter=getAggregateRootAdapterFor(adapter);
  if (rootAdapter.getOid() instanceof AggregatedOid) {
    throw new NoSqlStoreException("Unexpected aggregated object to save: " + rootAdapter + " ("+ adapter+ ")");
  }
  return new NoSqlSaveObjectCommand(keyCreator,versionCreator,wrtingDataEncrypter,rootAdapter);
}
