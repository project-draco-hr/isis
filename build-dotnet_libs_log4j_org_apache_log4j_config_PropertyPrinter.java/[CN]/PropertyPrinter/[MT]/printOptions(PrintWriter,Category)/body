{
  Enumeration appenders=cat.getAllAppenders();
  Level prio=cat.getLevel();
  String appenderString=(prio == null ? "" : prio.toString());
  while (appenders.hasMoreElements()) {
    Appender app=(Appender)appenders.nextElement();
    String name;
    if ((name=(String)appenderNames.get(app)) == null) {
      if ((name=app.getName()) == null || isGenAppName(name)) {
        name=genAppName();
      }
      appenderNames.put(app,name);
      printOptions(out,app,"log4j.appender." + name);
      if (app.getLayout() != null) {
        printOptions(out,app.getLayout(),"log4j.appender." + name + ".layout");
      }
    }
    appenderString+=", " + name;
  }
  String catKey=(cat == Category.getRoot()) ? "log4j.rootCategory" : "log4j.category." + cat.getName();
  if (appenderString != "") {
    out.println(catKey + "=" + appenderString);
  }
}
