{
  final EntityCollectionModel entityCollectionModel=getModel();
  if (bulkActions.isEmpty() || entityCollectionModel.isParented()) {
    return null;
  }
  ObjectAdapterToggleboxColumn toggleboxColumn=new ObjectAdapterToggleboxColumn(new SelectionHandler(){
    private static final long serialVersionUID=1L;
    @Override public void onSelected(    final Component context,    final ObjectAdapter selectedAdapter,    AjaxRequestTarget ajaxRequestTarget){
      entityCollectionModel.toggleSelectionOn(selectedAdapter);
    }
    @Override public void onConcurrencyException(    final Component context,    ObjectAdapter selectedAdapter,    ConcurrencyException ex,    AjaxRequestTarget ajaxRequestTarget){
      ajaxRequestTarget.add(dataTable);
    }
  }
);
  columns.add(toggleboxColumn);
  return toggleboxColumn;
}
