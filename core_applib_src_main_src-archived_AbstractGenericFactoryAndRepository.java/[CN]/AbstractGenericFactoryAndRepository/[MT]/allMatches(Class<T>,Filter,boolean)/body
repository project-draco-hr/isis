{
  T[] allInstances=getGenericContainer().allInstances(cls,includeSubclasses);
  List<T> filtered=new ArrayList<T>();
  for (int i=0; i < allInstances.length; i++) {
    T instance=allInstances[i];
    if (filter.accept(instance)) {
      filtered.add(instance);
    }
  }
  return filtered;
}
