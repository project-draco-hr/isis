{
  LayoutMetadata metadata;
  try {
    metadata=readMetadata(domainClass);
  }
 catch (  Exception e) {
    throw new ReaderException("Failed to locate/parse " + domainClass.getName() + ".layout.json file ("+ e.getMessage()+ ")",e);
  }
  if (metadata.getColumns() == null || metadata.getColumns().size() != 4) {
    throw new ReaderException("JSON metadata must have precisely 4 columns (prop/prop/prop/coll)");
  }
  final Properties props=new Properties();
  setMemberGroupLayoutColumnSpans(metadata,props);
  setMemberGroupLayoutColumnLists(metadata,0,"left",props);
  setMemberGroupLayoutColumnLists(metadata,1,"middle",props);
  setMemberGroupLayoutColumnLists(metadata,2,"right",props);
  setProperties(metadata,props);
  setCollections(metadata,props);
  setFreestandingActions(metadata,props);
  return props;
}
