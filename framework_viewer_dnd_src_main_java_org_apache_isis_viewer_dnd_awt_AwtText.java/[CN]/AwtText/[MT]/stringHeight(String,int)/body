{
  int noLines=0;
  final StringTokenizer lines=new StringTokenizer(text,"\n\r");
  while (lines.hasMoreTokens()) {
    final String line=lines.nextToken();
    final StringTokenizer words=new StringTokenizer(line," ");
    final StringBuffer l=new StringBuffer();
    int width=0;
    while (words.hasMoreTokens()) {
      final String nextWord=words.nextToken();
      final int wordWidth=stringWidth(nextWord);
      width+=wordWidth;
      if (width >= maxWidth) {
        noLines++;
        l.setLength(0);
        width=wordWidth;
      }
      l.append(nextWord);
      l.append(" ");
      width+=stringWidth(" ");
    }
    noLines++;
  }
  return noLines * getLineHeight();
}
