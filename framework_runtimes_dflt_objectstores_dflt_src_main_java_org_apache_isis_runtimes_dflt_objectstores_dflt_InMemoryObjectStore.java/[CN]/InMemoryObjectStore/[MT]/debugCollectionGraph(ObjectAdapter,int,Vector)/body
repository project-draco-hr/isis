{
  final StringBuffer s=new StringBuffer();
  if (recursiveElements.contains(collection)) {
    s.append("*\n");
  }
 else {
    recursiveElements.addElement(collection);
    final CollectionFacet facet=CollectionFacetUtils.getCollectionFacetFromSpec(collection);
    final Iterator<ObjectAdapter> e=facet.iterator(collection);
    while (e.hasNext()) {
      indent(s,level);
      ObjectAdapter element;
      try {
        element=e.next();
      }
 catch (      final ClassCastException ex) {
        LOG.error(ex);
        return s.toString();
      }
      s.append(element);
      s.append(debugGraph(element,level + 1,recursiveElements));
    }
  }
  return s.toString();
}
