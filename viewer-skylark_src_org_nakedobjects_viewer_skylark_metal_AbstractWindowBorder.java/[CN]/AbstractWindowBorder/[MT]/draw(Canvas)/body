{
  Size s=getSize();
  int x=left;
  int width=s.getWidth();
  int height=s.getHeight();
  Bounds bounds=getBounds();
  canvas.drawSolidRectangle(3,3,bounds.getWidth() - 6,bounds.getHeight() - 6,Style.background(getSpecification()));
  boolean hasFocus=containsFocus();
  Color lightColor=hasFocus ? Style.SECONDARY1 : Style.SECONDARY2;
  Color darkColor=hasFocus ? Style.BLACK : Style.SECONDARY1;
  canvas.drawRectangle(1,0,width - 2,height,lightColor);
  canvas.drawRectangle(0,1,width,height - 2,lightColor);
  for (int i=2; i < left; i++) {
    canvas.drawRectangle(i,i,width - 2 * i,height - 2 * i,lightColor);
  }
  ViewState state=getState();
  if (state.isActive()) {
    int i=left;
    canvas.drawRectangle(i,top,width - 2 * i,height - 2 * i - top,Style.ACTIVE);
  }
  canvas.drawLine(2,15,2,height - 15,darkColor);
  canvas.drawLine(3,16,3,height - 14,Style.PRIMARY1);
  canvas.drawLine(width - 3,15,width - 3,height - 15,darkColor);
  canvas.drawLine(width - 2,16,width - 2,height - 14,Style.PRIMARY1);
  canvas.drawLine(15,2,width - 15,2,darkColor);
  canvas.drawLine(16,3,width - 14,3,Style.PRIMARY1);
  canvas.drawLine(15,height - 3,width - 15,height - 3,darkColor);
  canvas.drawLine(16,height - 2,width - 14,height - 2,Style.PRIMARY1);
  Color titleBarColor=hasFocus ? Style.SECONDARY2 : Style.SECONDARY3;
  canvas.drawSolidRectangle(left,LINE_THICKNESS,width - left - right,titlebarHeight,titleBarColor);
  int y=LINE_THICKNESS + titlebarHeight - 1;
  canvas.drawLine(x,y,width - right - 1,y,lightColor);
  canvas.drawText(title(),x + HPADDING,baseline,darkColor,TITLE_STYLE);
  for (int i=0; controls != null && i < controls.length; i++) {
    Canvas controlCanvas=canvas.createSubcanvas(controls[i].getBounds());
    controls[i].draw(controlCanvas);
  }
  super.draw(canvas);
}
