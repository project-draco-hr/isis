{
  String category=event.getLoggerName();
  String logMessage=event.getRenderedMessage();
  String nestedDiagnosticContext=event.getNDC();
  String threadDescription=event.getThreadName();
  String level=event.getLevel().toString();
  long time=event.timeStamp;
  LocationInfo locationInfo=event.getLocationInformation();
  Log4JLogRecord record=new Log4JLogRecord();
  record.setCategory(category);
  record.setMessage(logMessage);
  record.setLocation(locationInfo.fullInfo);
  record.setMillis(time);
  record.setThreadDescription(threadDescription);
  if (nestedDiagnosticContext != null) {
    record.setNDC(nestedDiagnosticContext);
  }
 else {
    record.setNDC("");
  }
  if (event.getThrowableInformation() != null) {
    record.setThrownStackTrace(event.getThrowableInformation());
  }
  try {
    record.setLevel(LogLevel.valueOf(level));
  }
 catch (  LogLevelFormatException e) {
    record.setLevel(LogLevel.WARN);
  }
  if (_logMonitor != null) {
    _logMonitor.addMessage(record);
  }
}
