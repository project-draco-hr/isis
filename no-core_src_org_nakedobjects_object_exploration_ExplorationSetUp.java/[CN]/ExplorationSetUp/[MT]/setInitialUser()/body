{
  if (user != null) {
    NakedObjectSpecification cls=NakedObjectSpecificationLoader.getInstance().loadSpecification(User.class.getName());
    NakedCollection coll=objectManager.findInstances(cls,user);
    if (coll.size() == 0) {
      throw new NakedObjectRuntimeException("No user " + user);
    }
    User user=(User)coll.elements().nextElement();
    ClientSession.getSession().setUser(user);
  }
}
