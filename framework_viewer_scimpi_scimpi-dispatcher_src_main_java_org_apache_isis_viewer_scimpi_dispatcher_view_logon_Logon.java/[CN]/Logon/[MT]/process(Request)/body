{
  String view=request.getOptionalProperty(VIEW);
  RequestContext context=request.getContext();
  if (view == null) {
    view=(String)context.getVariable("login-path");
  }
  final boolean isNotLoggedIn=IsisContext.getSession().getAuthenticationSession() instanceof AnonymousSession;
  if (isNotLoggedIn) {
    loginForm(request,view);
  }
}
