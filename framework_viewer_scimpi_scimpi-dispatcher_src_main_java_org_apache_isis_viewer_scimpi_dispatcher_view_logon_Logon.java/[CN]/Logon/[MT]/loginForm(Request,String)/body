{
  final String error=request.getOptionalProperty(ERROR,request.getContext().getRequestedFile());
  final List<HiddenInputField> hiddenFields=new ArrayList<HiddenInputField>();
  hiddenFields.add(new HiddenInputField(ERROR,error));
  if (view != null) {
    hiddenFields.add(new HiddenInputField(VIEW,view));
  }
  final FormState entryState=(FormState)request.getContext().getVariable(ENTRY_FIELDS);
  final InputField nameField=createdField("username","User Name",InputField.TEXT,entryState);
  final String width=request.getOptionalProperty("width");
  if (width != null) {
    final int w=Integer.valueOf(width).intValue();
    nameField.setWidth(w);
  }
  final InputField passwordField=createdField("password","Password",InputField.PASSWORD,entryState);
  final InputField[] fields=new InputField[]{nameField,passwordField};
  final String formTitle=request.getOptionalProperty(FORM_TITLE);
  final String loginButtonTitle=request.getOptionalProperty(BUTTON_TITLE,"Log in");
  final String className=request.getOptionalProperty(CLASS,"login");
  final String id=request.getOptionalProperty(ID);
  HtmlFormBuilder.createForm(request,"logon.app",hiddenFields.toArray(new HiddenInputField[hiddenFields.size()]),fields,className,id,formTitle,null,null,loginButtonTitle,entryState == null ? null : entryState.getError(),null);
}
