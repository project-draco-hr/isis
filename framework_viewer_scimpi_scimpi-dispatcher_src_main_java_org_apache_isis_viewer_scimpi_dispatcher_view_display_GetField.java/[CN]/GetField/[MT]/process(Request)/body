{
  final String id=request.getOptionalProperty(OBJECT);
  final String fieldName=request.getRequiredProperty(FIELD);
  final ObjectAdapter object=request.getContext().getMappedObjectOrResult(id);
  if (object == null) {
    throw new ScimpiException("No object to get field for: " + fieldName + " - "+ id);
  }
  final ObjectAssociation field=object.getSpecification().getAssociation(fieldName);
  if (field == null) {
    throw new ScimpiException("No field " + fieldName + " in "+ object.getSpecification().getFullIdentifier());
  }
  final AuthenticationSession session=IsisContext.getAuthenticationSession();
  if (field.isVisible(session,object).isVetoed()) {
    throw new ForbiddenException(field,ForbiddenException.VISIBLE);
  }
  String pattern=request.getOptionalProperty("decimal-format");
  Format format=null;
  if (pattern != null) {
    format=new DecimalFormat(pattern);
  }
  pattern=request.getOptionalProperty("date-format");
  if (pattern != null) {
    format=new SimpleDateFormat(pattern);
  }
  final String name=request.getOptionalProperty(RESULT_NAME,fieldName);
  final String scopeName=request.getOptionalProperty(SCOPE);
  final Scope scope=RequestContext.scope(scopeName,Scope.REQUEST);
  process(request,object,field,format,name,scope);
}
