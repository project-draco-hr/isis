{
  final String user=request.getParameter("username");
  final String password=request.getParameter("password");
  final String password2=request.getParameter("password2");
  if (user == null) {
    renderPrompt(response,"","","","");
    return;
  }
  if (!Objects.equal(password,password2)) {
    renderPrompt(response,user,"","","passwords don't match");
    return;
  }
  final boolean registered=register(user,password,password2);
  if (!registered) {
    renderPrompt(response,user,"","","user name already taken");
    return;
  }
  redirectToLogonPage(response,user);
}
