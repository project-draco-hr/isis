{
@Immutable(When.ONCE_PERSISTED) class Customer {
  }
  facetFactory.process(new ProcessClassContext(Customer.class,methodRemover,facetedMethod));
  final Facet facet=facetedMethod.getFacet(ImmutableFacet.class);
  assertNotNull(facet);
  assertTrue(facet instanceof ImmutableFacetAnnotation);
  final ImmutableFacetAnnotation immutableFacetAnnotation=(ImmutableFacetAnnotation)facet;
  assertEquals(When.ONCE_PERSISTED,immutableFacetAnnotation.when());
  assertNoMethodsRemoved();
}
