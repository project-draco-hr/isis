{
  final ObjectSpecification specification=IsisContext.getSpecificationLoader().loadSpecification(ExampleReferencePojo.class);
  final ObjectAdapter object=IsisContext.getPersistenceSession().createInstance(specification);
  IsisContext.getPersistenceSession().makePersistent(object);
  object.setOptimisticLock(new SerialNumberVersion(3,"username",new Date(1000)));
  final long id=((SerialOid)object.getOid()).getSerialNo();
  final String key=Long.toString(id,16);
  final Mockery context=new Mockery();
  final NoSqlCommandContext commandContext=context.mock(NoSqlCommandContext.class);
  context.checking(new Expectations(){
{
      one(commandContext).delete(specification.getFullIdentifier(),key,"3");
    }
  }
);
  final NoSqlDestroyObjectCommand command=new NoSqlDestroyObjectCommand(new SerialKeyCreator(),new SerialNumberVersionCreator(),object);
  command.execute(commandContext);
}
