{
  t.addCommand(createSaveCommand(object1,"command 1"));
  t.addCommand(createCommandThatAborts(object2,"command 2"));
  t.addCommand(createSaveCommand(object1,"command 3"));
  try {
    t.commit();
    fail();
  }
 catch (  ObjectPerstsistenceException expected) {
  }
  os.assertAction(0,"endTransaction");
  os.assertAction(1,"run command 1");
  os.assertAction(2,"run command 2");
}
