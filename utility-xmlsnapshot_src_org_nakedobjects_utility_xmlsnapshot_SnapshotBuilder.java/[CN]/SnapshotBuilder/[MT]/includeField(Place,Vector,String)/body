{
  Vector fieldNamesOrig=fieldNames;
  fieldNames=new Vector();
  for (java.util.Enumeration enum=fieldNamesOrig.elements(); enum.hasMoreElements(); ) {
    fieldNames.addElement(enum.nextElement());
  }
  if (fieldNames.size() == 0) {
    return true;
  }
  String fieldName=(String)fieldNames.elementAt(0);
  fieldNames.removeElementAt(0);
  NakedObjectSpecification nakedClass=place.getObject().getSpecification();
  FieldSpecification field=null;
  try {
    field=nakedClass.getField(fieldName);
  }
 catch (  NakedObjectSpecificationException ex) {
    return false;
  }
  NodeList fieldElements=place.getElement().getElementsByTagNameNS("*",field.getName());
  if (fieldElements.getLength() != 1) {
    return false;
  }
  Element fieldElement=(Element)fieldElements.item(0);
  if (fieldNames.size() == 0 && annotation != null) {
    namespaceManager.setNofAttribute(fieldElement,"annotation",annotation);
  }
  if (field instanceof ValueFieldSpecification) {
    return false;
  }
 else   if (field instanceof OneToOneAssociationSpecification) {
    OneToOneAssociationSpecification oneToOneAssociation=((OneToOneAssociationSpecification)field);
    NakedObject referencedObject=(NakedObject)oneToOneAssociation.get(place.getObject());
    if (referencedObject == null) {
      return true;
    }
    return appendXmlThenIncludeRemaining(fieldElement,referencedObject,fieldNames,annotation);
  }
 else   if (field instanceof OneToManyAssociationSpecification) {
    OneToManyAssociationSpecification oneToManyAssociation=(OneToManyAssociationSpecification)field;
    InternalCollection collection=(InternalCollection)oneToManyAssociation.get(place.getObject());
    boolean allFieldsNavigated=true;
    for (int i=0; i < collection.size(); i++) {
      NakedObject referencedObject=(NakedObject)collection.elementAt(i);
      allFieldsNavigated=allFieldsNavigated && appendXmlThenIncludeRemaining(fieldElement,referencedObject,fieldNames,annotation);
    }
    return allFieldsNavigated;
  }
  return false;
}
