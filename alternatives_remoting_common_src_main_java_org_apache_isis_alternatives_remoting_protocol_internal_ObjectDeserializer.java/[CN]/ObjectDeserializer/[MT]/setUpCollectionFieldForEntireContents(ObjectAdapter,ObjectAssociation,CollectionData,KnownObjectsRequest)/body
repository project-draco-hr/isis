{
  final int size=collectionContentData.getElements().length;
  final ObjectAdapter[] elements=new ObjectAdapter[size];
  for (int j=0; j < elements.length; j++) {
    elements[j]=deserializeObject(collectionContentData.getElements()[j],knownObjects);
    if (LOG.isDebugEnabled()) {
      LOG.debug("adding element to " + field.getId() + ": "+ elements[j]);
    }
  }
  final ObjectAdapter col=field.get(adapter);
  final ResolveState initialState=col.getResolveState();
  final ResolveState state=nextState(initialState,collectionContentData.hasAllElements());
  if (state != null) {
    PersistorUtil.start(col,state);
    final ObjectAdapter collection=((OneToManyAssociation)field).get(adapter);
    final CollectionFacet facet=CollectionFacetUtils.getCollectionFacetFromSpec(collection);
    facet.init(collection,elements);
    PersistorUtil.end(col);
  }
 else {
    LOG.warn("not initialising collection " + col + " due to current state "+ initialState);
  }
}
