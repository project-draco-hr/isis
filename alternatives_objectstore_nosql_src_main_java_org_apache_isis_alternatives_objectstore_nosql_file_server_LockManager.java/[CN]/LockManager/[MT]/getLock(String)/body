{
  Lock lock;
synchronized (this) {
    lock=locks.get(id);
    if (lock == null) {
      lock=new Lock();
      locks.put(id,lock);
    }
  }
  return lock;
}
