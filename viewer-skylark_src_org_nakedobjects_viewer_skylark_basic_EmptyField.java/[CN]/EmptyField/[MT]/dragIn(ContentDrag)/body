{
  Content sourceContent=drag.getSourceContent();
  if (sourceContent instanceof ObjectContent) {
    NakedObject source=((ObjectContent)sourceContent).getObject();
    Consent perm=canDrop(source);
    if (perm.getReason() != null) {
      getViewManager().setStatus(perm.getReason());
    }
    if (perm.isAllowed()) {
      getState().setCanDrop();
    }
 else {
      getState().setCantDrop();
    }
  }
 else {
    getState().setCantDrop();
  }
  markDamaged();
}
