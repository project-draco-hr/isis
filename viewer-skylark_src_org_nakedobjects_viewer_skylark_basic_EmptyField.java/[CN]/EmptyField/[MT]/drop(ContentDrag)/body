{
  if (canDrop(drag)) {
    NakedObject target=((ObjectContent)getParent().getContent()).getObject();
    View dragSource=drag.getSourceView();
    NakedObject source=((ObjectContent)dragSource.getContent()).getObject();
    NakedObject associatedObject;
    OneToOneAssociationSpecification field=getEmptyField();
    LOG.debug("drop " + source + " on "+ field+ "/"+ target);
    if (source instanceof NakedClassSpec) {
      associatedObject=((NakedClassSpec)source).actionNewInstance();
    }
 else {
      associatedObject=source;
    }
    getViewManager().getUndoStack().add(new AssociateCommand(target,associatedObject,field));
    boolean isNotPersistent=target.getOid() == null;
    if (isNotPersistent) {
      getParent().invalidateContent();
    }
  }
}
