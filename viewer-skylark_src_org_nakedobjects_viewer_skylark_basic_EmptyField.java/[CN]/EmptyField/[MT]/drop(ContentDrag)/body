{
  if (canDrop(drag)) {
    NakedObject target=((ObjectContent)getParent().getContent()).getObject();
    View dragSource=drag.getSourceView();
    NakedObject source=((ObjectContent)dragSource.getContent()).getObject();
    NakedObject associatedObject;
    OneToOneAssociation field=getEmptyField();
    LOG.debug("drop " + source + " on "+ field+ "/"+ target);
    if (source instanceof NakedClass) {
      associatedObject=((NakedClass)source).createInstance();
    }
 else {
      associatedObject=source;
    }
    getViewManager().getUndoStack().add(new AssociateCommand(target,associatedObject,field));
    if (!target.isPersistent()) {
      getParent().invalidateContent();
    }
  }
}
