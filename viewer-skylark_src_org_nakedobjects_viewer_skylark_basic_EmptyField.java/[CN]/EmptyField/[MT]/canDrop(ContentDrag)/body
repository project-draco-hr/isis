{
  NakedObject dragSource=((ObjectContent)drag.getSourceContent()).getObject();
  if (dragSource instanceof NakedClass) {
    return true;
  }
 else {
    NakedObjectSpecification targetType=((OneToOneField)getContent()).getField().getType();
    NakedObject parent=((ObjectContent)getParent().getContent()).getObject();
    NakedObjectSpecification sourceType=dragSource.getSpecification();
    if (!sourceType.isOfType(targetType)) {
      return false;
    }
    Permission perm=getEmptyField().getAbout(Session.getSession().getContext(),parent,dragSource).canUse();
    if (perm.getReason() != null) {
      getViewManager().setStatus(perm.getReason());
    }
    return perm.isAllowed();
  }
}
