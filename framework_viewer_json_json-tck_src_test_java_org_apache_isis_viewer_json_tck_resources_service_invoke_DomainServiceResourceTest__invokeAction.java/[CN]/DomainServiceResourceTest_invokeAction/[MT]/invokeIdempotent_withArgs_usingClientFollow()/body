{
  JsonRepresentation givenAction=givenAction("simples","newPersistentEntity");
  final ObjectActionRepresentation actionRepr=givenAction.as(ObjectActionRepresentation.class);
  final Link invokeLink=actionRepr.getInvoke();
  assertThat(invokeLink,is(not(nullValue())));
  final JsonRepresentation args=invokeLink.getArguments();
  assertThat(args.size(),is(2));
  assertThat(args.mapHas("name"),is(true));
  assertThat(args.mapHas("flag"),is(true));
  args.mapPut("name","New Name");
  args.mapPut("flag",true);
  final Response response=client.follow(invokeLink,args);
  RestfulResponse<DomainObjectRepresentation> restfulResponse=RestfulResponse.ofT(response);
  final DomainObjectRepresentation objectRepr=restfulResponse.getEntity();
  assertThat(objectRepr.getRepresentation("members[propertyId=%s].value","name").asString(),is("New Name"));
  assertThat(objectRepr.getRepresentation("members[propertyId=%s].value","flag").asBoolean(),is(true));
}
