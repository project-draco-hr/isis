{
  NakedObject[] instances=new NakedObject[45];
  int i=0;
  String query="select * from role";
  Statement s=connection.createStatement();
  ResultSet rs=s.executeQuery(query);
  while (rs.next() && i < instances.length) {
    Oid oid=new SqlOid(rs.getInt(1));
    Person role;
    if (NakedObjects.getObjectLoader().isIdentityKnown(oid)) {
      instances[i++]=NakedObjects.getObjectLoader().getAdapterFor(oid);
      role=(Person)NakedObjects.getObjectLoader().getAdapterFor(oid).getObject();
    }
 else {
      NakedObject instance=NakedObjects.getObjectLoader().recreateAdapterForPersistent(oid,NakedObjects.getSpecificationLoader().loadSpecification(Person.class));
      NakedObjects.getObjectLoader().start(instance,ResolveState.RESOLVING);
      role=(Person)instance.getObject();
      role.setName(rs.getString(2));
      NakedObjects.getObjectLoader().end(instance);
      instances[i++]=instance;
    }
  }
  rs.close();
  s.close();
  NakedObject[] results=new NakedObject[i];
  System.arraycopy(instances,0,results,0,i);
  return results;
}
