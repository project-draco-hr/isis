{
  LOG.debug("request executeAction " + actionIdentifier + " on "+ target+ " for "+ session);
  NakedObject object;
  if (target instanceof ReferenceData && ((ReferenceData)target).getOid() != null) {
    object=getPersistentNakedObject(session,(ReferenceData)target);
  }
 else   if (target instanceof ObjectData) {
    object=(NakedObject)DataHelper.restore(target);
  }
 else {
    throw new NakedObjectRuntimeException();
  }
  Action action=getActionMethod(actionType,actionIdentifier,parameterData,object);
  checkHint(session,actionType,actionIdentifier,target,parameterData);
  Naked[] parameters=getParameters(session,parameterData);
  Naked result=object.execute(action,parameters);
  ObjectData persistedTarget=objectDataFactory.createMadePersistentGraph(target,object,updateNotifier);
  ObjectData[] persistedParameters=new ObjectData[parameterData.length];
  for (int i=0; i < persistedParameters.length; i++) {
    if (action.getParameterTypes()[i].isObject() && parameterData[i] instanceof ObjectData) {
      persistedParameters[i]=objectDataFactory.createMadePersistentGraph((ObjectData)parameterData[i],(NakedObject)parameters[i],updateNotifier);
    }
  }
  return objectDataFactory.createActionResult(result,getUpdates(),persistedTarget,persistedParameters);
}
