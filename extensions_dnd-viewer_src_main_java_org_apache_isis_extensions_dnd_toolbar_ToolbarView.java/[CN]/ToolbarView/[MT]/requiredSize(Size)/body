{
  int lineHeight=0;
  int lineWidth=HPADDING;
  Size requiredSize=new Size();
  for (  View button : getSubviews()) {
    Size buttonSize=button.getRequiredSize(availableSpace);
    lineWidth+=buttonSize.getWidth() + HPADDING;
    if (lineWidth >= availableSpace.getWidth()) {
      lineWidth=HPADDING;
      requiredSize.extendHeight(lineHeight + VPADDING);
      lineHeight=0;
    }
    lineHeight=Math.max(lineHeight,buttonSize.getHeight());
    requiredSize.ensureWidth(lineWidth);
  }
  requiredSize.extendHeight(lineHeight + VPADDING);
  return requiredSize;
}
