{
  super(id);
  ListView<CssMenuItem> menuItemsView=new ListView<CssMenuItem>("menuItems",menuItems){
    @Override protected void populateItem(    ListItem<CssMenuItem> listItem){
      CssMenuItem menuItem=listItem.getModelObject();
      listItem.add(new Label("name",menuItem.getName()));
      MarkupContainer topMenu=new WebMarkupContainer("topMenu");
      topMenu.add(new CssClassAppender("top-menu-" + CssClassAppender.asCssStyle(menuItem.getName())));
      listItem.add(topMenu);
      List<CssMenuItem> subMenuItems=withSeparators(menuItem);
      ListView<CssMenuItem> subMenuItemsView=new ListView<CssMenuItem>("subMenuItems",subMenuItems){
        @Override protected void populateItem(        ListItem<CssMenuItem> listItem){
          CssMenuItem subMenuItem=listItem.getModelObject();
          if (subMenuItem.hasSubMenuItems()) {
            addFolderItem(subMenuItem,listItem);
          }
 else {
            addLeafItem(subMenuItem,listItem);
          }
        }
      }
;
      topMenu.add(subMenuItemsView);
    }
  }
;
  add(menuItemsView);
}
