{
  if (isResizing) {
    isResizing=false;
    getViewManager().showTextCursor();
    Location at=drag.getLocation();
    int lines=Math.max(1,at.getY() / lineHeight());
    setNoLines(lines);
    int width=Math.max(80,at.getX() - HPADDING - lineHeight() * 3 / 5);
    setMaxWidth(width);
    LOG.debug(lines + " x " + width);
    invalidateLayout();
  }
 else {
    Location at=drag.getLocation();
    if (canChangeValue()) {
      selection.extendTo(at);
      markDamaged();
    }
  }
}
