{
  if (representation == null) {
    return null;
  }
  if (objectSpec.isEncodeable()) {
    return new JsonValueEncoder().asAdapter(objectSpec,representation);
  }
  if (!representation.isLink()) {
    throw new IllegalArgumentException("Expected a link (because this object's type is not a value) but found no 'href'");
  }
  final String oidFromHref=UrlParserUtils.encodedOidFromLink(representation);
  if (oidFromHref == null) {
    throw new IllegalArgumentException("Could not parse 'href' to identify the object's OID");
  }
  final ObjectAdapter objectAdapter=OidUtils.getObjectAdapterElseNull(resourceContext,oidFromHref);
  if (objectAdapter == null) {
    throw new IllegalArgumentException("Object not found for 'href'");
  }
  return objectAdapter;
}
