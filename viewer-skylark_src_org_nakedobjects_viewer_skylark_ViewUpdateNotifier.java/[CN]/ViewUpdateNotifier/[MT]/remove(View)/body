{
  Content content=view.getContent();
  LOG.debug("removing " + content + " for "+ view);
  if (content instanceof ObjectContent) {
    Naked object=((ObjectContent)content).getObject();
    if (object != null && views.containsKey(object)) {
      Vector viewsToNotify;
      viewsToNotify=(Vector)views.get(object);
      viewsToNotify.removeElement(view);
      LOG.debug("removed " + view + " from observers for "+ object);
      if (viewsToNotify.size() == 0) {
        views.remove(object);
        LOG.debug("removed observer list for " + object);
        NakedObjectLoader loader=NakedObjects.getObjectLoader();
        loader.unloaded((NakedObject)object);
      }
    }
 else {
      throw new NakedObjectRuntimeException("Tried to remove a non-existant view " + view + " from observers for "+ object);
    }
  }
}
