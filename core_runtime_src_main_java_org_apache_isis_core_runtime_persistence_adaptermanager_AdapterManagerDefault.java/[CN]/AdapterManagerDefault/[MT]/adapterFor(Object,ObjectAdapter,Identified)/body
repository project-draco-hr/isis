{
  final ObjectAdapter adapter=getAdapterFor(pojo);
  if (adapter != null) {
    return adapter;
  }
  final ObjectSpecification noSpec=getSpecificationLoader().loadSpecification(pojo.getClass());
  if (noSpec.containsFacet(ValueFacet.class)) {
    return createStandaloneAdapter(pojo);
  }
  if (ownerAdapter != null && identified != null) {
    if (specIsAggregated(noSpec) || referenceIsAggregated(identified)) {
      ObjectAdapter newAdapter=createAggregatedAdapter(pojo,ownerAdapter,identified);
      return mapAndInjectServices(newAdapter);
    }
  }
  return map(createOrRecreateRootAdapter(pojo));
}
