{
  final String[] configuredClassNames=configuration.getList(ReflectorConstants.CLASS_SUBSTITUTOR_CLASS_NAME_LIST);
  if (configuredClassNames == null || configuredClassNames.length == 0) {
    return InstanceUtil.createInstance(ReflectorConstants.CLASS_SUBSTITUTOR_CLASS_NAME_DEFAULT,ClassSubstitutor.class);
  }
  final List<ClassSubstitutor> substitutors=Lists.newArrayList();
  for (  final String className : configuredClassNames) {
    final ClassSubstitutor substitutor=InstanceUtil.createInstance(className,ClassSubstitutor.class);
    substitutors.add(substitutor);
  }
  return substitutors.size() == 1 ? substitutors.get(0) : new ClassSubstitutorComposite(substitutors);
}
