{
  final SortedMap<String,SortedSet<FacetedMethod>> sortedMembersByGroup=Maps.newTreeMap();
  final SortedSet<FacetedMethod> nonAnnotatedGroup=Sets.newTreeSet(new MemberIdentifierComparator());
  for (  final FacetedMethod facetedMethod : facetedMethods) {
    final MemberOrderFacet memberOrder=facetedMethod.getFacet(MemberOrderFacet.class);
    if (memberOrder == null) {
      nonAnnotatedGroup.add(facetedMethod);
      continue;
    }
    final SortedSet<FacetedMethod> sortedMembersForGroup=getSortedSet(sortedMembersByGroup,memberOrder.name());
    sortedMembersForGroup.add(facetedMethod);
  }
  final SortedSet<FacetedMethod> defaultSet=getSortedSet(sortedMembersByGroup,"");
  defaultSet.addAll(nonAnnotatedGroup);
  final Set<String> groupNames=sortedMembersByGroup.keySet();
  final SortedMap<String,DeweyOrderSet> orderSetsByGroup=Maps.newTreeMap();
  for (  final String string : groupNames) {
    final String groupName=string;
    final DeweyOrderSet deweyOrderSet=new DeweyOrderSet(groupName);
    orderSetsByGroup.put(groupName,deweyOrderSet);
    ensureParentFor(orderSetsByGroup,deweyOrderSet);
  }
  for (  final String groupName : groupNames) {
    final DeweyOrderSet deweyOrderSet=orderSetsByGroup.get(groupName);
    final SortedSet sortedMembers=sortedMembersByGroup.get(groupName);
    deweyOrderSet.addAll(sortedMembers);
    deweyOrderSet.copyOverChildren();
  }
  return orderSetsByGroup.get("");
}
