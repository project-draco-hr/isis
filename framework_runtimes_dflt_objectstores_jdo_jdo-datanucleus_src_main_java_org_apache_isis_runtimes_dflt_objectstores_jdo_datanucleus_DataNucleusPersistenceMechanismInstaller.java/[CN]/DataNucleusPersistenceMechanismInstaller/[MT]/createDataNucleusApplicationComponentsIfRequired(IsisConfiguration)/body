{
  if (applicationComponents != null) {
    return;
  }
  final IsisConfiguration dataNucleusConfig=configuration.createSubset(ISIS_CONFIG_PREFIX);
  final Map<String,String> props=dataNucleusConfig.asMap();
  addDataNucleusPropertiesIfRequired(props);
  applicationComponents=new DataNucleusApplicationComponents(props,getSpecificationLoader().allSpecifications());
}
