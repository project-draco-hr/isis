{
  NakedObject transientObject=(NakedObject)view.getContent().getNaked();
  Action action=view.getContent().getSpecification().getObjectAction(Action.USER,"save");
  if (action == null) {
    action=view.getContent().getSpecification().getObjectAction(Action.USER,"persist");
  }
  if (action == null) {
    NakedObjectManager objectManager=NakedObjects.getObjectManager();
    try {
      objectManager.startTransaction();
      objectManager.makePersistent(transientObject);
      objectManager.endTransaction();
    }
 catch (    RuntimeException e) {
      LOG.info("Exception saving " + transientObject + ", aborting transaction");
      try {
        objectManager.abortTransaction();
      }
 catch (      Exception e2) {
        ExceptionHelper.log(ActionTransaction.class,"Failure during abort",e2);
      }
      throw e;
    }
  }
 else {
    transientObject.execute(action,new Naked[0]);
  }
  return transientObject;
}
