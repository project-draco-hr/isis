{
  final PropertyChoicesFacet propertyChoicesFacet=getFacet(PropertyChoicesFacet.class);
  final Object[] pojoOptions=propertyChoicesFacet == null ? null : propertyChoicesFacet.getChoices(ownerAdapter,getSpecificationLookup());
  if (pojoOptions != null) {
    final ObjectAdapter[] options=new ObjectAdapter[pojoOptions.length];
    for (int i=0; i < options.length; i++) {
      options[i]=getAdapterMap().adapterFor(pojoOptions[i]);
    }
    return options;
  }
 else   if (BoundedFacetUtils.isBoundedSet(getSpecification())) {
    final QueryFindAllInstances query=new QueryFindAllInstances(getSpecification().getFullIdentifier());
    final List<ObjectAdapter> allInstancesAdapter=getQuerySubmitter().allMatchingQuery(query);
    final ObjectAdapter[] options=new ObjectAdapter[allInstancesAdapter.size()];
    int j=0;
    for (    final ObjectAdapter adapter : allInstancesAdapter) {
      options[j++]=adapter;
    }
    return options;
  }
  return null;
}
