{
  Request.init(new RequestFowarder(){
    public Serializable executeRemotely(    Request request){
      SimpleRequest clientsRequest=(SimpleRequest)request;
      BinaryTransferableWriter writer=new BinaryTransferableWriter();
      writer.writeString(clientsRequest.getClass().getName());
      clientsRequest.writeData(writer);
      byte[] transferableData=writer.getBinaryData();
      writer.close();
      BinaryTransferableReader reader=new BinaryTransferableReader(transferableData);
      SimpleRequest serversCopyOfRequest=(SimpleRequest)reader.readObject();
      reader.close();
      assertNotSame("two copies",clientsRequest,serversCopyOfRequest);
      assertEquals("hello",serversCopyOfRequest.str);
      assertEquals(189L,serversCopyOfRequest.no);
      writer=new BinaryTransferableWriter();
      serversCopyOfRequest.generateResponse(null);
      transferableData=writer.getBinaryData();
      writer.close();
      reader=new BinaryTransferableReader(transferableData);
      clientsRequest.restoreResponse(reader);
      assertEquals("response abc",clientsRequest.myResponse);
    }
    public void init(){
    }
    public void shutdown(){
    }
  }
);
  SimpleRequest request=new SimpleRequest("hello",189);
  request.execute();
}
