{
  final JSONObject data=new JSONObject();
  final Oid oid=adapter.getOid();
  data.put("_oidType",oid.getClass().getName());
  if (oid instanceof RootOid) {
    RootOid ows=(RootOid)oid;
    data.put("_objectType",ows.getObjectType());
    data.put("_id",enString(ows));
    return data;
  }
  final ObjectSpecification objectSpec=adapter.getSpecification();
  data.put("_objectType",objectSpec.getObjectType());
  if (!(oid instanceof AggregatedOid)) {
    throw new ScimpiException("Unsupported OID type " + oid);
  }
  final AggregatedOid aoid=(AggregatedOid)oid;
  final Oid parentOid=aoid.getParentOid();
  final String aggregatedId=aoid.getLocalId();
  String encodedOid=enString(parentOid,aggregatedId);
  data.put("_id",encodedOid);
  return data;
}
