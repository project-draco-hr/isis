{
  if (state == null) {
    return null;
  }
 else {
    NakedObjectSpecification spec=NakedObjects.getSpecificationLoader().loadSpecification(state.className);
    NakedObjectLoader objectLoader=NakedObjects.getObjectLoader();
    NakedObject object;
    if (getOid() == null) {
      object=objectLoader.recreateTransientInstance(spec);
    }
 else {
      object=objectLoader.recreateAdapterForPersistent(getOid(),spec);
    }
    LOG.debug("recreated object " + object.getOid());
    updateObject(object,ResolveState.UPDATING);
    return object;
  }
}
