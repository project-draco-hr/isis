{
  PojoAdapterFactory loadedObjects=loadedObjects();
synchronized (loadedObjects) {
    NakedObject ref;
    Oid oid=data.oid;
    NakedObjectSpecification nakedClass=NakedObjects.getSpecificationLoader().loadSpecification(data.className);
    if (oid == null) {
      ref=null;
    }
 else     if (loadedObjects.isLoaded(oid)) {
      ref=loadedObjects.getLoadedObject(oid);
    }
 else {
      ref=(NakedObject)nakedClass.acquireInstance();
      ref.setOid(oid);
      loadedObjects.loaded(ref);
    }
    return ref;
  }
}
