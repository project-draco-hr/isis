{
  final AuthenticationSession session=context.getSession();
  if (session == null) {
    throw new NotLoggedInException();
  }
  final String levelName=(String)context.getVariable("level");
  final org.apache.log4j.Level level=org.apache.log4j.Level.toLevel(levelName);
  boolean changeLogged=false;
  if (org.apache.log4j.Level.INFO.isGreaterOrEqual(org.apache.log4j.LogManager.getRootLogger().getLevel())) {
    LOG.info("log level changed to " + level);
    changeLogged=true;
  }
  org.apache.log4j.LogManager.getRootLogger().setLevel(level);
  if (!changeLogged) {
    LOG.info("log level changed to " + level);
  }
  final String view=(String)context.getVariable("view");
  context.setRequestPath(view);
}
