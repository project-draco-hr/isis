{
  NakedObjectSpecification specification=NakedObjects.getSpecificationLoader().loadSpecification(data.getType());
  NakedObject object;
  object=objectLoader.recreateAdapterForPersistent(oid,specification);
  if (data.getFieldContent() != null) {
    object.setOptimisticLock(data.getVersion());
    ResolveState state;
    state=data.hasCompleteData() ? ResolveState.RESOLVING : ResolveState.RESOLVING_PART;
    LOG.debug("restoring existing object (" + state.name() + ") "+ object);
    setupFields(data,objectLoader,object,state,knownTransients);
  }
  return object;
}
