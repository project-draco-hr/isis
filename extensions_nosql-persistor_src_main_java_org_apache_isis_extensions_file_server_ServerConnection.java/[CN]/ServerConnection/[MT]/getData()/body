{
  try {
    StringBuffer buffer=new StringBuffer();
    String line;
    while ((line=reader.readLine()) != null && line.length() != 0) {
      buffer.append(line);
      buffer.append('\n');
    }
    return buffer.toString();
  }
 catch (  IOException e) {
    logFailure();
    throw new RemotingException(e);
  }
}
