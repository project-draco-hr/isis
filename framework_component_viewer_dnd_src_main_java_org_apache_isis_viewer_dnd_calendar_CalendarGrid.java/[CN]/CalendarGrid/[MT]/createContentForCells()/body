{
  final CalendarCellContent[] cellContents=new CalendarCellContent[rows * columns];
  final CollectionContent content=(CollectionContent)getContent();
  for (  final ObjectAdapter element : content.elements()) {
    final Date date=dateFor(element);
    if (date == null) {
      continue;
    }
    final int period=cellLayout.getPeriodFor(date);
    if (period >= 0 && period < cellContents.length) {
      if (cellContents[period] == null) {
        cellContents[period]=new CalendarCellContent(cellLayout.title(period));
      }
      cellContents[period].addElement(element);
    }
  }
  return cellContents;
}
