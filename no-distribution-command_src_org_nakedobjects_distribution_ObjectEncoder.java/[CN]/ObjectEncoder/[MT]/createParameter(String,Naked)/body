{
  if (object == null) {
    return factory.createNullData(type);
  }
  if (object.getSpecification().isObject()) {
    NakedObject nakedObject=(NakedObject)object;
    return createObjectData(nakedObject,ROOT_PERSISTENT_OBJECT_ONLY,persistentGraphDepth,new KnownTransients());
  }
 else   if (object.getSpecification().isValue()) {
    return createValueData(object);
  }
 else {
    throw new IllegalArgumentException("Expected a naked object or a naked value, but got " + object);
  }
}
