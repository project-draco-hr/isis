{
  Data result;
  if (returns == null) {
    result=factory.createNullData("");
  }
 else   if (returns instanceof NakedCollection) {
    result=createCollection((NakedCollection)returns,persistentGraphDepth,new KnownTransients());
  }
 else   if (returns instanceof NakedObject) {
    result=createCompletePersistentGraph((NakedObject)returns);
  }
 else {
    throw new UnknownTypeException(returns);
  }
  return factory.createActionResultData(result,updatesData,persistedTarget,persistedParameters,messages,warnings);
}
