{
  StringBuffer sql=createSelectStatement();
  sql.append(" WHERE ");
  int initialLength=sql.length();
  ObjectAdapter pattern=query.getPattern();
  for (  ObjectAssociation assoc : specification.getAssociations()) {
    ObjectAdapter field=assoc.get(pattern);
    if (field != null) {
      FieldMapping fieldMapping=fieldMappingFor(assoc);
      if (fieldMapping != null) {
        if (sql.length() > initialLength) {
          sql.append(" AND ");
        }
        fieldMapping.appendWhereClause(connector,sql,pattern);
      }
    }
  }
  return loadInstances(connector,spec,completeSelectStatement(sql));
}
