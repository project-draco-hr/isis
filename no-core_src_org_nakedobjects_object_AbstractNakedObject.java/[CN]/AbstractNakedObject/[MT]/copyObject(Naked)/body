{
  if (objectToCopy.getClass() != getClass()) {
    throw new IllegalArgumentException("Copy object can only copy objects of the same type");
  }
  NakedObject object=(NakedObject)objectToCopy;
  FieldSpecification[] fields=getSpecification().getFields();
  for (int i=0; i < fields.length; i++) {
    FieldSpecification field=fields[i];
    if (field instanceof OneToManyAssociationSpecification) {
      ((NakedCollection)field.get(this)).copyObject((NakedCollection)field.get(object));
    }
 else     if (field instanceof OneToOneAssociationSpecification) {
      ((OneToOneAssociationSpecification)field).initData(this,(NakedObject)field.get(object));
    }
 else {
      ((NakedValue)field.get(this)).copyObject((Naked)field.get(object));
    }
  }
}
