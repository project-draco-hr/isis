{
  if (!style.hasCorrespondingFacet(this)) {
    return;
  }
  final CommandContext commandContext=getCommandContext();
  final Command command=commandContext.getCommand();
  owningAssociation.setupCommand(targetAdapter,newValueAdapter);
  final InteractionContext interactionContext=getInteractionContext();
  final Interaction interaction=interactionContext.getInteraction();
  final String propertyId=owningAssociation.getIdentifier().toClassAndNameIdentityString();
  if (command.getExecutor() == Command.Executor.USER && command.getExecuteIn() == org.apache.isis.applib.annotation.Command.ExecuteIn.BACKGROUND) {
    final CommandService commandService=getCommandService();
    if (!commandService.persistIfPossible(command)) {
      throw new IsisException(String.format("Unable to persist command for property '%s'; CommandService does not support persistent commands ",propertyId));
    }
  }
 else {
    final Object target=ObjectAdapter.Util.unwrap(targetAdapter);
    final Object argValue=ObjectAdapter.Util.unwrap(newValueAdapter);
    final Interaction.PropertyArgs propertyArgs=new Interaction.PropertyArgs(propertyId,target,argValue);
    final Interaction.MemberCallable<?> callable=new Interaction.MemberCallable<Interaction.PropertyArgs>(){
      @Override public Object call(      final Interaction.Execution currentExecution,      final Interaction.PropertyArgs propertyArgs11){
        try {
          final Object oldValue=getterFacet.getProperty(targetAdapter,interactionInitiatedBy);
          final Object newValue=ObjectAdapter.Util.unwrap(newValueAdapter);
          final PropertyDomainEvent<?,?> event=domainEventHelper.postEventForProperty(AbstractDomainEvent.Phase.EXECUTING,eventType(),null,getIdentified(),targetAdapter,oldValue,newValue);
          style.invoke(PropertySetterOrClearFacetForDomainEventAbstract.this,owningAssociation,targetAdapter,newValueAdapter,interactionInitiatedBy);
          final Object actualNewValue=getterFacet.getProperty(targetAdapter,interactionInitiatedBy);
          if (!Objects.equal(oldValue,actualNewValue)) {
            domainEventHelper.postEventForProperty(AbstractDomainEvent.Phase.EXECUTED,eventType(),verify(event),getIdentified(),targetAdapter,oldValue,actualNewValue);
          }
          return null;
        }
  finally {
        }
      }
    }
;
    interaction.execute(callable,propertyArgs,getClockService(),command);
    final Interaction.Execution priorExecution=interaction.getPriorExecution();
    final RuntimeException executionExceptionIfAny=priorExecution.getThrew();
    if (executionExceptionIfAny != null) {
      throw executionExceptionIfAny;
    }
  }
}
