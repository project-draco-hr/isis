{
  int baseline=getBaseline();
  int top=baseline - style.getAscent();
  CursorPosition from=selection.from();
  CursorPosition to=selection.to();
  String[] lines=textContent.getDisplayLines();
  int displayFromLine=textContent.getDisplayFromLine();
  int displayToLine=displayFromLine + lines.length;
  for (int i=displayFromLine; i <= displayToLine; i++) {
    if ((i >= from.getLine()) && (i <= to.getLine())) {
      String line=textContent.getText(i);
      int start=0;
      int end=style.stringWidth(line);
      if (from.getLine() == i) {
        int at=Math.min(from.getCharacter(),line.length());
        start=style.stringWidth(line.substring(0,at));
      }
      if (to.getLine() == i) {
        int at=Math.min(to.getCharacter(),line.length());
        end=style.stringWidth(line.substring(0,at));
      }
      canvas.drawSolidRectangle(start + (HPADDING),top,end - start,getText().getLineHeight(),Style.PRIMARY3);
    }
    top+=getText().getLineHeight();
  }
}
