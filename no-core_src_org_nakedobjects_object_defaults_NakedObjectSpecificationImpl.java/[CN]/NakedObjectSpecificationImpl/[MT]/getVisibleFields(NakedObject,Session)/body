{
  if (this.viewFields != null) {
    return viewFields;
  }
  FieldSpecification[] viewFields=new FieldSpecification[fields.length];
  int v=0;
  for (int i=0; i < fields.length; i++) {
    boolean useField=fields[i].canAccess(session,object);
    if (useField) {
      viewFields[v++]=fields[i];
    }
  }
  FieldSpecification[] selectedFields=new FieldSpecification[v];
  for (int i=0; i < selectedFields.length; i++) {
    selectedFields[i]=viewFields[i];
  }
  this.viewFields=selectedFields;
  return selectedFields;
}
