{
  if (reflector == null) {
    throw new NullPointerException("No reflector specified");
  }
  LOG.debug("Init specification " + this);
  this.reflector=reflector;
  NakedObjectSpecificationLoader loader=NakedObjects.getSpecificationLoader();
  if (superclass != null) {
    this.superclass=(NakedObjectSpecificationImpl)loader.loadSpecification(superclass);
    if (this.superclass != null) {
      LOG.debug("  Superclass " + superclass);
      this.superclass.subclasses.addSubclass(this);
    }
  }
  this.interfaces=new NakedObjectSpecificationImpl[interfaces.length];
  for (int i=0; i < interfaces.length; i++) {
    this.interfaces[i]=(NakedObjectSpecificationImpl)loader.loadSpecification(interfaces[i]);
    this.interfaces[i].subclasses.addSubclass(this);
  }
  if (isValue() && fields.length > 0) {
    LOG.warn("Naked values cannot have fields, they will be ignored");
  }
 else {
    this.fields=fields;
  }
  this.objectActions=objectActions;
  this.classActions=classActions;
  this.title=title;
  this.isLookup=reflector.isLookup();
  this.isObject=reflector.isObject();
  shortName=reflector.shortName();
}
