{
  final EntityTransaction transaction=getEntityManager().getTransaction();
  if (transaction.isActive()) {
    throw new IllegalStateException("Transaction already active");
  }
  transaction.begin();
}
