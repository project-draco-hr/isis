{
  int width=0;
  final StringTokenizer lines=new StringTokenizer(text,"\n\r");
  while (lines.hasMoreTokens()) {
    final String line=lines.nextToken();
    final StringTokenizer words=new StringTokenizer(line," ");
    final StringBuffer l=new StringBuffer();
    int lineWidth=0;
    while (words.hasMoreTokens()) {
      final String nextWord=words.nextToken();
      final int wordWidth=stringWidth(nextWord);
      lineWidth+=wordWidth;
      if (lineWidth >= maxWidth) {
        return maxWidth;
      }
      if (lineWidth > width) {
        width=lineWidth;
      }
      l.append(nextWord);
      l.append(" ");
      lineWidth+=stringWidth(" ");
    }
  }
  return width;
}
