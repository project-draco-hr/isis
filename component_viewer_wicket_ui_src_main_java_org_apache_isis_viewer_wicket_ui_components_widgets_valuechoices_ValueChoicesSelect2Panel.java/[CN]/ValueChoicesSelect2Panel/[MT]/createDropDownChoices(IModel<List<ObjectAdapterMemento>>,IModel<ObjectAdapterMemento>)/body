{
  final String id=ID_VALUE_ID;
  ChoiceProvider<ObjectAdapterMemento> provider=new TextChoiceProvider<ObjectAdapterMemento>(){
    private static final long serialVersionUID=1L;
    @Override protected String getDisplayText(    ObjectAdapterMemento choice){
      final ObjectAdapter objectAdapter=choice.getObjectAdapter(ConcurrencyChecking.NO_CHECK);
      return objectAdapter.titleString(null);
    }
    @Override protected Object getId(    ObjectAdapterMemento choice){
      final ObjectAdapter objectAdapter=choice.getObjectAdapter(ConcurrencyChecking.NO_CHECK);
      return objectAdapter.getObject().toString();
    }
    @Override public void query(    String term,    int page,    com.vaynberg.wicket.select2.Response<ObjectAdapterMemento> response){
      response.addAll(choicesMementos.getObject());
    }
    @Override public Collection<ObjectAdapterMemento> toChoices(    final Collection<String> ids){
      final List<ObjectAdapterMemento> mementos=choicesMementos.getObject();
      Predicate<ObjectAdapterMemento> predicate=new Predicate<ObjectAdapterMemento>(){
        @Override public boolean apply(        ObjectAdapterMemento input){
          final String id=(String)getId(input);
          return ids.contains(id);
        }
      }
;
      return Collections2.filter(mementos,predicate);
    }
  }
;
  final Select2Choice<ObjectAdapterMemento> select2Choice=new Select2Choice<ObjectAdapterMemento>(id,modelObject,provider);
  return select2Choice;
}
