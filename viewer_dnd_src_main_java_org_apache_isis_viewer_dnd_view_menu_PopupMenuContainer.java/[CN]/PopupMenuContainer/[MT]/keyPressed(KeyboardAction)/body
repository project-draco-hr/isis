{
  if (submenu != null) {
    final int keyCode=key.getKeyCode();
    if (keyCode == KeyEvent.VK_ESCAPE) {
      markDamaged();
      invalidateLayout();
      submenu=null;
      key.consume();
    }
 else     if (getParent() != null && keyCode == KeyEvent.VK_LEFT) {
      markDamaged();
      invalidateLayout();
      submenu=null;
      key.consume();
    }
 else {
      submenu.keyPressed(key);
    }
  }
 else {
    menu.keyPressed(key);
  }
}
