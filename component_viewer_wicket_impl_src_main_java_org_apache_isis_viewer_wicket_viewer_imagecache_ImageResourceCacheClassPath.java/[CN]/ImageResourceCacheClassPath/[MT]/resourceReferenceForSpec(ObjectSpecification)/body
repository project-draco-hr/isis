{
  if (spec == null) {
    return fallbackResourceReference();
  }
  ResourceReference resourceReference=resourceReferenceBySpec.get(spec);
  if (resourceReference != null) {
    return resourceReference;
  }
  resourceReference=lookupResourceReferenceFor(spec);
  final ObjectSpecId specId=spec.getSpecId();
  resourceReferenceBySpec.put(specId,resourceReference);
  return resourceReference;
}
