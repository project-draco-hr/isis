{
  if (WrapperFactory.class.isAssignableFrom(cls)) {
    return (T)wrapperFactory();
  }
  final T service=dsp.getService(cls);
  if (service == null) {
    throw new IllegalStateException("No service of type " + cls.getSimpleName() + " available");
  }
  return service;
}
