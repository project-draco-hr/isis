{
  final Map<String,ObjectSpecification> specByObjectType=Maps.newHashMap();
  for (  final ObjectSpecification objSpec : allSpecifications()) {
    final ObjectTypeFacet facet=objSpec.getFacet(ObjectTypeFacet.class);
    if (facet == null) {
      continue;
    }
    final String objectTypeValue=facet.value();
    final ObjectSpecification existingSpec=specByObjectType.put(objectTypeValue,objSpec);
    if (existingSpec == null) {
      continue;
    }
    throw new MetaModelInvalidException(MessageFormat.format("Cannot have two entities with same object type (@ObjectType facet or equivalent) Value; " + "both {0} and {1} are annotated with value of ''{2}''.",existingSpec.getFullIdentifier(),objSpec.getFullIdentifier(),objectTypeValue));
  }
  getCache().setCacheByObjectType(specByObjectType);
}
