{
  final int numberOfEvents=entries.length;
  final ReferenceData[] data=new ReferenceData[numberOfEvents];
  for (int i=0; i < numberOfEvents; i++) {
switch (entries[i].getType()) {
case ClientTransactionEvent.ADD:
      data[i]=encoder.encodeMakePersistentGraph(entries[i].getObject(),knownObjects);
    break;
case ClientTransactionEvent.CHANGE:
  data[i]=encoder.encodeGraphForChangedObject(entries[i].getObject(),knownObjects);
break;
case ClientTransactionEvent.DELETE:
data[i]=encoder.encodeIdentityData(entries[i].getObject());
break;
}
}
return data;
}
