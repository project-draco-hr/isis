{
  final RequestContext context=request.getContext();
  if (context.isDebugDisabled()) {
    return;
  }
  if (request.isRequested("always") || context.getDebug() == RequestContext.Debug.ON) {
    request.appendHtml("<div class=\"debug\">");
    request.appendHtml("<pre>");
    final String id=request.getOptionalProperty("object");
    final ObjectAdapter object=context.getMappedObjectOrResult(id);
    final ObjectSpecification specification=object.getSpecification();
    String type=request.getOptionalProperty(TYPE,"details");
    if (type.equals("graph")) {
      specificationGraph(request,specification,null,new ArrayList<ObjectSpecification>(),0);
    }
 else     if (type.equals("details")) {
      specificationDetails(request,specification);
    }
 else {
      request.appendHtml("invalid type: " + type);
    }
    request.appendHtml("</pre>");
    request.appendHtml("</div>");
  }
}
