{
  task.checkInstances(context,objects);
  int size=0;
  for (int i=0; i < objects.length; i++) {
    if (objects[i] != null) {
      size++;
    }
  }
  final String[] instances=new String[size];
  final String[] ids=new String[size];
  int selectedIndex=-1;
  for (int i=0, j=0; i < objects.length; i++) {
    final ObjectAdapter element=objects[i];
    if (element != null) {
      instances[j]=element.titleString();
      ids[j]=context.mapObject(element);
      if (ids[j].equals(currentEntry)) {
        selectedIndex=i;
      }
      j++;
    }
  }
  form.addLookup(fieldLabel,fieldDescription,fieldId,selectedIndex,instances,ids,required,errorMessage);
}
