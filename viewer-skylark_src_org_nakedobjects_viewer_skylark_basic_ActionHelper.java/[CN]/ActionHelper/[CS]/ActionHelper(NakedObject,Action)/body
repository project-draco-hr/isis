{
  this.target=target;
  this.action=action;
  int numberParameters=action.parameters().length;
  parameters=new Naked[numberParameters];
  ActionParameterSet parameterHints=target.getParameters(ClientSession.getSession(),action);
  Object[] defaultValues;
  if (parameterHints != null) {
    labels=parameterHints.getParameterLabels();
    defaultValues=parameterHints.getDefaultParameterValues();
  }
 else {
    labels=new String[numberParameters];
    defaultValues=new Naked[numberParameters];
  }
  Naked[] parameterValues;
  Naked[] values;
  parameterTypes=action.parameters();
  values=new Naked[parameterTypes.length];
  for (int i=0; i < parameterTypes.length; i++) {
    if (parameterTypes[i].isValue()) {
      values[i]=parameterTypes[i].acquireInstance();
    }
 else {
      values[i]=null;
    }
  }
  parameterValues=new Naked[parameterTypes.length];
  for (int i=0; i < parameterValues.length; i++) {
    parameterValues[i]=values[i];
  }
  for (int i=0; i < numberParameters; i++) {
    NakedObjectSpecification type=parameterTypes[i];
    labels[i]=labels[i] == null ? type.getShortName() : labels[i];
    parameters[i]=defaultValues[i] == null ? parameterValues[i] : NakedObjects.getPojoAdapterFactory().createAdapter(defaultValues[i]);
  }
}
