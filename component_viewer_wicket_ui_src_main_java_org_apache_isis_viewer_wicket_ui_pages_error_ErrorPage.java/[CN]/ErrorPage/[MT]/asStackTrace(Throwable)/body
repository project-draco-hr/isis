{
  List<Detail> stackTrace=Lists.newArrayList();
  List<Throwable> causalChain=Throwables.getCausalChain(ex);
  for (  Throwable cause : causalChain) {
    stackTrace.add(new Detail(Detail.Type.EXCEPTION_CLASS_NAME,cause.getClass().getName()));
    stackTrace.add(new Detail(Detail.Type.EXCEPTION_MESSAGE,cause.getMessage()));
    addStackTraceElements(cause,stackTrace);
    cause=cause.getCause();
  }
  return stackTrace;
}
