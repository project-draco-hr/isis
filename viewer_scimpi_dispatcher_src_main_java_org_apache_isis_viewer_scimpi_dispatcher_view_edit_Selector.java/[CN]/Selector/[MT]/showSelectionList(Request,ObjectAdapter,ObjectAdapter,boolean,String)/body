{
  String field=request.getRequiredProperty(FIELD);
  CollectionFacet facet=(CollectionFacet)collection.getSpecification().getFacet(CollectionFacet.class);
  if (facet.size(collection) == 1 && !allowNotSet) {
    return onlyItem(request,field,collection,facet);
  }
 else   if (type.equals("radio")) {
    return radioButtonList(request,field,allowNotSet,collection,selectedItem,facet);
  }
 else   if (type.equals("list")) {
    String size=request.getOptionalProperty("size","5");
    return dropdownList(request,field,allowNotSet,collection,selectedItem,size,facet);
  }
 else   if (type.equals("dropdown")) {
    return dropdownList(request,field,allowNotSet,collection,selectedItem,null,facet);
  }
 else {
    throw new UnknownTypeException(type);
  }
}
