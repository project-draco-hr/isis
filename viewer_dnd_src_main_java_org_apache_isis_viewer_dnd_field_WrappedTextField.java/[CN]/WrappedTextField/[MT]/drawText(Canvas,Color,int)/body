{
  int baseline=getBaseline();
  final String[] lines=textContent.getDisplayLines();
  final int cursorLine=cursor.getLine() - textContent.getDisplayFromLine();
  for (int i=0; i < lines.length; i++) {
    final String chars=lines[i];
    if (chars == null) {
      throw new IsisException();
    }
    if (chars.endsWith("\n")) {
      throw new RuntimeException();
    }
    if (hasFocus() && canChangeValue().isAllowed() && cursorLine == i) {
      final int at=Math.min(cursor.getCharacter(),chars.length());
      final int pos=style.stringWidth(chars.substring(0,at)) + HPADDING;
      canvas.drawLine(pos,(baseline + style.getDescent()),pos,baseline - style.getAscent(),Toolkit.getColor(ColorsAndFonts.COLOR_TEXT_CURSOR));
    }
    canvas.drawText(chars,HPADDING,baseline,textColor,style);
    baseline+=getText().getLineHeight();
  }
}
