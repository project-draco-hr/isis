{
  final PublishingService publishingService=servicesInjectorSpi.lookupService(PublishingService.class);
  if (publishingService == null) {
    return null;
  }
  EventSerializer eventSerializer=servicesInjectorSpi.lookupService(EventSerializer.class);
  if (eventSerializer == null) {
    eventSerializer=newSimpleEventSerializer();
  }
  PublishedObject.PayloadFactory objectPayloadFactory=servicesInjectorSpi.lookupService(PublishedObject.PayloadFactory.class);
  if (objectPayloadFactory == null) {
    objectPayloadFactory=newDefaultObjectPayloadFactory();
  }
  PublishedAction.PayloadFactory actionPayloadFactory=servicesInjectorSpi.lookupService(PublishedAction.PayloadFactory.class);
  if (actionPayloadFactory == null) {
    actionPayloadFactory=newDefaultActionPayloadFactory();
  }
  return new PublishingServiceWithDefaultPayloadFactories(publishingService,objectPayloadFactory,actionPayloadFactory);
}
