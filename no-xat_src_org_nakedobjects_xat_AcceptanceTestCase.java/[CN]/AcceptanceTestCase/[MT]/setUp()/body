{
  BasicConfigurator.configure();
  LogManager.getRootLogger().setLevel(Level.ERROR);
  ConfigurationFactory.setConfiguration(new Configuration("xat.properties"));
  PropertyConfigurator.configure(ConfigurationFactory.getConfiguration().getProperties("log4j"));
  Logger.getLogger(AcceptanceTestCase.class).debug("XAT Logging enabled - new test: " + getName());
  if (testObjectFactory == null) {
    testObjectFactory=(TestObjectFactory)ComponentLoader.loadComponent(TEST_OBJECT_FACTORY,NonDocumentingTestObjectFactory.class,TestObjectFactory.class);
  }
  documentor=testObjectFactory.getDocumentor();
  documentor.start();
  String className=getClass().getName();
  String methodName=getName().substring(4);
  testObjectFactory.testStarting(className,methodName);
  explorationSetUp=explorationSetup();
  ClientSession.setSession(new Session());
  Session session=ClientSession.getSession();
  setUpFixtures();
  try {
    explorationSetUp.installFixtures();
    String[] cls=explorationSetUp.getClasses();
    for (int i=0; i < cls.length; i++) {
      NakedObjectSpecification nc=NakedObjectSpecificationLoader.getInstance().loadSpecification(cls[i]);
      NakedClass spec=new NakedClass(cls[i]);
      TestClass view=testObjectFactory.createTestClass(session,spec);
      classes.put(nc.getFullName().toLowerCase(),view);
    }
  }
 catch (  Exception e) {
    e.printStackTrace();
    objectManager.shutdown();
    throw e;
  }
}
