{
  toDoItemSubscriptions.reset();
  toDoItem.add(otherToDoItem);
  @SuppressWarnings("unchecked") final List<EventObject> receivedEvents=toDoItemSubscriptions.receivedEvents();
  assertThat(receivedEvents.size(),is(7));
  assertThat(receivedEvents.get(0) instanceof ActionInteractionEvent,is(true));
  assertThat(receivedEvents.get(1) instanceof CollectionInteractionEvent,is(true));
  assertThat(receivedEvents.get(2) instanceof CollectionInteractionEvent,is(true));
  assertThat(receivedEvents.get(3) instanceof ActionInteractionEvent,is(true));
  assertThat(receivedEvents.get(4) instanceof ActionInteractionEvent,is(true));
  assertThat(receivedEvents.get(5) instanceof ActionInteractionEvent,is(true));
  assertThat(receivedEvents.get(6) instanceof ActionInteractionEvent,is(true));
  final CollectionInteractionEvent<ToDoItem,ToDoItem> ciEv=(CollectionInteractionEvent<ToDoItem,ToDoItem>)toDoItemSubscriptions.mostRecentlyReceivedEvent(CollectionInteractionEvent.class);
  assertThat(ciEv,is(notNullValue()));
  assertThat(ciEv.getSource(),is(equalTo(unwrap(toDoItem))));
  assertThat(ciEv.getIdentifier().getMemberName(),is("dependencies"));
  assertThat(ciEv.getOf(),is(CollectionInteractionEvent.Of.ADD_TO));
  assertThat(ciEv.getValue(),is(unwrap(otherToDoItem)));
  final ActionInteractionEvent<ToDoItem> aiEv=(ActionInteractionEvent<ToDoItem>)toDoItemSubscriptions.mostRecentlyReceivedEvent(ActionInteractionEvent.class);
  assertThat(aiEv,is(notNullValue()));
  assertThat(aiEv.getSource(),is(equalTo(unwrap(toDoItem))));
  assertThat(aiEv.getIdentifier().getMemberName(),is("add"));
  assertThat(aiEv.getArguments().size(),is(1));
  assertThat(aiEv.getArguments().get(0),is(unwrap((Object)otherToDoItem)));
  assertThat(aiEv.getCommand(),is(notNullValue()));
}
