{
  t.addCommand(createSaveCommand(object1,"command 1"));
  t.addCommand(createCommandThatAborts(object2,"command 2"));
  t.addCommand(createSaveCommand(object1,"command 3"));
  try {
    t.commit();
    fail();
  }
 catch (  final ObjectPersistenceException expected) {
  }
  os.assertAction(0,"execute command 1");
  os.assertAction(1,"execute command 2");
}
