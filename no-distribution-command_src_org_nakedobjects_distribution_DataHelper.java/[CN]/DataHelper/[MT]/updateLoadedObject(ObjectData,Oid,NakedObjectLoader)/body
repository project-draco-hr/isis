{
  NakedObject object;
  object=objectLoader.getAdapterFor(oid);
  if (data.getFieldContent() != null) {
    object.setOptimisticLock(data.getVersion());
    ResolveState state=nextState(object.getResolveState(),data.hasCompleteData());
    if (state != null) {
      LOG.debug("updating existing object (" + state.name() + ") "+ object);
      setupFields(data,objectLoader,object,state);
      updateNotifier.addDirty(object);
    }
  }
 else {
    if (data.getVersion() != null && data.getVersion().different(object.getVersion())) {
    }
  }
  return object;
}
