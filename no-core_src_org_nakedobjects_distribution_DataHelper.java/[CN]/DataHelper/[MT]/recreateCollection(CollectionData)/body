{
  Oid oid=data.getOid();
  String type=data.getType();
  NakedObjectSpecification specification=NakedObjects.getSpecificationLoader().loadSpecification(type);
  NakedObjectLoader objectLoader=NakedObjects.getObjectLoader();
  NakedCollection collection;
  collection=objectLoader.recreateCollection(specification);
  collection.setOid(oid);
  if (data.getElements() == null) {
    return collection;
  }
 else {
    ObjectData[] elements=data.getElements();
    Object[] initData=new Object[elements.length];
    for (int i=0; i < elements.length; i++) {
      NakedObject element=recreateObject(elements[i]);
      initData[i]=element.getObject();
    }
    collection.init(initData);
    return collection;
  }
}
