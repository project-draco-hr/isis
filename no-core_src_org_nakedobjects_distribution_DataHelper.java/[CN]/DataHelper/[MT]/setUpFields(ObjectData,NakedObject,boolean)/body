{
  Object[] fieldContent=data.getFieldContent();
  if (fieldContent != null && fieldContent.length > 0) {
    NakedObjectField[] fields=object.getSpecification().getFields();
    for (int i=0; i < fields.length; i++) {
      if (fieldContent[i] instanceof NullData && !completeData) {
        continue;
      }
      if (fields[i].isCollection()) {
        if (fieldContent[i] != null) {
          CollectionData collection=(CollectionData)fieldContent[i];
          int size=collection.getElements().length;
          if (completeData || size > 0) {
            NakedObject[] instances=new NakedObject[size];
            for (int j=0; j < instances.length; j++) {
              instances[j]=restoreObject(((ObjectData)collection.getElements()[j]));
            }
            object.initAssociation((OneToManyAssociation)fields[i],instances);
          }
        }
      }
 else       if (fields[i].isValue()) {
        if (fieldContent[i] != null) {
          object.initValue((OneToOneAssociation)fields[i],fieldContent[i] instanceof NullData ? null : ((ValueData)fieldContent[i]).getValue());
        }
      }
 else {
        if (fieldContent[i] != null) {
          NakedObjectAssociation field=(NakedObjectAssociation)fields[i];
          NakedObject associate;
          if (fieldContent[i] instanceof NullData) {
            associate=null;
          }
 else {
            associate=restoreObject((ObjectData)fieldContent[i]);
          }
          object.initAssociation(field,associate);
        }
      }
    }
  }
}
