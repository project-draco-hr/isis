{
  final ContextForMojo context=new ContextForMojo(mavenProject,getLog());
  final Plugin plugin=MavenProjects.lookupPlugin(mavenProject,CURRENT_PLUGIN_KEY);
  final AppManifest manifest=InstanceUtil.createInstance(this.appManifest,AppManifest.class);
  final IsisSystem isisSystem=new IsisSystem(manifest);
  try {
    isisSystem.init();
    if (!isisSystem.isMetaModelValid()) {
      MetaModelInvalidException metaModelInvalidException=IsisContext.getMetaModelInvalidExceptionIfAny();
      Set<String> validationErrors=metaModelInvalidException.getValidationErrors();
      context.throwFailureException(validationErrors.size() + " meta-model problems found.",validationErrors);
      return;
    }
    IsisContext.getSessionFactory().doInSession(new Runnable(){
      @Override public void run(){
        try {
          doExecute(context,isisSystem);
        }
 catch (        IOException e) {
          ;
        }
catch (        MojoFailureException e) {
          throw new RuntimeException(e);
        }
      }
    }
);
  }
 catch (  RuntimeException e) {
    if (e.getCause() instanceof MojoFailureException) {
      throw (MojoFailureException)e.getCause();
    }
    throw e;
  }
 finally {
    isisSystem.shutdown();
  }
}
