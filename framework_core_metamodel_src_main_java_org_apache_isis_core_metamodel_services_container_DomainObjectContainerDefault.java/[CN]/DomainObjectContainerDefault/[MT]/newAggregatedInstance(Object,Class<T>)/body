{
  final ObjectSpecification spec=getSpecificationLookup().loadSpecification(ofClass);
  if (!spec.isAggregated()) {
    throw new IsisException("Type must be annotated as @Aggregated: " + ofClass);
  }
  final ObjectAdapter adapter=doCreateAggregatedInstance(spec,parent);
  if (adapter.getOid() instanceof AggregatedOid) {
    return (T)adapter.getObject();
  }
 else {
    throw new IsisException("Object instantiated but was not given a AggregatedOid (does the configured object store support aggregates?): " + ofClass);
  }
}
