{
  NakedObjectSpecification nc=((ObjectContent)content).getObject().getSpecification();
  FieldSpecification[] flds=nc.getFields();
  FieldSpecification timePeriodField=null;
  FieldSpecification colorField=null;
  for (int i=0; i < flds.length; i++) {
    FieldSpecification field=flds[i];
    if (field.getType().isOfType(NakedObjectSpecificationLoader.getInstance().loadSpecification(TimePeriod.class))) {
      LOG.debug("Found TimePeriod field " + field);
      timePeriodField=field;
    }
    if (field.getType().isOfType(NakedObjectSpecificationLoader.getInstance().loadSpecification(org.nakedobjects.object.defaults.value.Color.class))) {
      LOG.debug("Found Color field " + field);
      colorField=field;
    }
  }
  if (timePeriodField == null) {
    throw new NakedObjectRuntimeException("Can't create Shedule view without a TimePeriod");
  }
 else {
    return new SimpleIdentifier(new ScheduleBlockView(content,this,axis,timePeriodField,colorField));
  }
}
