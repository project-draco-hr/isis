{
  super(type(),holder);
  this.semanticsProvider=semanticsProvider;
  this.context=context;
  if (!isValid() && !addFacetsIfInvalid.shouldAddFacetsIfInvalid()) {
    return;
  }
  facetHolder.addFacet((Facet)this);
  final boolean immutable=semanticsProvider != null ? semanticsProvider.isImmutable() : true;
  if (immutable) {
    facetHolder.addFacet(new ImmutableFacetViaValueSemantics(holder));
  }
  final boolean equalByContent=semanticsProvider != null ? semanticsProvider.isEqualByContent() : true;
  if (equalByContent) {
    facetHolder.addFacet(new EqualByContentFacetViaValueSemantics(holder));
  }
  if (semanticsProvider != null) {
    final EncoderDecoder<?> encoderDecoder=semanticsProvider.getEncoderDecoder();
    if (encoderDecoder != null) {
      facetHolder.addFacet(new EncodableFacetUsingEncoderDecoder(encoderDecoder,holder,getAdapterMap(),getDependencyInjector()));
    }
    final Parser<?> parser=semanticsProvider.getParser();
    if (parser != null) {
      facetHolder.addFacet(new ParseableFacetUsingParser(parser,holder,getAuthenticationSessionProvider(),getDependencyInjector(),getAdapterMap()));
      facetHolder.addFacet(new TitleFacetUsingParser(parser,holder,getDependencyInjector()));
      facetHolder.addFacet(new TypicalLengthFacetUsingParser(parser,holder,getDependencyInjector()));
    }
    final DefaultsProvider<?> defaultsProvider=semanticsProvider.getDefaultsProvider();
    if (defaultsProvider != null) {
      facetHolder.addFacet(new DefaultedFacetUsingDefaultsProvider(defaultsProvider,holder,getDependencyInjector()));
    }
  }
}
