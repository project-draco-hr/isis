{
  final PublishedAction.PayloadFactory payloadFactoryToUse=payloadFactoryIfAny != null ? payloadFactoryIfAny : defaultActionPayloadFactory;
  ObjectAdapter target=currentInvocation.getTarget();
  ObjectAdapter result=currentInvocation.getResult();
  List<ObjectAdapter> parameters=currentInvocation.getParameters();
  final EventPayload payload=payloadFactoryToUse.payloadFor(currentInvocation.getAction().getIdentifier(),ObjectAdapterUtils.unwrapObject(undeletedElseEmpty(target)),ObjectAdapterUtils.unwrapObjects(undeletedElseEmpty(parameters)),ObjectAdapterUtils.unwrapObject(undeletedElseEmpty(result)));
  payload.withStringifier(stringifier);
  publishingService.publish(metadata,payload);
}
