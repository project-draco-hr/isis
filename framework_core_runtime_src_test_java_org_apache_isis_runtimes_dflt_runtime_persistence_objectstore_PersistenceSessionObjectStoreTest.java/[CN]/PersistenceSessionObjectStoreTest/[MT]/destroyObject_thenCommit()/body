{
  final Sequence tran=context.sequence("tran");
  context.checking(new Expectations(){
{
      one(mockObjectStore).startTransaction();
      inSequence(tran);
      one(mockObjectStore).createDestroyObjectCommand(persistentAdapter);
      inSequence(tran);
      will(returnValue(destroyObjectCommand));
      one(mockObjectStore).execute(with(IsisMatchers.listContaining((PersistenceCommand)destroyObjectCommand)));
      inSequence(tran);
      one(mockObjectStore).endTransaction();
      inSequence(tran);
    }
  }
);
  transactionManager.startTransaction();
  persistenceSession.destroyObject(persistentAdapter);
  transactionManager.endTransaction();
}
