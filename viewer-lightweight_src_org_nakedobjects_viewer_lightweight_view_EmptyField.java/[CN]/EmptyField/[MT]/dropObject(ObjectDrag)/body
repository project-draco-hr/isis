{
  DragSource dragSource=drag.getSource();
  if (canDrop(drag)) {
    NakedObject source=((ObjectView)dragSource).getObject();
    NakedObject target=((ObjectView)getParent()).getObject();
    OneToOneAssociation field=(OneToOneAssociation)getFieldOf();
    if (field.getType().isAssignableFrom(source.getClass())) {
      field.setAssociation(target,source);
    }
 else {
      RootView view=ViewFactory.getViewFactory().createRootView(source);
      view.setLocation(drag.getRelativeLocation());
      getWorkspace().addRootView(view);
    }
  }
}
