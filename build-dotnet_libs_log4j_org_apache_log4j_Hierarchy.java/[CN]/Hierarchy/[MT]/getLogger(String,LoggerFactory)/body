{
  CategoryKey key=new CategoryKey(name);
  Logger logger;
synchronized (ht) {
    Object o=ht.get(key);
    if (o == null) {
      logger=factory.makeNewLoggerInstance(name);
      logger.setHierarchy(this);
      ht.put(key,logger);
      updateParents(logger);
      return logger;
    }
 else     if (o instanceof Logger) {
      return (Logger)o;
    }
 else     if (o instanceof ProvisionNode) {
      logger=factory.makeNewLoggerInstance(name);
      logger.setHierarchy(this);
      ht.put(key,logger);
      updateChildren((ProvisionNode)o,logger);
      updateParents(logger);
      return logger;
    }
 else {
      return null;
    }
  }
}
