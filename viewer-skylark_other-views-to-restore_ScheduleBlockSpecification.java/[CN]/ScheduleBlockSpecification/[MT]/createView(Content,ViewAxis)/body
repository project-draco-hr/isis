{
  NakedObjectSpecification nc=((ObjectContent)content).getObject().getSpecification();
  NakedObjectField[] flds=nc.getFields();
  NakedObjectField timePeriodField=null;
  NakedObjectField colorField=null;
  for (int i=0; i < flds.length; i++) {
    NakedObjectField field=flds[i];
    if (field.getType().isOfType(NakedObjects.getSpecificationLoader().loadSpecification(TimePeriod.class))) {
      LOG.debug("Found TimePeriod field " + field);
      timePeriodField=field;
    }
    if (field.getType().isOfType(NakedObjects.getSpecificationLoader().loadSpecification(org.nakedobjects.application.value.Color.class))) {
      LOG.debug("Found Color field " + field);
      colorField=field;
    }
  }
  if (timePeriodField == null) {
    throw new NakedObjectRuntimeException("Can't create Shedule view without a TimePeriod");
  }
 else {
    return new SimpleIdentifier(new ScheduleBlockView(content,this,axis,timePeriodField,colorField));
  }
}
