{
  for (int i=0; i < formFields.length; i++) {
    String fieldName=formFields[i].getName();
    ObjectAssociation field=object.getSpecification().getAssociation(fieldName);
    InputField inputField=formFields[i];
    if (field.isVisible(IsisContext.getAuthenticationSession(),object).isAllowed()) {
      IsisContext.getPersistenceSession().resolveField(object,field);
      ObjectAdapter fieldValue=field.get(object);
      if (inputField.isEditable()) {
        String value=getValue(context,fieldValue);
        if (!value.equals("") || inputField.getValue() == null) {
          inputField.setValue(value);
        }
      }
 else {
        String entry=getValue(context,fieldValue);
        inputField.setHtml(entry);
        inputField.setType(InputField.HTML);
      }
      if (field.getSpecification().getFacet(ParseableFacet.class) == null) {
        if (fieldValue != null) {
          String entry="<img class=\"small-icon\" src=\"" + context.imagePath(field.getSpecification()) + "\" alt=\""+ field.getSpecification().getShortIdentifier()+ "\"/>"+ fieldValue.titleString();
          inputField.setHtml(entry);
        }
 else {
          String entry="<em>none specified</em>";
          inputField.setHtml(entry);
        }
      }
    }
  }
}
