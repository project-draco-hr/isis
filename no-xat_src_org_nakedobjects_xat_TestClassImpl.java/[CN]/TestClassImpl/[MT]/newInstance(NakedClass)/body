{
  NakedObject object;
  NakedObjectContext context=NakedObjectContext.getDefaultContext();
  try {
    object=context.getObjectManager().createTransientInstance(cls.forObjectType());
    object.setContext(context);
    object.getContext().makePersistent(object);
    object.created();
    object.getContext().getObjectManager().saveChanges();
  }
 catch (  NotPersistableException e) {
    NakedError error=context.getObjectManager().generatorError("Failed to create instance of " + cls.forObjectType().getFullName(),e);
    object=PojoAdapter.createNOAdapter(error);
    System.out.println("Failed to create instance of " + cls.forObjectType().getFullName());
    e.printStackTrace();
  }
  return object;
}
