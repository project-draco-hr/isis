{
  this.context=context;
  setForObject(object);
  fields=new Hashtable();
  if (object != null) {
    viewCache.put(object,this);
    Field[] a=object.getNakedClass().getFields();
    for (int i=0; i < a.length; i++) {
      Field att=a[i];
      if (att instanceof Association) {
        TestObject associatedView=null;
        NakedObject associate=(NakedObject)a[i].get(object);
        if (null != associate) {
          associatedView=(TestObject)viewCache.get(associate);
        }
        if (null == associatedView) {
          associatedView=factory().createTestObject(context,associate,viewCache);
        }
        fields.put(a[i].getName(),associatedView);
      }
 else {
        fields.put(att.getName(),factory().createTestValue(object,(Value)att));
      }
    }
  }
}
