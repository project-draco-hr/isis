{
  assertFieldExists(fieldName);
  Naked actualObject=getField(fieldName).getForObject();
  if (expectedView == null) {
    if (actualObject instanceof InternalCollection) {
      int size=((InternalCollection)actualObject).size();
      if (size > 0) {
        Assert.fail(expected(message) + " " + fieldName+ " collection to contain zero elements, but found "+ size);
      }
    }
 else     if (actualObject != null) {
      Assert.fail(expected(message) + " an empty field, but found " + actualObject);
    }
  }
 else {
    Naked expectedObject=expectedView.getForObject();
    if (actualObject == null) {
      if (expectedObject != null)       Assert.fail(expected(message) + expectedObject + "  but found an empty field");
    }
 else     if (actualObject instanceof InternalCollection) {
      if (!((InternalCollection)actualObject).contains((NakedObject)expectedObject)) {
        Assert.fail(expected(message) + " " + fieldName+ " collection to contain "+ expectedObject);
      }
    }
 else     if (!actualObject.equals(expectedObject)) {
      Assert.fail(expected(message) + " object of " + expectedObject+ " but got "+ actualObject);
    }
  }
}
