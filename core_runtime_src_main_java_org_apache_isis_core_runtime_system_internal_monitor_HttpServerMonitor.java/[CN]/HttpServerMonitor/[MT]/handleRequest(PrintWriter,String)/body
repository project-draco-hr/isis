{
  if (request == null || request.length() == 0) {
    LOG.info("Connection dropped");
    return false;
  }
  final StringTokenizer st=new StringTokenizer(request);
  if (st.countTokens() != 3) {
    httpErrorResponse(writer,444,"Unparsable input " + request);
    return false;
  }
  final String type=st.nextToken();
  if (!type.equals("GET")) {
    httpErrorResponse(writer,400,"Invalid method " + type);
    return false;
  }
  String query=st.nextToken();
  query=URLDecoder.decode(query,"UTF-8");
  if (query.equals("/")) {
    query="/monitor";
  }
  if (query.startsWith("/monitor")) {
    query=query.substring("/monitor".length());
    if (query.startsWith("?")) {
      query=query.substring(1);
    }
    monitor.writeHtmlPage(query,writer);
  }
 else {
    httpErrorResponse(writer,404,"Failed to find " + query);
    writer.println("[Request: HTTP/1.0 200");
    writer.println("Content-Type: text/html");
    writer.println("]");
  }
  return false;
}
