{
  context.checking(new Expectations(){
{
      one(commandContext).createStateWriter(specification.getFullIdentifier());
      will(returnValue(writer));
      one(keyCreator).key(RootOidDefault.create(objectType,"" + 3));
      will(returnValue("3"));
      one(writer).writeId("3");
      one(writer).writeType(specification.getFullIdentifier());
      one(writer).writeField("name","ENCFred Smith");
      one(writer).writeField("size","ENC108");
      one(writer).writeField("nullable",null);
      one(writer).writeVersion(null,"2");
      one(writer).writeUser("username");
      one(writer).writeTime("1057");
      one(writer).writeEncryptionType("etc1");
      one(commandContext).insert(writer);
    }
  }
);
  new WriteObjectCommand(false,keyCreator,versionCreator,dataEncrypter,adapter1).execute(commandContext);
  context.assertIsSatisfied();
}
