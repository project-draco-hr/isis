{
  employeeRepository=new EmployeeRepositoryImpl();
  claimRepository=new ClaimRepositoryImpl();
  employeeDO=new Employee();
  employeeDO.setName("Smith");
  employeeDO.setEmployeeRepository(employeeRepository);
  mockContext=mockery.mock(EmbeddedContext.class);
  mockAuthenticationSession=mockery.mock(AuthenticationSession.class);
  mockery.checking(new Expectations(){
{
      allowing(mockContext).getPersistenceState(with(any(Employee.class)));
      will(returnValue(PersistenceState.PERSISTENT));
      allowing(mockContext).getPersistenceState(with(any(String.class)));
      will(returnValue(PersistenceState.STANDALONE));
      allowing(mockContext).getAuthenticationSession();
      will(returnValue(mockAuthenticationSession));
    }
  }
);
  metaModel=new IsisMetaModel(mockContext,employeeRepository,claimRepository);
  metaModel.init();
  wrapperFactory=metaModel.getWrapperFactory();
  employeeWO=wrapperFactory.wrap(employeeDO);
}
