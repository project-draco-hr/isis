{
  Thread t=new Thread("background task"){
    public void run(){
      state.setActive();
      repaint();
      task.execute();
      state.setInactive();
      markDamaged();
      repaint();
    }
  }
;
  t.start();
}
