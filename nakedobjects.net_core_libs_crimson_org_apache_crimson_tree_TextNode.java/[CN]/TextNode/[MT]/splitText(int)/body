{
  TextNode retval;
  char delta[];
  if (isReadonly())   throw new DomEx(DomEx.NO_MODIFICATION_ALLOWED_ERR);
  try {
    retval=new TextNode(data,offset,data.length - offset);
  }
 catch (  ArrayIndexOutOfBoundsException ae) {
    throw new DomEx(DOMException.INDEX_SIZE_ERR);
  }
catch (  NegativeArraySizeException nae) {
    throw new DomEx(DOMException.INDEX_SIZE_ERR);
  }
  getParentNode().insertBefore(retval,getNextSibling());
  delta=new char[offset];
  System.arraycopy(data,0,delta,0,offset);
  data=delta;
  return retval;
}
