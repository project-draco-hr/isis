{
  rootObject.setupResolveState(ResolveState.TRANSIENT);
  field1.setupResolveState(ResolveState.TRANSIENT);
  assertEquals(ResolveState.TRANSIENT,rootObject.getResolveState());
  field1_1.setupOid(new DummyOid(123));
  element1.setupOid(new DummyOid(125));
  element2.setupOid(new DummyOid(127));
  Data[] data=encoder.createParameters(new NakedObjectSpecification[]{new DummyNakedObjectSpecification()},new Naked[]{rootObject});
  ObjectData rootData=(ObjectData)data[0];
  assertObjectData(rootObject,RESOLVED,rootData);
  assertHasFields(4,rootData);
  ObjectData referencedFieldData=(ObjectData)rootData.getFieldContent()[0];
  assertObjectData(field1,RESOLVED,referencedFieldData);
  assertHasFields(1,referencedFieldData);
  assertReferenceData(field1_1,referencedFieldData.getFieldContent()[0]);
  assertValueData(field2,rootData.getFieldContent()[1]);
  NullData emptyFieldData=(NullData)rootData.getFieldContent()[3];
  assertNullData(emptyFieldData);
}
