{
  DummyOid rootOid=new DummyOid(1);
  rootObject.setupOid(rootOid);
  DummyOid referencedOid=new DummyOid(3);
  field1.setupOid(referencedOid);
  DummyOid referencedOid2=new DummyOid(5);
  field1_1.setupOid(referencedOid2);
  ObjectData rootData=(ObjectData)encoder.createCompletePersistentGraph(rootObject);
  assertObjectData(rootObject,RESOLVED,rootData);
  assertHasFields(4,rootData);
  ObjectData referencedFieldData=(ObjectData)rootData.getFieldContent()[0];
  assertObjectData(field1,RESOLVED,referencedFieldData);
  assertHasFields(1,referencedFieldData);
  ObjectData referencedFieldData2=(ObjectData)referencedFieldData.getFieldContent()[0];
  assertObjectData(field1_1,RESOLVED,referencedFieldData2);
  assertHasFields(1,referencedFieldData2);
  assertValueData(field2,rootData.getFieldContent()[1]);
  assertNullData(rootData.getFieldContent()[3]);
  CollectionData collectionData=(CollectionData)rootData.getFieldContent()[2];
  assertEquals(2,collectionData.getElements().length);
  ReferenceData fieldOfField=(ReferenceData)referencedFieldData2.getFieldContent()[0];
  assertReferenceData(rootObject,fieldOfField);
  assertEquals(fieldOfField,rootData);
  ObjectData referenceData=(ObjectData)collectionData.getElements()[0];
  ReferenceData fieldOfElement=(ReferenceData)referenceData.getFieldContent()[0];
  assertReferenceData(rootObject,fieldOfElement);
}
