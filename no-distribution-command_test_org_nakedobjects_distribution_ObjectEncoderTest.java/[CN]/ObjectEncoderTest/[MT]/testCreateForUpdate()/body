{
  field1.setupOid(new DummyOid(3));
  element1.setupOid(new DummyOid(3));
  element2.setupOid(new DummyOid(3));
  ObjectData rootData=(ObjectData)encoder.createForUpdate(rootObject);
  assertEquals(ResolveState.RESOLVED,rootObject.getResolveState());
  assertObjectData(rootObject,RESOLVED,rootData);
  assertHasFields(4,rootData);
  assertReferenceData(field1,rootData.getFieldContent()[0]);
  assertValueData(field2,rootData.getFieldContent()[1]);
  assertNullData(rootData.getFieldContent()[3]);
  CollectionData collectionData=(CollectionData)rootData.getFieldContent()[2];
  assertReferenceData(element1,collectionData.getElements()[0]);
  assertReferenceData(element2,collectionData.getElements()[1]);
}
