{
  rootObject.setupResolveState(ResolveState.TRANSIENT);
  field1.setupOid(new DummyOid(194));
  element1.setupOid(new DummyOid(198));
  element2.setupOid(new DummyOid(196));
  ObjectData rootData=(ObjectData)encoder.createMakePersistentGraph(rootObject,ObjectEncoder.createKnownTransients());
  assertObjectData(rootObject,RESOLVED,rootData);
  assertReferenceData(field1,rootData.getFieldContent()[0]);
  assertValueData(field2,rootData.getFieldContent()[1]);
  assertNullData(rootData.getFieldContent()[3]);
  CollectionData collectionData=(CollectionData)rootData.getFieldContent()[2];
  assertReferenceData(element1,collectionData.getElements()[0]);
  assertReferenceData(element2,collectionData.getElements()[1]);
}
