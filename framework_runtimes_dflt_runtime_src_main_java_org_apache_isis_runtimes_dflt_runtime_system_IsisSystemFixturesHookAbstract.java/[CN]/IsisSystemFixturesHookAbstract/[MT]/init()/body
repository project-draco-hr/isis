{
  if (initialized) {
    throw new IllegalStateException("Already initialized");
  }
 else {
    initialized=true;
  }
  LOG.info("initialising Isis System");
  LOG.info("working directory: " + new File(".").getAbsolutePath());
  LOG.info("resource stream source: " + getConfiguration().getResourceStreamSource());
  localeInitializer.initLocale(getConfiguration());
  timeZoneInitializer.initTimeZone(getConfiguration());
  int splashDelay=SPLASH_DELAY_DEFAULT;
  try {
    final TemplateImageLoader splashLoader=obtainTemplateImageLoader();
    splashLoader.init();
    showSplash(splashLoader);
    sessionFactory=doCreateSessionFactory(deploymentType);
    IsisContext.setConfiguration(getConfiguration());
    initContext(sessionFactory);
    sessionFactory.init();
    installFixturesIfRequired();
  }
 catch (  final IsisSystemException ex) {
    LOG.error("failed to initialise",ex);
    splashDelay=0;
    throw new RuntimeException(ex);
  }
 finally {
    removeSplash(splashDelay);
  }
}
