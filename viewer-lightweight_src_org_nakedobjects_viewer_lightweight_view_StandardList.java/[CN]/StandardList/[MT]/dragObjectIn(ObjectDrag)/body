{
  NakedObject source=drag.getSourceObject();
  Permission add=canAdd(source);
  if (add.isAllowed()) {
    NakedCollection target=((NakedCollection)getObject());
    if (source instanceof NakedClass) {
      getState().setCanDrop();
      return;
    }
 else     if ((target != null) && target.canAdd(source).isAllowed()) {
      getState().setCanDrop();
    }
 else {
      getState().setCantDrop();
    }
  }
 else {
    getState().setCantDrop();
    getWorkspace().setStatus(add.getReason());
  }
  redraw();
}
