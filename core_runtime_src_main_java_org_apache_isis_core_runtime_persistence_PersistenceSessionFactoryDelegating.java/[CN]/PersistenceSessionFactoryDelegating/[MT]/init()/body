{
  ensureThatState(serviceList,is(notNullValue()));
  if (!deploymentType.isProduction() && !Clock.isInitialized()) {
    FixtureClock.initialize();
  }
  pojoRecreator=persistenceSessionFactoryDelegate.createPojoRecreator(getConfiguration());
  adapterFactory=persistenceSessionFactoryDelegate.createAdapterFactory(getConfiguration());
  identifierGenerator=persistenceSessionFactoryDelegate.createIdentifierGenerator(getConfiguration());
  ensureThatState(pojoRecreator,is(not(nullValue())));
  ensureThatState(adapterFactory,is(not(nullValue())));
  ensureThatState(identifierGenerator,is(not(nullValue())));
  servicesInjector=persistenceSessionFactoryDelegate.createServicesInjector(getConfiguration());
  ensureThatState(servicesInjector,is(not(nullValue())));
  runtimeContext=persistenceSessionFactoryDelegate.createRuntimeContext(getConfiguration());
  ensureThatState(runtimeContext,is(not(nullValue())));
  runtimeContext.injectInto(servicesInjector);
  getSpecificationLoader().injectInto(runtimeContext);
  for (  Object service : serviceList) {
    runtimeContext.injectInto(service);
  }
  servicesInjector.setServices(serviceList);
  servicesInjector.init();
}
