{
  DummyObjectData movieData=new DummyObjectData(null,Movie.class.getName(),true,null);
  DummyValueData name=new DummyValueData("ET","java.lang.String");
  movieData.setFieldContent(new Data[]{new DummyNullValue(Person.class.getName()),name});
  persistor.setupMakePersistentOid(new DummyOid(3));
  persistor.setupMakePersistentVersion(new DummyVersion(7));
  ClientActionResultData result=distribution.executeClientAction(new NullSession(),new ObjectData[]{movieData},new ObjectData[0],new ReferenceData[0]);
  assertEquals(1,result.getPersisted().length);
  assertEquals(0,result.getChanged().length);
  persistor.assertAction(0,"start transaction");
  persistor.assertAction(2,"end transaction");
  assertEquals(new DummyOid(3),result.getPersisted()[0].getOid());
  assertEquals(new DummyVersion(7),result.getPersisted()[0].getVersion());
}
