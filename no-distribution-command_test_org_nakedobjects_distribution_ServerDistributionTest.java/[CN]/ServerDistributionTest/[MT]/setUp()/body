{
  LogManager.getRootLogger().setLevel(Level.OFF);
  persistor=new MockObjectPersistor();
  ObjectEncoder encoder=new ObjectEncoder();
  encoder.setDataFactory(new DummyObjectDataFactory());
  distribution=new ServerDistribution();
  distribution.setEncoder(encoder);
  updates=new SingleResponseUpdateNotifier();
  distribution.setUpdateNotifier(updates);
  NakedObjectsClient nakedObjects=new NakedObjectsClient();
  session=new NullSession();
  loader=new ObjectLoaderImpl();
  loader.setAdapterFactory(new TestAdapterFactory());
  loader.setObjectFactory(new TestObjectFactory());
  nakedObjects.setObjectLoader(loader);
  nakedObjects.setConfiguration(new TestConfiguration());
  nakedObjects.setSpecificationLoader(new TestSpecificationLoader());
  nakedObjects.setObjectPersistor(persistor);
  nakedObjects.setSession(session);
  nakedObjects.init();
}
