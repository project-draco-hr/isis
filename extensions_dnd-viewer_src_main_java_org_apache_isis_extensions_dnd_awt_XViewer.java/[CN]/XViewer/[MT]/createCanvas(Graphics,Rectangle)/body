{
  final int w=internalDisplaySize.getWidth();
  final int h=internalDisplaySize.getHeight();
  if (doubleBuffering) {
    if ((doubleBuffer == null) || (bufferGraphics == null) || (doubleBuffer.getWidth(null) < w)|| (doubleBuffer.getHeight(null) < h)) {
      doubleBuffer=renderingArea.createImage(w,h);
      LOG.debug("buffer sized to " + doubleBuffer.getWidth(null) + "x"+ doubleBuffer.getHeight(null));
    }
    bufferGraphics=doubleBuffer.getGraphics().create();
  }
 else {
    bufferGraphics=graphic;
  }
  bufferGraphics.clearRect(paintArea.x,paintArea.y,paintArea.width,paintArea.height);
  bufferGraphics.clearRect(0,0,w,h);
  bufferGraphics.setClip(paintArea.x,paintArea.y,paintArea.width,paintArea.height);
  final Canvas c=new AwtCanvas(bufferGraphics,renderingArea,paintArea.x,paintArea.y,paintArea.width,paintArea.height);
  return c;
}
