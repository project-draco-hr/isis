{
  context.allowing(mockSpecificationLoaderSpi);
  facetFactory=new TitleAnnotationFacetFactory();
  facetFactory.setAdapterManager(mockAdapterManager);
  facetFactory.setSpecificationLoader(mockSpecificationLoaderSpi);
  facetFactory.setServicesInjector(mockServicesInjector);
  facetFactory.setDeploymentCategory(DeploymentCategory.PRODUCTION);
  context.checking(new Expectations(){
{
      allowing(mockServicesInjector).lookupService(AuthenticationSessionProvider.class);
      will(returnValue(mockAuthenticationSessionProvider));
      allowing(mockLocalizationProvider).getLocalization();
      will(returnValue(new LocalizationDefault()));
    }
  }
);
  context.checking(new Expectations(){
{
      allowing(mockDeploymentCategoryProvider).getDeploymentCategory();
      will(returnValue(DeploymentCategory.PRODUCTION));
      allowing(mockAuthenticationSessionProvider).getAuthenticationSession();
      will(returnValue(mockAuthenticationSession));
    }
  }
);
}
