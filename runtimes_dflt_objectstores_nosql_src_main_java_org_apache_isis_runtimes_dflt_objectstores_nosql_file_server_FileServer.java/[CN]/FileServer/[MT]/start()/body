{
  ServerSocket socket=null;
  try {
    LOG.debug("setting up socket on " + host + ":"+ port);
    final InetAddress address=InetAddress.getByName(host);
    socket=new ServerSocket(port,BACKLOG,address);
    socket.setSoTimeout(connectionTimeout);
    LOG.info("listenting on " + socket.getInetAddress().getHostAddress() + " port "+ socket.getLocalPort());
    LOG.debug("listenting on " + socket);
    server.startup();
  }
 catch (  final UnknownHostException e) {
    LOG.error("Unknown host " + host,e);
    System.exit(0);
  }
catch (  final IOException e) {
    LOG.error("start failure - networking  not set up for " + host,e);
    System.exit(0);
  }
catch (  final RuntimeException e) {
    LOG.error("start failure",e);
    System.exit(0);
  }
  final boolean awaitConnections=true;
  do {
    try {
      final Socket connection=socket.accept();
      LOG.info("connection from " + connection);
      connection.setSoTimeout(readTimeout);
      connection(connection);
    }
 catch (    final SocketTimeoutException expected) {
    }
catch (    final IOException e) {
      LOG.error("networking problem",e);
    }
  }
 while (awaitConnections);
}
