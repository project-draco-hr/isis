{
  context.checking(new Expectations(){
{
      one(db).nextSerialNumberBatch("_id",4);
      will(returnValue(1L));
    }
  }
);
  oidGenerator.asPersistent(oid);
  oidGenerator.asPersistent(oid=(RootOidDefault)oidGenerator.createTransientOid(new ExamplePojo()));
  oidGenerator.asPersistent(oid=(RootOidDefault)oidGenerator.createTransientOid(new ExamplePojo()));
  assertEquals(3,oid.getIdentifier());
  oidGenerator.asPersistent(oid=(RootOidDefault)oidGenerator.createTransientOid(new ExamplePojo()));
  assertEquals(4,oid.getIdentifier());
  context.checking(new Expectations(){
{
      one(db).nextSerialNumberBatch("_id",4);
      will(returnValue(5L));
    }
  }
);
  oidGenerator.asPersistent(oid=(RootOidDefault)oidGenerator.createTransientOid(new ExamplePojo()));
  assertFalse(oid.isTransient());
  assertEquals(5,oid.getIdentifier());
  context.assertIsSatisfied();
}
