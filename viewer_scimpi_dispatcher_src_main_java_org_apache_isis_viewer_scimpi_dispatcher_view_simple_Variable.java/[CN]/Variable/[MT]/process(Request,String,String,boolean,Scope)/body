{
  request.pushNewBuffer();
  request.processUtilCloseTag();
  String source=request.popBuffer();
  if (isClear) {
    request.appendDebug("variable: " + name + " ( cleared");
    request.getContext().clearVariable(name,scope);
  }
 else {
    if (source.length() == 0 && value != null) {
      source=value;
    }
    if (source.length() == 0) {
      source=(String)request.getContext().getVariable(RequestContext.RESULT);
    }
    request.appendDebug("    " + name + " ("+ scope+ ") set to "+ source);
    request.getContext().addVariable(name,source,scope);
  }
}
