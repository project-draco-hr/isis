{
  Assert.assertEquals(view.getView(),view);
  Content content=view.getContent();
  NakedObject object=((ObjectContent)content).getObject();
  LOG.debug("rebuild view " + view + " for "+ object);
  NakedObjectSpecification cls=null;
  if (useFieldType && content instanceof ObjectField) {
    cls=object.getSpecification();
    cls=((ObjectField)content).getSpecification();
  }
  if (cls == null) {
    cls=object.getSpecification();
  }
  NakedObjectField[] flds=cls.getVisibleFields(object,ClientSession.getSession());
  if (view.getSubviews().length == 0) {
    newBuild(view,object,flds);
  }
 else {
    updateBuild(view,object,flds);
  }
  object.clearViewDirty();
}
