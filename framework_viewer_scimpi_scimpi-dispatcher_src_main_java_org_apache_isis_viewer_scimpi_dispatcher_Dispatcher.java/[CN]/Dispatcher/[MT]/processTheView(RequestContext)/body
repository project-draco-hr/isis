{
  IsisTransactionManager transactionManager=IsisContext.getPersistenceSession().getTransactionManager();
  if (transactionManager.getTransaction().getState().canFlush()) {
    transactionManager.flushTransaction();
  }
  processView(context);
  transactionManager=IsisContext.getPersistenceSession().getTransactionManager();
  if (transactionManager.getTransaction().getState().canCommit()) {
    IsisContext.getPersistenceSession().getTransactionManager().endTransaction();
  }
  context.endRequest();
  UserManager.endRequest(context.getSession());
}
