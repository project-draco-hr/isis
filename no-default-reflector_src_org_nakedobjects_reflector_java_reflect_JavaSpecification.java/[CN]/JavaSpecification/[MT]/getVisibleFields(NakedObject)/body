{
  getAccessibleFields();
  NakedObjectField[] selectedFields=new NakedObjectField[accessibleFields.length];
  int v=0;
  for (int i=0; i < accessibleFields.length; i++) {
    if (object.isVisible(accessibleFields[i]).isAllowed()) {
      selectedFields[v++]=accessibleFields[i];
    }
  }
  NakedObjectField[] visibleFields=new NakedObjectField[v];
  System.arraycopy(selectedFields,0,visibleFields,0,v);
  return visibleFields;
}
