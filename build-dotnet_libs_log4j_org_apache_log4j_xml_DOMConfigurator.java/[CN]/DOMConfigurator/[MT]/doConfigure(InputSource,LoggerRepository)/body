{
  DocumentBuilderFactory dbf=null;
  this.repository=repository;
  try {
    LogLog.debug("System property is :" + OptionConverter.getSystemProperty(dbfKey,null));
    dbf=DocumentBuilderFactory.newInstance();
    LogLog.debug("Standard DocumentBuilderFactory search succeded.");
    LogLog.debug("DocumentBuilderFactory is: " + dbf.getClass().getName());
  }
 catch (  FactoryConfigurationError fce) {
    Exception e=fce.getException();
    LogLog.debug("Could not instantiate a DocumentBuilderFactory.",e);
    throw fce;
  }
  try {
    dbf.setValidating(true);
    DocumentBuilder docBuilder=dbf.newDocumentBuilder();
    docBuilder.setErrorHandler(new SAXErrorHandler());
    Class clazz=this.getClass();
    URL dtdURL=clazz.getResource("/org/apache/log4j/xml/log4j.dtd");
    if (dtdURL == null) {
      LogLog.error("Could not find [log4j.dtd]. Used [" + clazz.getClassLoader() + "] class loader in the search.");
    }
 else {
      LogLog.debug("URL to log4j.dtd is [" + dtdURL.toString() + "].");
      inputSource.setSystemId(dtdURL.toString());
    }
    Document doc=docBuilder.parse(inputSource);
    parse(doc.getDocumentElement());
  }
 catch (  Exception e) {
    LogLog.error("Could not parse input source [" + inputSource + "].",e);
  }
}
