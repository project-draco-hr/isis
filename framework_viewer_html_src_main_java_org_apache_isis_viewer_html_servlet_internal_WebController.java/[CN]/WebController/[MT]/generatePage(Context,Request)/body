{
  context.restoreAllObjectsToLoader();
  final Page page=context.getComponentFactory().createPage();
  pageHeader(context,page);
  final Block navigation=page.getNavigation();
  final Block optionBar=context.getComponentFactory().createBlock("options",null);
  optionBar.add(context.getComponentFactory().createHeading("Options"));
  Block block=context.getComponentFactory().createBlock("item",null);
  Component option=context.getComponentFactory().createLink("logout","Log Out","End the current session");
  block.add(option);
  optionBar.add(block);
  block=context.getComponentFactory().createBlock("item",null);
  option=context.getComponentFactory().createLink("about","About","Details about this application");
  block.add(option);
  optionBar.add(block);
  final boolean isExploring=IsisContext.getDeploymentType().isExploring();
  if (isExploring) {
    block=context.getComponentFactory().createBlock("item",null);
    option=context.getComponentFactory().createLink("swapuser","Swap User","Swap the exploration user");
    block.add(option);
    optionBar.add(block);
  }
  navigation.add(optionBar);
  listServices(context,navigation);
  listHistory(context,navigation);
  Monitor.addEvent("Web","Request " + request);
  runAction(context,request,page);
  addCrumbs(context,page);
  if (IsisContext.inSession() && IsisContext.inTransaction()) {
    IsisContext.getUpdateNotifier().clear();
  }
  return page;
}
