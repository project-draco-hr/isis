{
  Identifier identifier=identifiedHolder.getIdentifier();
  ensureMapsConsistent(ownerAdapter);
  Assert.assertNotNull(pojo);
  final Oid aggregatedOid=new AggregatedOid(ownerAdapter.getOid(),identifier);
  ObjectAdapter aggregatedAdapter=createOrRecreateAdapter(pojo,aggregatedOid);
  final TypeOfFacet facet=identifiedHolder.getFacet(TypeOfFacet.class);
  aggregatedAdapter.setElementSpecificationProvider(ElementSpecificationProviderFromTypeOfFacet.createFrom(facet));
  aggregatedAdapter.setOptimisticLock(ownerAdapter.getVersion());
  return aggregatedAdapter;
}
