{
  for (  ObjectAssociation assoc : associations) {
    Consent visibility=assoc.isVisible(getSession(),objectAdapter);
    if (!visibility.isAllowed()) {
      continue;
    }
    if (assoc instanceof OneToOneAssociation) {
      OneToOneAssociation property=(OneToOneAssociation)assoc;
      JsonRepresentation propertyRep=ObjectPropertyRepBuilder.newBuilder(resourceContext,objectAdapter,property).usingLinkToBuilder(linkToBuilder).withDetailsLink().build();
      members.arrayAdd(propertyRep);
    }
    if (assoc instanceof OneToManyAssociation) {
      OneToManyAssociation collection=(OneToManyAssociation)assoc;
      JsonRepresentation collectionRep=ObjectCollectionRepBuilder.newBuilder(resourceContext,objectAdapter,collection).usingLinkToBuilder(linkToBuilder).withDetailsLink().build();
      members.arrayAdd(collectionRep);
    }
  }
}
