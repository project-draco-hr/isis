{
  PropertiesFileLoader loadedProperties=new PropertiesFileLoader("log4j.properties",false);
  Properties p=loadedProperties.getProperties();
  if (p.size() == 0) {
    BasicConfigurator.configure();
  }
 else {
    PropertyConfigurator.configure(p);
  }
  Logger.getRootLogger().setLevel(Level.WARN);
  splash=null;
  try {
    String name=this.getClass().getName();
    name=name.substring(name.lastIndexOf('.') + 1);
    PropertiesConfiguration configuration=new PropertiesConfiguration(new PropertiesFileLoader(configurationFile(),false));
    NakedObjectsClient nakedObjects=new NakedObjectsClient();
    nakedObjects.setConfiguration(configuration);
    PropertyConfigurator.configure(configuration.getProperties("log4j"));
    AboutNakedObjects.logVersion();
    boolean noSplash=configuration.getBoolean("nosplash",false);
    if (!noSplash) {
      splash=new SplashWindow();
    }
    setUpLocale();
    JavaBusinessObjectContainer container=new JavaBusinessObjectContainer();
    JavaObjectFactory objectFactory=new JavaObjectFactory();
    objectFactory.setContainer(container);
    TransientObjectStore objectStore=new TransientObjectStore();
    OidGenerator oidGenerator=new SimpleOidGenerator();
    DefaultPersistAlgorithm persistAlgorithm=new DefaultPersistAlgorithm();
    persistAlgorithm.setOidGenerator(oidGenerator);
    ObjectStorePersistor objectManager=new ObjectStorePersistor();
    objectManager.setObjectStore(objectStore);
    objectManager.setPersistAlgorithm(persistAlgorithm);
    nakedObjects.setObjectPersistor(objectManager);
    HelpManagerAssist helpManager=new HelpManagerAssist();
    helpManager.setDecorated(new SimpleHelpManager());
    HelpPeerFactory helpPeerFactory=new HelpPeerFactory();
    helpPeerFactory.setHelpManager(helpManager);
    ReflectionPeerFactory[] factories=new ReflectionPeerFactory[]{helpPeerFactory,new TransactionPeerFactory()};
    JavaSpecificationLoader specificationLoader=new JavaSpecificationLoader();
    specificationLoader.setReflectionPeerFactories(factories);
    nakedObjects.setSpecificationLoader(specificationLoader);
    ObjectLoaderImpl objectLoader=new ObjectLoaderImpl();
    objectLoader.setObjectFactory(objectFactory);
    objectLoader.setPojoAdapterMap(new PojoAdapterHashMap());
    objectLoader.setIdentityAdapterMap(new IdentityAdapterHashMap());
    objectLoader.setAdapterFactory(new JavaAdapterFactory());
    nakedObjects.setObjectLoader(objectLoader);
    nakedObjects.setSession(new SimpleSession());
    builder=new JavaFixtureBuilder();
    nakedObjects.init();
  }
 catch (  Exception e) {
    LOG.error("exploration startup problem",e);
  }
 finally {
    if (splash != null) {
      splash.removeAfterDelay(4);
    }
  }
}
