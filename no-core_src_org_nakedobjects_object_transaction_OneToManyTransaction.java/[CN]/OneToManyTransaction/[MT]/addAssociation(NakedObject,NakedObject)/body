{
  NakedObjectPersistor objectManager=NakedObjects.getObjectPersistor();
  if (inObject.getResolveState().isPersistent()) {
    try {
      objectManager.startTransaction();
      super.addAssociation(inObject,associate);
      objectManager.saveChanges();
      objectManager.endTransaction();
    }
 catch (    RuntimeException e) {
      abort(objectManager);
      throw e;
    }
  }
 else {
    super.addAssociation(inObject,associate);
  }
}
