{
  if (argv.length == 3)   init(argv[0],argv[1],argv[2]);
 else   usage("Wrong number of arguments.");
  try {
    cat.info("Listening on port " + port);
    ServerSocket serverSocket=new ServerSocket(port);
    while (true) {
      cat.info("Waiting to accept a new client.");
      Socket socket=serverSocket.accept();
      InetAddress inetAddress=socket.getInetAddress();
      cat.info("Connected to client at " + inetAddress);
      LoggerRepository h=(LoggerRepository)server.hierarchyMap.get(inetAddress);
      if (h == null) {
        h=server.configureHierarchy(inetAddress);
      }
      cat.info("Starting new socket node.");
      new Thread(new SocketNode(socket,h)).start();
    }
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
}
